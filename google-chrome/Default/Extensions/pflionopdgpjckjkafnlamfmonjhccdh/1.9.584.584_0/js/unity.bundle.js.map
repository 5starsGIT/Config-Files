{"version":3,"sources":["webpack:///unity.bundle.js","webpack:///webpack/bootstrap c3b1f8227955d8cd9346?cde4","webpack:///./src/components/BaseModule.js?1e71","webpack:///./src/MessageForwarder.js?87be","webpack:///./src/UnityMessageHandler.js","webpack:///./src/UnityApp.js","webpack:///./src/components/SyncFS_IDB.js","webpack:///../chromeos_resources/src/BluetoothHandler.js","webpack:///../chromeos_resources/src/EmscriptenFSHandler.js","webpack:///../chromeos_resources/src/WindowHandler.js","webpack:///../chromeos_resources/src/unity.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","BaseModule","this","keys","message","args","data","map","arg","method","apply","MessageForwarder","forward","appWindow","appOrigin","getAppOrigin","getAppWindow","postMessage","sender","UnityMessageHandler","queue","unityInstance","profileEnd","unityGameInstance","console","warn","unityObjectName","queuedCall","shift","callUnity","SendMessage","JSON","stringify","push","__WEBPACK_IMPORTED_MODULE_0__UnityMessageHandler__","__WEBPACK_IMPORTED_MODULE_1__MessageForwarder__","_typeof","Symbol","iterator","obj","constructor","UnityApp","$logger","$window","addProfilingUtils","unityMessageHandler","messageForwarder","addEventListener","$event","receiveMessage","unity","listeners","window","profileBegin","tag","Array","unshift","log","methods","forEach","Promise","resolve","debug","listenerName","listenerInstance","event","setAppWindow","source","setAppOrigin","origin","type","attachToGlobalUnityFunction","sendDataToUnity","transferID","metadata","unityCallback","callbackName","_transferToJS","targetNameAndMethod","handle","error","stack","len","w","_transferToUnity","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_components_BaseModule__","__WEBPACK_IMPORTED_MODULE_1_MessageForwarder__","SyncFS_IDB","_attachTrackingDelegate","_this","globalExists","setTimeout","origOnWriteToFile","FS","trackingDelegate","path","undefined","_trackingFilesChanges","_shouldAutoTrackFile","_modifiedFiles","has","add","nameOfVariable","readRawFile","context","buffer","result","_readFile","writeRawFile","arrayBuffer","_writeFile","Uint8Array","readTextFile","writeTextFile","contents","encoding","readFile","e","fileDir","split","slice","join","_createDirectoryRecursive","writeFile","createDirectory","mkdir","pathElements","currentPath","removeDirectory","removeDirectoryContentsRecursively","rmdir","removeFile","unlink","removeDirectoryContents","root","reverseFlush","syncfs","err","flushChanges","flushing","flushQueue","printFolderStructure","listFolderStructure","file","files","readdir","mode","stat","isDir","concat","startTrackingFileChanges","setInterval","_syncChangedFiles","clear","_shouldRemoveFile","_playerPrefsPath","_setup","_BaseModule","Set","__WEBPACK_IMPORTED_MODULE_1_UnityMessageHandler__","BluetoothHandler","setUnityObjectName","sendData","__WEBPACK_IMPORTED_MODULE_2_MessageForwarder__","EmscriptenFSHandler","saveFile","fileReader","FileReader","onload","progressEvent","int8Array","Int8Array","filePath","dataURL","readAsArrayBuffer","fileBlob","WindowHandler","_ref","_temp","_ret","_len","arguments","_key","getPrototypeOf","resize","unityCanvas","document","getElementById","canvases","getElementsByTagName","info","width","height","unityApp","initialize","then","attachListener"],"mappings":"CAAS,SAAUA,GCIjB,QAASC,GAAoBC,GAG5B,GAAGC,EAAiBD,GACnB,MAAOC,GAAiBD,GAAUE,OAGnC,IAAIC,GAASF,EAAiBD,IAC7BI,EAAGJ,EACHK,GAAG,EACHH,WAUD,OANAJ,GAAQE,GAAUM,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOE,GAAI,EAGJF,EAAOD,QAvBf,GAAID,KA4BJF,GAAoBQ,EAAIT,EAGxBC,EAAoBS,EAAIP,EAGxBF,EAAoBK,EAAI,SAASK,GAAS,MAAOA,IAGjDV,EAAoBW,EAAI,SAASR,EAASS,EAAMC,GAC3Cb,EAAoBc,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,GAC9BK,cAAc,EACdC,YAAY,EACZC,IAAKN,KAMRb,EAAoBoB,EAAI,SAAShB,GAChC,GAAIS,GAAST,GAAUA,EAAOiB,WAC7B,WAAwB,MAAOjB,GAAgB,SAC/C,WAA8B,MAAOA,GAEtC,OADAJ,GAAoBW,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRb,EAAoBc,EAAI,SAASQ,EAAQC,GAAY,MAAOR,QAAOS,UAAUC,eAAelB,KAAKe,EAAQC,IAGzGvB,EAAoB0B,EAAI,GAGjB1B,EAAoBA,EAAoB2B,EAAI,MDM/C,SAAUvB,EAAQwB,EAAqB5B,GAE7C,YAGA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/B,GAAI,EAAGA,EAAI+B,EAAMC,OAAQhC,IAAK,CAAE,GAAIiC,GAAaF,EAAM/B,EAAIiC,GAAWpB,WAAaoB,EAAWpB,aAAc,EAAOoB,EAAWrB,cAAe,EAAU,SAAWqB,KAAYA,EAAWC,UAAW,GAAMxB,OAAOC,eAAemB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBH,EAAYP,UAAWiB,GAAiBC,GAAaR,EAAiBH,EAAaW,GAAqBX,MEzE3gBY,E,WF8EnB,QAASA,KACPd,EAAgBe,KAAMD,GAkBxB,MAfAV,GAAaU,IACXH,IAAK,qBACL9B,MAAO,WEjFP,MAAOK,QAAO8B,KAAKD,SFqFnBJ,IAAK,SACL9B,MAAO,SEnFFoC,GACL,GAAMC,GAAOD,EAAQE,KAAKC,IAAI,SAACC,GAC7B,MAAOA,IAET,OAAON,MAAKE,EAAQK,QAAQC,MAAM,KAAML,OFuFnCJ,IEjGYA,QFuGd,CAED,SAAUvC,EAAQwB,EAAqB5B,GAE7C,YAGA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/B,GAAI,EAAGA,EAAI+B,EAAMC,OAAQhC,IAAK,CAAE,GAAIiC,GAAaF,EAAM/B,EAAIiC,GAAWpB,WAAaoB,EAAWpB,aAAc,EAAOoB,EAAWrB,cAAe,EAAU,SAAWqB,KAAYA,EAAWC,UAAW,GAAMxB,OAAOC,eAAemB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBH,EAAYP,UAAWiB,GAAiBC,GAAaR,EAAiBH,EAAaW,GAAqBX,MG5G5hBD,EAAW,KAEMuB,E,WACnB,aAIE,MAJY,WACPvB,IACHA,EAAWc,MAENd,EHgKT,MA3CAG,GAAaoB,IACXb,IAAK,SACL9B,MAAO,WGpGO,2BAANqC,EAAM,qBAANA,EAAM,eACdM,GAAiBC,QAAQP,EAAKZ,OAAQY,EAAKI,OAAQJ,EAAKC,WH2GxDR,IAAK,eACL9B,MAAO,SG7HW6C,GAClBzB,EAASyB,UAAYA,KHgIrBf,IAAK,eACL9B,MAAO,SG9HW8C,GAClB1B,EAAS0B,UAAYA,KHiIrBhB,IAAK,eACL9B,MAAO,WG9HP,MAAOoB,GAASyB,aHkIhBf,IAAK,eACL9B,MAAO,WG/HP,MAAOoB,GAAS0B,aHmIhBhB,IAAK,UACL9B,MAAO,SG7HMyC,EAAQhB,EAAQa,GACzBK,EAAiBI,gBAAkBJ,EAAiBK,gBACtDL,EAAiBK,eAAeC,aAC9BC,OAAQ,QACRzB,SACAgB,SACAH,QACCK,EAAiBI,oBHkIjBJ,IGrKYA,QH4Kf,SAAUjD,EAAQwB,EAAqB5B,GAE7C,YAGA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/B,GAAI,EAAGA,EAAI+B,EAAMC,OAAQhC,IAAK,CAAE,GAAIiC,GAAaF,EAAM/B,EAAIiC,GAAWpB,WAAaoB,EAAWpB,aAAc,EAAOoB,EAAWrB,cAAe,EAAU,SAAWqB,KAAYA,EAAWC,UAAW,GAAMxB,OAAOC,eAAemB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBH,EAAYP,UAAWiB,GAAiBC,GAAaR,EAAiBH,EAAaW,GAAqBX,MIhL5hBD,EAAW,KAEM+B,E,WAEnB,aAME,MANY,WACK,OAAb/B,IACFA,EAAWc,KACXA,KAAKkB,UAGAhC,EJ0NT,MAjCAG,GAAa4B,IACXrB,IAAK,uBACL9B,MAAO,SIxLYqD,GACfA,GACAC,WAAW,uBAAwB,gCACnClC,EAASmC,kBAAoBF,GAE7BG,QAAQC,KAAK,sEJ4LjB3B,IAAK,qBACL9B,MAAO,SIzLU0D,GAIjB,IAHAJ,WAAW,qBAAsB,sBAAwBI,EAAkB,cAC3EtC,EAASsC,gBAAkBA,EAErBxB,KAAKkB,MAAMzB,OAAS,GAAG,CAC3B,GAAMgC,GAAazB,KAAKkB,MAAMQ,OAC9B1B,MAAK2B,UAAUnB,MAAMR,KAAMyB,OJ6L7B7B,IAAK,YACL9B,MAAO,SI1LCyC,EAAQH,GACXlB,EAASsC,gBAGRI,YACI1C,EAASsC,gBACTjB,EACgB,gBAATH,GAAoByB,KAAKC,UAAU1B,GAAQA,GAL1DJ,KAAKkB,MAAMa,MAAMxB,EAAQH,QJkMtBa,IIlOYA,QJwOd,CACA,CACA,CAED,SAAUzD,EAAQwB,EAAqB5B,GAE7C,YAOA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAN3F,GAAI4C,GAAqD5E,EAAoB,GACzE6E,EAAkD7E,EAAoB,GAC3F8E,EAA4B,kBAAXC,SAAoD,gBAApBA,QAAOC,SAAwB,SAAUC,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXF,SAAyBE,EAAIC,cAAgBH,QAAUE,IAAQF,OAAOvD,UAAY,eAAkByD,IAElQhD,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/B,GAAI,EAAGA,EAAI+B,EAAMC,OAAQhC,IAAK,CAAE,GAAIiC,GAAaF,EAAM/B,EAAIiC,GAAWpB,WAAaoB,EAAWpB,aAAc,EAAOoB,EAAWrB,cAAe,EAAU,SAAWqB,KAAYA,EAAWC,UAAW,GAAMxB,OAAOC,eAAemB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBH,EAAYP,UAAWiB,GAAiBC,GAAaR,EAAiBH,EAAaW,GAAqBX,MKnP3gBoD,E,WAYnB,WAAYC,EAASC,GAAS,qBAC5BzC,KAAK0C,oBAEL1C,KAAK2C,oBAAsB,GAAI1B,KAC/BjB,KAAK4C,iBAAmB,GAAInC,KAE5BT,KAAKwC,QAAUA,EACfxC,KAAKyC,QAAUA,EAEfzC,KAAKyC,QAAQI,iBAAiB,UAAW,SAACC,GACxC,EAAKC,eAAepF,KAAK,EAAMmF,KAIjC9C,KAAKyC,QAAQO,OACX,MAAShD,KAAK2C,qBAIhB3C,KAAKiD,aL2WP,MA/IA5D,GAAakD,IACX3C,IAAK,oBACL9B,MAAO,WK3PPoF,OAAOC,aAAe,SAASC,GAAc,2BAANjD,EAAM,6BAANA,EAAM,iBAC3CkD,OAAMzE,UAAU0E,QAAQ3F,KAAKwC,EAAM,MAAMiD,EAAI,MAC7C9B,QAAQiC,IAAI/C,MAAMc,QAASnB,IAE7B+C,OAAO9B,WAAa,SAASgC,GAAc,2BAANjD,EAAM,6BAANA,EAAM,iBACzCkD,OAAMzE,UAAU0E,QAAQ3F,KAAKwC,EAAM,MAAMiD,EAAI,MAC7C9B,QAAQiC,IAAI/C,MAAMc,QAASnB,QLmS/Bd,EAAakD,IACX3C,IAAK,8BACL9B,MAAO,SK3QmBsC,GAAM,UAChCA,GAAKoD,QAAQC,QAAQ,SAAClD,GACf,EAAKkC,QAAQO,MAAM5C,EAAKpC,QAC3B,EAAKyE,QAAQO,MAAM5C,EAAKpC,UAG1B,EAAKyE,QAAQO,MAAM5C,EAAKpC,MAAMuC,GAAU,WAAa,2BAATJ,EAAS,qBAATA,EAAS,eACnDM,KAAiBC,QAAQH,EAAQH,EAAKpC,KAAMmC,MAIhDH,KAAKwC,QAAQe,IAAb,cAA+BnD,EAAKpC,SLoRpC4B,IAAK,aACL9B,MAAO,WKlRI,UACX,OAAO,IAAI4F,SAAQ,SAACC,GAClB,EAAKnB,QAAQoB,MAAM,cACnBD,SLwRF/D,IAAK,iBACL9B,MAAO,SKrRM+F,EAAcC,GAC3B9D,KAAKiD,UAAUY,GAAgBC,KLwR/BlE,IAAK,iBACL9B,MAAO,SKtRMiG,GACb,IAAKtD,IAAiBK,iBAAmBL,IAAiBI,eAKxD,MAJAJ,KAAiBuD,aAAaD,EAAME,QACpCxD,IAAiByD,aAAaH,EAAMI,YAEpCnE,MAAKwC,QAAQe,IAAI,yCAInB,IAAwB,aAApBQ,EAAM3D,KAAKgE,KAEb,WADApE,MAAKqE,4BAA4BN,EAAM3D,KAIzC,IAA0B,UAAtB2D,EAAM3D,KAAKb,OAEb,WADAS,MAAK2C,oBAAoBhB,UAAUoC,EAAM3D,KAAKG,OAAQwD,EAAM3D,KAAKA,KAInE,IAA0B,kBAAtB2D,EAAM3D,KAAKb,OAEb,WADAS,MAAKsE,gBAAgBP,EAAM3D,KAAKA,KAAM2D,EAAM3D,KAAKmE,WAAYR,EAAM3D,KAAKoE,SAAUT,EAAM3D,KAAKqE,cAI/F,IAA0B,qBAAtBV,EAAM3D,KAAKb,OAQb,MAPAkB,KAAiBC,QACfqD,EAAM3D,KAAKsE,aACXX,EAAM3D,KAAKY,QACV+C,EAAM3D,KAAKoE,SAAUtB,OAAOyB,cAAcZ,EAAM3D,KAAKmE,yBAGjDrB,QAAOyB,cAAcZ,EAAM3D,KAAKmE,WAKzC,IAAMhF,GAASS,KAAKiD,UAAUc,EAAM3D,KAAKb,QACnCqF,EAAsBb,EAAM3D,KAAKb,OAAS,IAAMwE,EAAM3D,KAAKG,OAAS,IAAMsB,KAAKC,UAAUiC,EAAM3D,KAAKA,MAAQ,GAClH,KACQb,GAAUA,EAAOsF,OACnBtF,EAAOsF,OAAOd,EAAM3D,MAEpBJ,KAAKwC,QAAQjB,KAAK,sDAAwDwC,EAAM3D,KAAKb,OAAS,wBAAyBS,KAAKiD,WAEhI,MAAO6B,GACP9E,KAAKwC,QAAQsC,MAAM,qDAAuDF,EAAsB,mBAAqB/C,KAAKC,UAAUiC,EAAM3D,MAAQ,iBAAmB0E,EAAM5E,QAAU,YAAc4E,EAAM5E,QAAU,KAAO,KAAO4E,EAAMC,MAAQ,UAAYD,EAAMC,MAAQ,IAAM,ULuRjRnF,IAAK,kBACL9B,MAAO,SKpROsC,EAAMoE,EAAUD,EAAYE,GAC1CnD,QAAQiC,IAAIiB,EAASxG,KAAO,IAAMwG,EAASQ,IAAM,SAArC,KAAkD5E,EAAlD,cAAkDA,IAE9D,IAAI6E,GAAIjF,KAAKyC,OACbwC,GAAEC,iBAAmBD,EAAEC,iBAAmBD,EAAEC,oBAC5CD,EAAEC,iBAAiBX,GAAcnE,EACjCJ,KAAK2C,oBAAoBhB,UAAU8C,EAAeD,OLwR7CjC,IK1YYA,QLgZd,CACA,CACC,CAEF,SAAU/E,EAAQwB,EAAqB5B,GAE7C,YAKA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS+F,GAA2BC,EAAMzH,GAAQ,IAAKyH,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO1H,GAAyB,gBAATA,IAAqC,kBAATA,GAA8ByH,EAAPzH,EAElO,QAAS2H,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIpG,WAAU,iEAAoEoG,GAAeD,GAAS3G,UAAYT,OAAOsH,OAAOD,GAAcA,EAAW5G,WAAa0D,aAAexE,MAAOyH,EAAUjH,YAAY,EAAOqB,UAAU,EAAMtB,cAAc,KAAemH,IAAYrH,OAAOuH,eAAiBvH,OAAOuH,eAAeH,EAAUC,GAAcD,EAASI,UAAYH,GAR5c,GAAII,GAAsDxI,EAAoB,GAC1EyI,EAAiDzI,EAAoB,GAC1FiC,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/B,GAAI,EAAGA,EAAI+B,EAAMC,OAAQhC,IAAK,CAAE,GAAIiC,GAAaF,EAAM/B,EAAIiC,GAAWpB,WAAaoB,EAAWpB,aAAc,EAAOoB,EAAWrB,cAAe,EAAU,SAAWqB,KAAYA,EAAWC,UAAW,GAAMxB,OAAOC,eAAemB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBH,EAAYP,UAAWiB,GAAiBC,GAAaR,EAAiBH,EAAaW,GAAqBX,MMrZ3gB2G,E,YAEnB,aAAc,oFAkBdC,wBAA0B,WACxB,GAAIC,GAAQA,CAGZ,KAAK,EAAKC,aAAa,MAGrB,WADAC,YAAW,EAAKH,wBAAyB,IAI3C,IAAII,GAAoBC,GAAGC,iBAAH,aACxB/E,SAAQiC,IAAI,sBAAwB4C,GACpCC,GAAGC,iBAAH,cAAuC,SAAUC,OAErBC,KAAtBJ,GACFA,EAAkBG,GAEhBN,EAAMQ,uBAAyBR,EAAMS,qBAAqBH,KACvDN,EAAMU,eAAeC,IAAIL,IAC5BN,EAAMU,eAAeE,IAAIN,KAK/BhF,QAAQiC,IAAI,+BA1CA,EA6Cd0C,aAAe,SAACY,GACZ,MAAOA,KAAkB3D,SA9Cf,EAiDd4D,YAAc,SAACR,EAAMS,GACnB,GACIC,GADAC,EAAS,EAAKC,UAAUZ,EAAM,SAE9BW,KACFD,EAASC,EAAOD,QAElBvG,IAAiBC,QAAQ,qBAAsB,UAAW4F,EAAMU,EAAQD,KAvD5D,EA0DdI,aAAe,SAACb,EAAMc,EAAaL,GACjC,EAAKM,WAAWf,EAAM,SAAU,GAAIgB,YAAWF,GAAcL,IA3DjD,EA8DdQ,aAAe,SAACjB,EAAMS,GACpB5D,aAAa,IAAK,kBAAkBmD,EACpC,IAAIW,GAAS,EAAKC,UAAUZ,EAAM,OAClClF,YAAW,IAAK,qBAChBX,IAAiBC,QAAQ,qBAAsB,UAAW4F,EAAMW,EAAQF,KAlE5D,EAqEdS,cAAgB,SAAClB,EAAMmB,EAAUV,GAC/B,EAAKM,WAAWf,EAAM,OAAQmB,EAAUV,IAtE5B,EAyEdG,UAAY,SAACZ,EAAMoB,GACjB,GAAIT,EACJ,KACEA,EAASb,GAAGuB,SAASrB,GAAOoB,SAAUA,IACtC,MAAOE,GACPtG,QAAQiC,IAAI,uBAAyB+C,EAAO,oBAAsBoB,EAAW,YAAc7F,KAAKC,UAAU8F,IAE5G,MAAOX,IAhFK,EAmFdI,WAAa,SAACf,EAAMoB,EAAUtH,EAAM2G,GAElC,GAAIc,GAAUvB,EAAKwB,MAAM,KAAKC,MAAM,GAAI,GAAGC,KAAK,IAChD,GAAKC,0BAA0BJ,GAC3BzH,GACFkB,QAAQiC,IAAI,WAAanD,EAAKX,OAAS,uBAAyB6G,EAAO,cAAgBoB,GAEzFtB,GAAG8B,UAAU5B,EAAMlG,GAAOsH,SAAUA,IACpCjH,IAAiBC,QAAQ,sBAAuB,UAAW4F,EAAMS,KA3FrD,EA+FdoB,gBAAkB,SAAC7B,GACjBF,GAAGgC,MAAM9B,GACT7F,IAAiBC,QAAQ,yBAA0B,UAAW4F,KAjGlD,EAqGd2B,0BAA4B,SAAC3B,GAG3B,IAAK,GAFD+B,GAAe/B,EAAKwB,MAAM,KAAKC,MAAM,GACrCO,EAAc,SACT7K,EAAI,EAAGA,EAAI4K,EAAa5I,OAAQhC,IAAK,CAC5C6K,GAAe,IAAMD,EAAa5K,EAClC,KACE2I,GAAGgC,MAAME,GACT,MAAMV,OA5GE,EAgHdW,gBAAkB,SAACjC,GACjB,EAAKkC,mCAAmClC,GACxCF,GAAGqC,MAAMnC,GACT7F,IAAiBC,QAAQ,yBAA0B,UAAW4F,KAnHlD,EAwHdoC,WAAa,SAACpC,GACZF,GAAGuC,OAAOrC,GACV7F,IAAiBC,QAAQ,oBAAqB,UAAW4F,KA1H7C,EA+HdsC,wBAA0B,SAACC,GACb7C,EACNwC,mCAAmCK,IAjI7B,EA4JdC,aAAe,SAAC/B,GACd5D,aAAa,MAAO,2BACpBiD,GAAG2C,QAAO,EAAM,SAASC,GACjBA,GACA1H,QAAQwD,MAAM,gDAElBrE,IAAiBC,QAAQ,uBAAwB,UAAWqG,IAC5D3F,WAAW,MAAO,4BAnKV,EAuKd6H,aAAe,SAAClC,GACd,GAAI,EAAKmC,SAEP,WADA,GAAKC,WAAWpH,KAAKgF,EAGvB5D,cAAa,IAAK,kBAClB,IAAI6C,GAAQA,CACZ,GAAKkD,UAAW,EAChB9C,GAAG2C,QAAO,EAAO,SAASC,GACxB5H,WAAW,IAAK,iBAChBX,IAAiBC,QAAQ,uBAAwB,UAAWqG,IAC5Df,EAAMkD,UAAW,EACblD,EAAMmD,WAAW1J,OAAS,GAC5BuG,EAAMiD,aAAajD,EAAMmD,WAAWzH,YApL5B,EAyLd0H,qBAAuB,SAACP,GACV,EAAKQ,oBAAoBR,GAC/BpF,QAAQ,SAAS6F,GACrBhI,QAAQiC,IAAI+F,MA5LF,EAgMdD,oBAAsB,SAACR,GAGrB,IAAK,GAFDU,MACAtC,EAASb,GAAGoD,QAAQX,GACfpL,EAAI,EAAGA,EAAIwJ,EAAOxH,SAAUhC,EACrC,CACE,GAAI6L,GAAOrC,EAAOxJ,EAClB,IAAa,MAAT6L,GAAyB,OAATA,EAApB,CACA,GAAIhD,GAAQuC,EAAO,IAAMS,EACrBG,EAAOrD,GAAGsD,KAAKpD,GAAMmD,IACrBrD,IAAGuD,MAAMF,GACXF,EAAQA,EAAMK,OAAO,EAAKP,oBAAoB/C,IAE9CiD,EAAMxH,KAAKuE,IAGf,MAAOiD,IA/MK,EAkNdM,yBAA2B,WACzBvI,QAAQiC,IAAI,wCACZ,IAAIyC,GAAQA,CACZ,GAAKQ,uBAAwB,EAI7BsD,YAAY,WAAY9D,EAAM+D,qBAAwB,MAzN1C,EA4NdA,kBAAoB,WAElB,EAAKrD,eAAejD,QAAQ,SAAS6C,GAEnC7F,IAAiBC,QAAQ,4BAA6B,UAAW4F,MAEnE,EAAKI,eAAesD,SAlOR,EAqOdC,kBAAoB,SAAC3D,GAGnB,OAAO,GAxOK,EA2OdG,qBAAuB,SAACH,GACtB,MAAIA,KAAS,EAAK4D,kBA1OlB,EAAKC,SAFO,ENiqBd,MA9PA7E,GAAUQ,EAAYsE,GAiNtB/K,EAAayG,IACXlG,IAAK,SACL9B,MAAO,WMhnBPwD,QAAQiC,IAAI,uBAEZvD,KAAKkK,iBAAmB,qBAExBlK,KAAKwG,uBAAwB,EAC7BxG,KAAK0G,eAAiB,GAAI2D,KAC1BrK,KAAK+F,0BAEL/F,KAAKmJ,cACLnJ,KAAKkJ,UAAW,KN0nBhBtJ,IAAK,qCACL9B,MAAO,SMrgB0B+K,GAGjC,IAAK,GAFD7C,GAAQhG,KACRiH,EAASb,GAAGoD,QAAQX,GACfpL,EAAI,EAAGA,EAAIwJ,EAAOxH,SAAUhC,EACrC,CACE,GAAI6L,GAAOrC,EAAOxJ,EAClB,IAAa,MAAT6L,GAAyB,OAATA,EAApB,CACA,GAAIhD,GAAQuC,EAAO,IAAMS,EAErBG,EAAOrD,GAAGsD,KAAKpD,GAAMmD,IACrBrD,IAAGuD,MAAMF,IACXzD,EAAMwC,mCAAmClC,GACzCF,GAAGqC,MAAMnC,IAELN,EAAMiE,kBAAkB3D,GAC1BF,GAAGuC,OAAOrC,GAEVhF,QAAQiC,IAAI,yBAA2B+C,SN2gBxCR,GMnqB+B/F,IAAnB+F,QN0qBf,SAAUtI,EAAQwB,EAAqB5B,GAE7C,YAGA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS+F,GAA2BC,EAAMzH,GAAQ,IAAKyH,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO1H,GAAyB,gBAATA,IAAqC,kBAATA,GAA8ByH,EAAPzH,EAElO,QAAS2H,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIpG,WAAU,iEAAoEoG,GAAeD,GAAS3G,UAAYT,OAAOsH,OAAOD,GAAcA,EAAW5G,WAAa0D,aAAexE,MAAOyH,EAAUjH,YAAY,EAAOqB,UAAU,EAAMtB,cAAc,KAAemH,IAAYrH,OAAOuH,eAAiBvH,OAAOuH,eAAeH,EAAUC,GAAcD,EAASI,UAAYH,GAN5c,GAAII,GAAsDxI,EAAoB,GAC1EkN,EAAoDlN,EAAoB,GOlrB5EmN,E,YACnB,aAAc,oFAMdC,mBAAqB,SAAChJ,GAGpB,IAFA,EAAKA,gBAAkBA,EAEjB,EAAKN,MAAMzB,OAAS,GAAG,CAC3B,GAAMgC,GAAa,EAAKP,MAAMoC,SAC9B,GAAKmH,SAASjK,MAAd,EAA0BiB,KAXhB,EAgBdgJ,SAAW,SAACrK,GACL,EAAKoB,gBAGNI,YACI,EAAKJ,gBACLpB,EAAKG,OACgB,gBAAdH,GAAKA,KAAoByB,KAAKC,UAAU1B,EAAKA,MAAQA,EAAKA,MALvE,EAAKc,MAAMa,MAAMxB,OAAQH,KAhB3B,EAAKc,SACL,EAAKyB,oBAAsB,GAAI1B,KAHnB,EP0tBd,MA9BAqE,GAAUiF,EAAkBH,GA8BrBG,GO3tBqCxK,IAAzBwK,QPkuBf,SAAU/M,EAAQwB,EAAqB5B,GAE7C,YAIA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS+F,GAA2BC,EAAMzH,GAAQ,IAAKyH,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO1H,GAAyB,gBAATA,IAAqC,kBAATA,GAA8ByH,EAAPzH,EAElO,QAAS2H,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIpG,WAAU,iEAAoEoG,GAAeD,GAAS3G,UAAYT,OAAOsH,OAAOD,GAAcA,EAAW5G,WAAa0D,aAAexE,MAAOyH,EAAUjH,YAAY,EAAOqB,UAAU,EAAMtB,cAAc,KAAemH,IAAYrH,OAAOuH,eAAiBvH,OAAOuH,eAAeH,EAAUC,GAAcD,EAASI,UAAYH,GAP5c,GAAII,GAAsDxI,EAAoB,GAC1EkN,EAAoDlN,EAAoB,GACxEsN,EAAiDtN,EAAoB,GQtuBzEuN,E,YACnB,aAAc,oFAKdC,SAAW,SAACxK,GACV,GAAIyK,GAAa,GAAIC,WACrBD,GAAWE,OAAU,SAACC,GAClB,GAAMC,GAAa,GAAIC,WAAUL,EAAW5D,OAC5Cb,IAAG8B,UAAU9H,EAAK+K,SAAUF,GAAYvD,SAAU,WAClDtB,GAAG2C,QAAO,EAAO,SAACjE,GACbA,EACDxD,QAAQiC,IAAIuB,IAEZ,EAAKnC,oBAAoBhB,UAAU,+BAAgCvB,EAAKgL,SACxE3K,IAAiBC,QAAQ,WAAY,UAAWN,EAAK+K,eAI7DN,EAAWQ,kBAAkBjL,EAAKkL,WAjBlC,EAAK3I,oBAAsB,GAAI1B,KAFnB,ER6wBd,MA5BAqE,GAAUqF,EAAqBP,GA4BxBO,GQ9wBwC5K,IAA5B4K,QRqxBf,SAAUnN,EAAQwB,EAAqB5B,GAE7C,YAEA,SAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAAS+F,GAA2BC,EAAMzH,GAAQ,IAAKyH,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO1H,GAAyB,gBAATA,IAAqC,kBAATA,GAA8ByH,EAAPzH,EAElO,QAAS2H,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIpG,WAAU,iEAAoEoG,GAAeD,GAAS3G,UAAYT,OAAOsH,OAAOD,GAAcA,EAAW5G,WAAa0D,aAAexE,MAAOyH,EAAUjH,YAAY,EAAOqB,UAAU,EAAMtB,cAAc,KAAemH,IAAYrH,OAAOuH,eAAiBvH,OAAOuH,eAAeH,EAAUC,GAAcD,EAASI,UAAYH,GAL5c,GAAII,GAAsDxI,EAAoB,GS1xB9EmO,E,YTsyBjB,QAASA,KACL,GAAIC,GAEAC,EAAOzF,EAAO0F,CAElBzM,GAAgBe,KAAMuL,EAEtB,KAAK,GAAII,GAAOC,UAAUnM,OAAQU,EAAOkD,MAAMsI,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IACzE1L,EAAK0L,GAAQD,UAAUC,EAG3B,OAAeJ,GAASzF,EAAQb,EAA2BnF,MAAOwL,EAAOD,EAAc5F,WAAaxH,OAAO2N,eAAeP,IAAgB5N,KAAK6C,MAAMgL,GAAOxL,MAAM4J,OAAOzJ,KAAiB6F,ES/yBhM+F,OAAS,SAAC3L,GACR,GAEI4L,GAAc9I,OAAO+I,SAASC,eAFV,UAGxB,KAAKF,EAAa,CACd,GAAMG,GAAWjJ,OAAO+I,SAASG,qBAAqB,SAC9B,KAApBD,EAAS1M,OACTuM,EAAcG,EAAS,GAEzB7K,QAAQ+K,KAAK,SAAWF,EAAS1M,OAAS,6DAI5CuM,GACAA,EAAYM,MAAQlM,EAAKkM,MACzBN,EAAYO,OAASnM,EAAKmM,QAE1BjL,QAAQwD,MAAM,2ET8xBP4G,E,SAsBX,MAnCApG,GAAUiG,EAAenB,GAmClBmB,GSv0BgCxL,IAAtBwL,QT60Bb,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEF,SAAU/N,EAAQwB,EAAqB5B,GAE7C,YU/1BA,6FAKMoP,EAAW,GAAIjK,KAASjB,QAAS4B,OAEvCsJ,GACGC,aACAC,KAAM,WACLF,EAASG,eAAe,SAAU,GAAIpB,MACtCiB,EAASG,eAAe,sBAAuB,GAAIhC,MACnD6B,EAASG,eAAe,aAAc,GAAI7G,MAC1C0G,EAASG,eAAe,mBAAoB,GAAIpC","file":"unity.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 28);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseModule = function () {\n  function BaseModule() {\n    _classCallCheck(this, BaseModule);\n  }\n\n  _createClass(BaseModule, [{\n    key: \"getPublicFunctions\",\n    value: function getPublicFunctions() {\n      return Object.keys(this);\n    }\n  }, {\n    key: \"handle\",\n    value: function handle(message) {\n      var args = message.data.map(function (arg) {\n        return arg;\n      });\n      return this[message.method].apply(null, args);\n    }\n  }]);\n\n  return BaseModule;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BaseModule);\n\n/***/ }),\n/* 1 */,\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar instance = null;\n\nvar MessageForwarder = function () {\n  function MessageForwarder() {\n    _classCallCheck(this, MessageForwarder);\n\n    if (!instance) {\n      instance = this;\n    }\n    return instance;\n  }\n\n  _createClass(MessageForwarder, [{\n    key: 'handle',\n    value: function handle() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      MessageForwarder.forward(args.target, args.method, args.data);\n    }\n  }], [{\n    key: 'setAppWindow',\n    value: function setAppWindow(appWindow) {\n      instance.appWindow = appWindow;\n    }\n  }, {\n    key: 'setAppOrigin',\n    value: function setAppOrigin(appOrigin) {\n      instance.appOrigin = appOrigin;\n    }\n  }, {\n    key: 'getAppWindow',\n    value: function getAppWindow() {\n      return instance.appWindow;\n    }\n  }, {\n    key: 'getAppOrigin',\n    value: function getAppOrigin() {\n      return instance.appOrigin;\n    }\n  }, {\n    key: 'forward',\n    value: function forward(method, target, data) {\n      if (MessageForwarder.getAppOrigin() && MessageForwarder.getAppWindow()) {\n        MessageForwarder.getAppWindow().postMessage({\n          sender: 'unity',\n          target: target,\n          method: method,\n          data: data\n        }, MessageForwarder.getAppOrigin());\n      }\n    }\n  }]);\n\n  return MessageForwarder;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MessageForwarder);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* global SendMessage */\nvar instance = null;\n\nvar UnityMessageHandler = function () {\n  function UnityMessageHandler() {\n    _classCallCheck(this, UnityMessageHandler);\n\n    if (instance === null) {\n      instance = this;\n      this.queue = [];\n    }\n\n    return instance;\n  }\n\n  _createClass(UnityMessageHandler, [{\n    key: \"setUnityGameInstance\",\n    value: function setUnityGameInstance(unityInstance) {\n      if (unityInstance) {\n        profileEnd(\"SetUnityGameInstance\", \"Unity game instance received\");\n        instance.unityGameInstance = unityInstance;\n      } else {\n        console.warn('UnityMessageHandler.setUnityGameInstance got undefined instance');\n      }\n    }\n  }, {\n    key: \"setUnityObjectName\",\n    value: function setUnityObjectName(unityObjectName) {\n      profileEnd(\"SetUnityObjectName\", \"Unity object name '\" + unityObjectName + \"' received\");\n      instance.unityObjectName = unityObjectName;\n\n      while (this.queue.length > 0) {\n        var queuedCall = this.queue.shift();\n        this.callUnity.apply(this, queuedCall);\n      }\n    }\n  }, {\n    key: \"callUnity\",\n    value: function callUnity(method, data) {\n      if (!instance.unityObjectName) {\n        // Unity is not ready to receive messages\n        this.queue.push([method, data]);\n      } else {\n        SendMessage(instance.unityObjectName, method, typeof data !== 'string' ? JSON.stringify(data) : data);\n      }\n    }\n  }]);\n\n  return UnityMessageHandler;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (UnityMessageHandler);\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__UnityMessageHandler__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MessageForwarder__ = __webpack_require__(2);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar UnityApp = function () {\n  _createClass(UnityApp, [{\n    key: 'addProfilingUtils',\n    value: function addProfilingUtils() {\n      window.profileBegin = function (tag) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        Array.prototype.unshift.call(args, \"<A-\" + tag + \"> \");\n        console.log.apply(console, args);\n      };\n      window.profileEnd = function (tag) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        Array.prototype.unshift.call(args, \"<B-\" + tag + \"> \");\n        console.log.apply(console, args);\n      };\n    }\n  }]);\n\n  function UnityApp($logger, $window) {\n    var _this = this;\n\n    _classCallCheck(this, UnityApp);\n\n    this.addProfilingUtils();\n\n    this.unityMessageHandler = new __WEBPACK_IMPORTED_MODULE_0__UnityMessageHandler__[\"a\" /* default */]();\n    this.messageForwarder = new __WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */]();\n\n    this.$logger = $logger;\n    this.$window = $window;\n\n    this.$window.addEventListener('message', function ($event) {\n      _this.receiveMessage.call(_this, $event);\n    });\n\n    // External API for Unity. Is built dynamically.\n    this.$window.unity = {\n      'Setup': this.unityMessageHandler\n    };\n\n    // Internal listeners\n    this.listeners = {};\n  }\n\n  _createClass(UnityApp, [{\n    key: 'attachToGlobalUnityFunction',\n    value: function attachToGlobalUnityFunction(data) {\n      var _this2 = this;\n\n      data.methods.forEach(function (method) {\n        if (!_this2.$window.unity[data.name]) {\n          _this2.$window.unity[data.name] = {};\n        }\n\n        _this2.$window.unity[data.name][method] = function () {\n          for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          __WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */].forward(method, data.name, args);\n        };\n      });\n\n      this.$logger.log('Registered ' + data.name);\n    }\n  }, {\n    key: 'initialize',\n    value: function initialize() {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        _this3.$logger.debug('Initialize');\n        resolve();\n      });\n    }\n  }, {\n    key: 'attachListener',\n    value: function attachListener(listenerName, listenerInstance) {\n      this.listeners[listenerName] = listenerInstance;\n    }\n  }, {\n    key: 'receiveMessage',\n    value: function receiveMessage(event) {\n      if (!__WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */].getAppWindow() || !__WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */].getAppOrigin()) {\n        __WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */].setAppWindow(event.source);\n        __WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */].setAppOrigin(event.origin);\n\n        this.$logger.log('Established connection with app window');\n        return;\n      }\n\n      if (event.data.type === 'register') {\n        this.attachToGlobalUnityFunction(event.data);\n        return;\n      }\n\n      if (event.data.target === 'unity') {\n        this.unityMessageHandler.callUnity(event.data.method, event.data.data);\n        return;\n      }\n\n      if (event.data.target === 'sendUnityData') {\n        this.sendDataToUnity(event.data.data, event.data.transferID, event.data.metadata, event.data.unityCallback);\n        return;\n      }\n\n      if (event.data.target === 'requestUnityData') {\n        __WEBPACK_IMPORTED_MODULE_1__MessageForwarder__[\"a\" /* default */].forward(event.data.callbackName, event.data.sender, [event.data.metadata, window._transferToJS[event.data.transferID]]);\n\n        // Free memory, this entry is stored by DataTransfer.jslib from within unity.\n        delete window._transferToJS[event.data.transferID];\n        return;\n      }\n\n      // Otherwise, try the listeners\n      var target = this.listeners[event.data.target];\n      var targetNameAndMethod = event.data.target + '.' + event.data.method + '(' + JSON.stringify(event.data.data) + ')';\n      try {\n        if (target && target.handle) {\n          target.handle(event.data);\n        } else {\n          this.$logger.warn('UnityApp - receiveMessage - No listener found for \"' + event.data.target + '\" in this.listeners: ', this.listeners);\n        }\n      } catch (error) {\n        this.$logger.error('UnityApp - receiveMessage - listener handling for ' + targetNameAndMethod + ' failed! Event: ' + JSON.stringify(event.data) + ' ==> Error [ ' + (error.message ? 'message: ' + error.message + ', ' : '') + (error.stack ? 'Stack: ' + error.stack : '') + ' ]');\n      }\n    }\n  }, {\n    key: 'sendDataToUnity',\n    value: function sendDataToUnity(data, metadata, transferID, unityCallback) {\n      console.log(metadata.name + \" \" + metadata.len + \" \" + (typeof data === 'undefined' ? 'undefined' : _typeof(data)));\n\n      var w = this.$window;\n      w._transferToUnity = w._transferToUnity ? w._transferToUnity : {};\n      w._transferToUnity[transferID] = data;\n      this.unityMessageHandler.callUnity(unityCallback, metadata);\n    }\n  }]);\n\n  return UnityApp;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (UnityApp);\n\n/***/ }),\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_components_BaseModule__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n// Raw IO tools for SyncFS to use when writing to IndexDB. Must be loaded in unity.js.\n// These tools send back notifications on completion to SyncFS, which in turn decides if unity needs\n// to be notified.\n\nvar SyncFS_IDB = function (_BaseModule) {\n  _inherits(SyncFS_IDB, _BaseModule);\n\n  function SyncFS_IDB() {\n    _classCallCheck(this, SyncFS_IDB);\n\n    var _this2 = _possibleConstructorReturn(this, (SyncFS_IDB.__proto__ || Object.getPrototypeOf(SyncFS_IDB)).call(this));\n\n    _this2._attachTrackingDelegate = function () {\n      var _this = _this2;\n\n      // wait until FS is initialized\n      if (!_this2.globalExists('FS')) {\n        // console.log(\"FS is still undefined\");\n        setTimeout(_this2._attachTrackingDelegate, 100);\n        return;\n      }\n\n      var origOnWriteToFile = FS.trackingDelegate['onWriteToFile'];\n      console.log(\"origOnWriteToFile: \" + origOnWriteToFile);\n      FS.trackingDelegate['onWriteToFile'] = function (path) {\n        //console.log(`FS/onWriteToFile: ${path}`);\n        if (origOnWriteToFile !== undefined) {\n          origOnWriteToFile(path);\n        }\n        if (_this._trackingFilesChanges && _this._shouldAutoTrackFile(path)) {\n          if (!_this._modifiedFiles.has(path)) {\n            _this._modifiedFiles.add(path);\n          }\n        }\n      };\n\n      console.log(\"Attached tracking delegate\");\n    };\n\n    _this2.globalExists = function (nameOfVariable) {\n      return nameOfVariable in window;\n    };\n\n    _this2.readRawFile = function (path, context) {\n      var result = _this2._readFile(path, 'binary');\n      var buffer;\n      if (result) {\n        buffer = result.buffer;\n      }\n      __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnReadComplete\", \"SyncFS\", [path, buffer, context]);\n    };\n\n    _this2.writeRawFile = function (path, arrayBuffer, context) {\n      _this2._writeFile(path, 'binary', new Uint8Array(arrayBuffer), context);\n    };\n\n    _this2.readTextFile = function (path, context) {\n      profileBegin(\"R\", \"IDB Read file: \" + path);\n      var result = _this2._readFile(path, 'utf8');\n      profileEnd(\"R\", \"IDB Read complete\");\n      __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnReadComplete\", \"SyncFS\", [path, result, context]);\n    };\n\n    _this2.writeTextFile = function (path, contents, context) {\n      _this2._writeFile(path, 'utf8', contents, context);\n    };\n\n    _this2._readFile = function (path, encoding) {\n      var result;\n      try {\n        result = FS.readFile(path, { encoding: encoding });\n      } catch (e) {\n        console.log(\"Failed to read file \" + path + \" using encoding: \" + encoding + \", error: \" + JSON.stringify(e));\n      }\n      return result;\n    };\n\n    _this2._writeFile = function (path, encoding, data, context) {\n      // remove file name from the path\n      var fileDir = path.split(\"/\").slice(0, -1).join(\"/\");\n      _this2._createDirectoryRecursive(fileDir);\n      if (data) {\n        console.log('Writing ' + data.length + ' bytes to file path ' + path + ' encoding: ' + encoding);\n      }\n      FS.writeFile(path, data, { encoding: encoding });\n      __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnWriteComplete\", \"SyncFS\", [path, context]);\n      // NEEDS FLUSH\n    };\n\n    _this2.createDirectory = function (path) {\n      FS.mkdir(path);\n      __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnDirectoryCreated\", \"SyncFS\", [path]);\n      // NEEDS FLUSH\n    };\n\n    _this2._createDirectoryRecursive = function (path) {\n      var pathElements = path.split(\"/\").slice(2);\n      var currentPath = \"/idbfs\";\n      for (var i = 0; i < pathElements.length; i++) {\n        currentPath += \"/\" + pathElements[i];\n        try {\n          FS.mkdir(currentPath);\n        } catch (e) {}\n      }\n    };\n\n    _this2.removeDirectory = function (path) {\n      _this2.removeDirectoryContentsRecursively(path);\n      FS.rmdir(path);\n      __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnDirectoryRemoved\", \"SyncFS\", [path]);\n      // NEEDS FLUSH\n    };\n\n    _this2.removeFile = function (path) {\n      FS.unlink(path);\n      __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnFileRemoved\", \"SyncFS\", [path]);\n      // NEEDS FLUSH\n    };\n\n    _this2.removeDirectoryContents = function (root) {\n      var _this = _this2;\n      _this.removeDirectoryContentsRecursively(root);\n      // NEEDS FLUSH\n    };\n\n    _this2.reverseFlush = function (context) {\n      profileBegin(\"Rev\", \"IDB start reverse flush\");\n      FS.syncfs(true, function (err) {\n        if (err) {\n          console.error(\"SyncFS_IDB - reverseFlush - failed FS.syncfs\");\n        }\n        __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnChangesFlushed\", \"SyncFS\", [context]);\n        profileEnd(\"Rev\", \"IDB end reverse flush\");\n      });\n    };\n\n    _this2.flushChanges = function (context) {\n      if (_this2.flushing) {\n        _this2.flushQueue.push(context);\n        return;\n      }\n      profileBegin(\"F\", \"IDB start flush\");\n      var _this = _this2;\n      _this2.flushing = true;\n      FS.syncfs(false, function (err) {\n        profileEnd(\"F\", \"IDB end flush\");\n        __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnChangesFlushed\", \"SyncFS\", [context]);\n        _this.flushing = false;\n        if (_this.flushQueue.length > 0) {\n          _this.flushChanges(_this.flushQueue.shift());\n        }\n      });\n    };\n\n    _this2.printFolderStructure = function (root) {\n      var files = _this2.listFolderStructure(root);\n      files.forEach(function (file) {\n        console.log(file);\n      });\n    };\n\n    _this2.listFolderStructure = function (root) {\n      var files = [];\n      var result = FS.readdir(root);\n      for (var i = 0; i < result.length; ++i) {\n        var file = result[i];\n        if (file === \".\" || file === \"..\") continue;\n        var path = root + \"/\" + file;\n        var mode = FS.stat(path).mode;\n        if (FS.isDir(mode)) {\n          files = files.concat(_this2.listFolderStructure(path));\n        } else {\n          files.push(path);\n        }\n      }\n      return files;\n    };\n\n    _this2.startTrackingFileChanges = function () {\n      console.log(\"SyncFS_IDB.startTrackingFileChanges()\");\n      var _this = _this2;\n      _this2._trackingFilesChanges = true;\n      // Trigger synchronization of changed files only every now and then\n      // as the 'onWriteToFile' delegate might be called multiple times in a row\n      // for the same file (multiple chunks written in succession).\n      setInterval(function () {\n        _this._syncChangedFiles();\n      }, 1000);\n    };\n\n    _this2._syncChangedFiles = function () {\n      var _this = _this2;\n      _this2._modifiedFiles.forEach(function (path) {\n        //console.log(\"SyncFS_IDB._syncChangedFiles: \" + path);\n        __WEBPACK_IMPORTED_MODULE_1_MessageForwarder__[\"a\" /* default */].forward(\"IDB_OnTrackedFileModified\", \"SyncFS\", [path]);\n      });\n      _this2._modifiedFiles.clear();\n    };\n\n    _this2._shouldRemoveFile = function (path) {\n      // if (path === this._playerPrefsPath)\n      //   return false;\n      return true;\n    };\n\n    _this2._shouldAutoTrackFile = function (path) {\n      if (path === _this2._playerPrefsPath) return true;\n      return false;\n    };\n\n    _this2._setup();\n    return _this2;\n  }\n\n  _createClass(SyncFS_IDB, [{\n    key: '_setup',\n    value: function _setup() {\n      console.log(\"SyncFS_IDB._setup()\");\n\n      this._playerPrefsPath = \"/idbfs/PlayerPrefs\";\n\n      this._trackingFilesChanges = false;\n      this._modifiedFiles = new Set();\n      this._attachTrackingDelegate();\n\n      this.flushQueue = [];\n      this.flushing = false;\n    }\n\n    // NOTE(Catalin): The file only gets physically removed after all processes stop using it.\n\n\n    // Call with \"/idbfs\" to wipe all user data.\n\n  }, {\n    key: 'removeDirectoryContentsRecursively',\n    value: function removeDirectoryContentsRecursively(root) {\n      var _this = this;\n      var result = FS.readdir(root);\n      for (var i = 0; i < result.length; ++i) {\n        var file = result[i];\n        if (file === \".\" || file === \"..\") continue;\n        var path = root + \"/\" + file;\n        //console.log(\"removing: \" + path);\n        var mode = FS.stat(path).mode;\n        if (FS.isDir(mode)) {\n          _this.removeDirectoryContentsRecursively(path);\n          FS.rmdir(path);\n        } else {\n          if (_this._shouldRemoveFile(path)) {\n            FS.unlink(path);\n          } else {\n            console.log(\"will NOT remove file: \" + path);\n          }\n        }\n      }\n    }\n  }]);\n\n  return SyncFS_IDB;\n}(__WEBPACK_IMPORTED_MODULE_0_components_BaseModule__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SyncFS_IDB);\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_components_BaseModule__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_UnityMessageHandler__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar BluetoothHandler = function (_BaseModule) {\n  _inherits(BluetoothHandler, _BaseModule);\n\n  function BluetoothHandler() {\n    _classCallCheck(this, BluetoothHandler);\n\n    var _this = _possibleConstructorReturn(this, (BluetoothHandler.__proto__ || Object.getPrototypeOf(BluetoothHandler)).call(this));\n\n    _this.setUnityObjectName = function (unityObjectName) {\n      _this.unityObjectName = unityObjectName;\n\n      while (_this.queue.length > 0) {\n        var queuedCall = _this.queue.unshift();\n        _this.sendData.apply(_this, queuedCall);\n      }\n    };\n\n    _this.sendData = function (data) {\n      if (!_this.unityObjectName) {\n        // Unity is not ready to receive messages\n        _this.queue.push([method, data]);\n      } else {\n        SendMessage(_this.unityObjectName, data.method, typeof data.data !== 'string' ? JSON.stringify(data.data) : data.data);\n      }\n    };\n\n    _this.queue = [];\n    _this.unityMessageHandler = new __WEBPACK_IMPORTED_MODULE_1_UnityMessageHandler__[\"a\" /* default */]();\n    return _this;\n  }\n\n  return BluetoothHandler;\n}(__WEBPACK_IMPORTED_MODULE_0_components_BaseModule__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BluetoothHandler);\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_components_BaseModule__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_UnityMessageHandler__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_MessageForwarder__ = __webpack_require__(2);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar EmscriptenFSHandler = function (_BaseModule) {\n  _inherits(EmscriptenFSHandler, _BaseModule);\n\n  function EmscriptenFSHandler() {\n    _classCallCheck(this, EmscriptenFSHandler);\n\n    var _this = _possibleConstructorReturn(this, (EmscriptenFSHandler.__proto__ || Object.getPrototypeOf(EmscriptenFSHandler)).call(this));\n\n    _this.saveFile = function (data) {\n      var fileReader = new FileReader();\n      fileReader.onload = function (progressEvent) {\n        var int8Array = new Int8Array(fileReader.result);\n        FS.writeFile(data.filePath, int8Array, { encoding: 'binary' });\n        FS.syncfs(false, function (error) {\n          if (error) {\n            console.log(error);\n          } else {\n            _this.unityMessageHandler.callUnity('OnRecieveMessageFromChromeOS', data.dataURL);\n            __WEBPACK_IMPORTED_MODULE_2_MessageForwarder__[\"a\" /* default */].forward(\"saveFile\", \"SyncFS\", [data.filePath]);\n          }\n        });\n      };\n      fileReader.readAsArrayBuffer(data.fileBlob);\n    };\n\n    _this.unityMessageHandler = new __WEBPACK_IMPORTED_MODULE_1_UnityMessageHandler__[\"a\" /* default */]();\n    return _this;\n  }\n\n  return EmscriptenFSHandler;\n}(__WEBPACK_IMPORTED_MODULE_0_components_BaseModule__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EmscriptenFSHandler);\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_components_BaseModule__ = __webpack_require__(0);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar WindowHandler = function (_BaseModule) {\n    _inherits(WindowHandler, _BaseModule);\n\n    function WindowHandler() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, WindowHandler);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = WindowHandler.__proto__ || Object.getPrototypeOf(WindowHandler)).call.apply(_ref, [this].concat(args))), _this), _this.resize = function (data) {\n            var canvasElementId = \"#canvas\"; // #canvas is created by auto generated UnityLoader.js\n\n            var unityCanvas = window.document.getElementById(canvasElementId);\n            if (!unityCanvas) {\n                var canvases = window.document.getElementsByTagName(\"canvas\");\n                if (canvases.length === 1) {\n                    unityCanvas = canvases[0];\n                } else {\n                    console.info(\"Found \" + canvases.length + \" <canvas> elements on page - none of them with id \" + canvasElementId);\n                }\n            }\n\n            if (unityCanvas) {\n                unityCanvas.width = data.width;\n                unityCanvas.height = data.height;\n            } else {\n                console.error(\"No unityCanvas found. Unable to set width and height data after resize\");\n            }\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    return WindowHandler;\n}(__WEBPACK_IMPORTED_MODULE_0_components_BaseModule__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (WindowHandler);\n\n/***/ }),\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__WindowHandler__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__EmscriptenFSHandler__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_components_SyncFS_IDB__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__BluetoothHandler__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_UnityApp__ = __webpack_require__(7);\n\n\n\n\n\nvar unityApp = new __WEBPACK_IMPORTED_MODULE_4_UnityApp__[\"a\" /* default */](console, window);\n\nunityApp.initialize().then(function () {\n  unityApp.attachListener('window', new __WEBPACK_IMPORTED_MODULE_0__WindowHandler__[\"a\" /* default */]());\n  unityApp.attachListener('emscriptenFSHandler', new __WEBPACK_IMPORTED_MODULE_1__EmscriptenFSHandler__[\"a\" /* default */]());\n  unityApp.attachListener('SyncFS_IDB', new __WEBPACK_IMPORTED_MODULE_2_components_SyncFS_IDB__[\"a\" /* default */]());\n  unityApp.attachListener('bluetoothHandler', new __WEBPACK_IMPORTED_MODULE_3__BluetoothHandler__[\"a\" /* default */]());\n});\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// unity.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 28);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c3b1f8227955d8cd9346","export default class BaseModule {\n\n  getPublicFunctions() {\n    return Object.keys(this);\n  }\n\n  handle(message) {\n    const args = message.data.map((arg) => {\n      return arg;\n    });\n    return this[message.method].apply(null, args);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/BaseModule.js","let instance = null;\n\nexport default class MessageForwarder {\n  constructor() {\n    if (!instance) {\n      instance = this;\n    }\n    return instance;\n  }\n\n  static setAppWindow(appWindow) {\n    instance.appWindow = appWindow;\n  }\n\n  static setAppOrigin(appOrigin) {\n    instance.appOrigin = appOrigin;\n  }\n\n  static getAppWindow() {\n    return instance.appWindow;\n  }\n\n  static getAppOrigin() {\n    return instance.appOrigin;\n  }\n\n  handle(...args) {\n    MessageForwarder.forward(args.target, args.method, args.data);\n  }\n\n  static forward(method, target, data) {\n    if (MessageForwarder.getAppOrigin() && MessageForwarder.getAppWindow()) {\n      MessageForwarder.getAppWindow().postMessage({\n        sender: 'unity',\n        target,\n        method,\n        data,\n      }, MessageForwarder.getAppOrigin());\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/MessageForwarder.js","/* global SendMessage */\nlet instance = null;\n\nexport default class UnityMessageHandler {\n\n  constructor() {\n    if (instance === null) {\n      instance = this;\n      this.queue = [];\n    }\n\n    return instance;\n  }\n\n  setUnityGameInstance(unityInstance) {\n    if (unityInstance) {\n        profileEnd(\"SetUnityGameInstance\", \"Unity game instance received\");\n        instance.unityGameInstance = unityInstance;\n    } else {\n        console.warn('UnityMessageHandler.setUnityGameInstance got undefined instance');\n    }\n  }\n\n  setUnityObjectName(unityObjectName) {\n    profileEnd(\"SetUnityObjectName\", \"Unity object name '\" + unityObjectName + \"' received\");\n    instance.unityObjectName = unityObjectName;\n\n    while(this.queue.length > 0) {\n      const queuedCall = this.queue.shift();\n      this.callUnity.apply(this, queuedCall);\n    }\n  }\n\n  callUnity(method, data) {\n    if (!instance.unityObjectName) { // Unity is not ready to receive messages\n      this.queue.push([method, data]);\n    } else {\n          SendMessage(\n              instance.unityObjectName,\n              method,\n              typeof data !== 'string' ? JSON.stringify(data) : data\n          );\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UnityMessageHandler.js","import UnityMessageHandler from './UnityMessageHandler';\nimport MessageForwarder from './MessageForwarder';\n\nexport default class UnityApp {\n  addProfilingUtils() {\n    window.profileBegin = function(tag, ...args) {\n      Array.prototype.unshift.call(args, \"<A-\"+tag+\"> \");\n      console.log.apply(console, args);\n    }\n    window.profileEnd = function(tag, ...args) {\n      Array.prototype.unshift.call(args, \"<B-\"+tag+\"> \");\n      console.log.apply(console, args);\n    }\n  }\n\n  constructor($logger, $window) {\n    this.addProfilingUtils();\n\n    this.unityMessageHandler = new UnityMessageHandler();\n    this.messageForwarder = new MessageForwarder();\n\n    this.$logger = $logger;\n    this.$window = $window;\n\n    this.$window.addEventListener('message', ($event) => {\n      this.receiveMessage.call(this, $event);\n    });\n\n    // External API for Unity. Is built dynamically.\n    this.$window.unity = {\n      'Setup': this.unityMessageHandler\n    };\n\n    // Internal listeners\n    this.listeners = {};\n  }\n\n  attachToGlobalUnityFunction(data) {\n    data.methods.forEach((method) => {\n      if (!this.$window.unity[data.name]) {\n        this.$window.unity[data.name] = {};\n      }\n\n      this.$window.unity[data.name][method] = (...args) => {\n        MessageForwarder.forward(method, data.name, args);\n      };\n    });\n\n    this.$logger.log(`Registered ${data.name}`);\n  }\n\n  initialize() {\n    return new Promise((resolve) => {\n      this.$logger.debug('Initialize');\n      resolve();\n    });\n  }\n\n  attachListener(listenerName, listenerInstance) {\n    this.listeners[listenerName] = listenerInstance;\n  }\n\n  receiveMessage(event) {\n    if (!MessageForwarder.getAppWindow() || !MessageForwarder.getAppOrigin()) {\n      MessageForwarder.setAppWindow(event.source);\n      MessageForwarder.setAppOrigin(event.origin);\n\n      this.$logger.log('Established connection with app window');\n      return;\n    }\n\n    if (event.data.type === 'register') {\n      this.attachToGlobalUnityFunction(event.data);\n      return;\n    }\n\n    if (event.data.target === 'unity') {\n      this.unityMessageHandler.callUnity(event.data.method, event.data.data);\n      return;\n    }\n\n    if (event.data.target === 'sendUnityData') {\n      this.sendDataToUnity(event.data.data, event.data.transferID, event.data.metadata, event.data.unityCallback);\n      return;\n    }\n\n    if (event.data.target === 'requestUnityData') {\n      MessageForwarder.forward(\n        event.data.callbackName,\n        event.data.sender,\n        [event.data.metadata, window._transferToJS[event.data.transferID]]);\n\n      // Free memory, this entry is stored by DataTransfer.jslib from within unity.\n      delete window._transferToJS[event.data.transferID];\n      return;\n    }\n\n    // Otherwise, try the listeners\n    const target = this.listeners[event.data.target];\n    const targetNameAndMethod = event.data.target + '.' + event.data.method + '(' + JSON.stringify(event.data.data) + ')';\n    try {\n        if (target && target.handle) {\n          target.handle(event.data);\n        } else {\n          this.$logger.warn('UnityApp - receiveMessage - No listener found for \"' + event.data.target + '\" in this.listeners: ', this.listeners);\n        }\n    } catch (error) {\n      this.$logger.error('UnityApp - receiveMessage - listener handling for ' + targetNameAndMethod + ' failed! Event: ' + JSON.stringify(event.data) + ' ==> Error [ ' + (error.message ? 'message: ' + error.message + ', ' : '') + (error.stack ? 'Stack: ' + error.stack : '') + ' ]');\n    }\n  }\n\n  sendDataToUnity(data, metadata, transferID, unityCallback) {\n    console.log(metadata.name + \" \" + metadata.len + \" \" + typeof data);\n\n    var w = this.$window;\n    w._transferToUnity = w._transferToUnity ? w._transferToUnity : {};\n    w._transferToUnity[transferID] = data;\n    this.unityMessageHandler.callUnity(unityCallback, metadata);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UnityApp.js","import BaseModule from 'components/BaseModule';\nimport MessageForwarder from 'MessageForwarder';\n\n// Raw IO tools for SyncFS to use when writing to IndexDB. Must be loaded in unity.js.\n// These tools send back notifications on completion to SyncFS, which in turn decides if unity needs\n// to be notified.\n\nexport default class SyncFS_IDB extends BaseModule {\n\n  constructor() {\n    super();\n    this._setup();\n  }\n\n  _setup() {\n    console.log(\"SyncFS_IDB._setup()\");\n\n    this._playerPrefsPath = \"/idbfs/PlayerPrefs\";\n\n    this._trackingFilesChanges = false;\n    this._modifiedFiles = new Set();\n    this._attachTrackingDelegate();\n\n    this.flushQueue = [];\n    this.flushing = false;\n  }\n\n  _attachTrackingDelegate = () => {\n    var _this = this;\n\n    // wait until FS is initialized\n    if (!this.globalExists('FS')) {\n      // console.log(\"FS is still undefined\");\n      setTimeout(this._attachTrackingDelegate, 100);\n      return;\n    }\n\n    var origOnWriteToFile = FS.trackingDelegate['onWriteToFile'];\n    console.log(\"origOnWriteToFile: \" + origOnWriteToFile);\n    FS.trackingDelegate['onWriteToFile'] = function (path) {\n      //console.log(`FS/onWriteToFile: ${path}`);\n      if (origOnWriteToFile !== undefined) {\n        origOnWriteToFile(path);\n      }\n      if (_this._trackingFilesChanges && _this._shouldAutoTrackFile(path)) {\n        if (!_this._modifiedFiles.has(path)) {\n          _this._modifiedFiles.add(path);\n        }\n      }\n    };\n\n    console.log(\"Attached tracking delegate\");\n  };\n\n  globalExists = (nameOfVariable) => {\n      return nameOfVariable in window\n  };\n\n  readRawFile = (path, context) => {\n    var result = this._readFile(path, 'binary');\n    var buffer;\n    if (result) {\n      buffer = result.buffer;\n    }\n    MessageForwarder.forward(\"IDB_OnReadComplete\", \"SyncFS\", [path, buffer, context]);\n  };\n\n  writeRawFile = (path, arrayBuffer, context) => {\n    this._writeFile(path, 'binary', new Uint8Array(arrayBuffer), context);\n  };\n\n  readTextFile = (path, context) => {\n    profileBegin(\"R\", \"IDB Read file: \"+path);\n    var result = this._readFile(path, 'utf8');\n    profileEnd(\"R\", \"IDB Read complete\");\n    MessageForwarder.forward(\"IDB_OnReadComplete\", \"SyncFS\", [path, result, context]);\n  };\n\n  writeTextFile = (path, contents, context) => {\n    this._writeFile(path, 'utf8', contents, context);\n  };\n\n  _readFile = (path, encoding) => {\n    var result;\n    try {\n      result = FS.readFile(path, {encoding: encoding});\n    } catch (e) {\n      console.log(\"Failed to read file \" + path + \" using encoding: \" + encoding + \", error: \" + JSON.stringify(e));\n    }\n    return result;\n  };\n\n  _writeFile = (path, encoding, data, context) => {\n    // remove file name from the path\n    var fileDir = path.split(\"/\").slice(0, -1).join(\"/\");\n    this._createDirectoryRecursive(fileDir);\n    if (data) {\n      console.log('Writing ' + data.length + ' bytes to file path ' + path + ' encoding: ' + encoding);\n    }\n    FS.writeFile(path, data, {encoding: encoding});\n    MessageForwarder.forward(\"IDB_OnWriteComplete\", \"SyncFS\", [path, context]);\n    // NEEDS FLUSH\n  };\n\n  createDirectory = (path) => {\n    FS.mkdir(path);\n    MessageForwarder.forward(\"IDB_OnDirectoryCreated\", \"SyncFS\", [path]);\n    // NEEDS FLUSH\n  };\n\n  _createDirectoryRecursive = (path) => {\n    var pathElements = path.split(\"/\").slice(2);\n    var currentPath = \"/idbfs\";\n    for (var i = 0; i < pathElements.length; i++) {\n      currentPath += \"/\" + pathElements[i];\n      try {\n        FS.mkdir(currentPath);\n      } catch(e) {}\n    }\n  };\n\n  removeDirectory = (path) => {\n    this.removeDirectoryContentsRecursively(path);\n    FS.rmdir(path);\n    MessageForwarder.forward(\"IDB_OnDirectoryRemoved\", \"SyncFS\", [path]);\n    // NEEDS FLUSH\n  };\n\n  // NOTE(Catalin): The file only gets physically removed after all processes stop using it.\n  removeFile = (path) => {\n    FS.unlink(path);\n    MessageForwarder.forward(\"IDB_OnFileRemoved\", \"SyncFS\", [path]);\n    // NEEDS FLUSH\n  };\n\n  // Call with \"/idbfs\" to wipe all user data.\n  removeDirectoryContents = (root) => {\n    var _this = this;\n    _this.removeDirectoryContentsRecursively(root);\n    // NEEDS FLUSH\n  };\n\n  removeDirectoryContentsRecursively(root) {\n    var _this = this;\n    var result = FS.readdir(root);\n    for (var i = 0; i < result.length; ++i)\n    {\n      var file = result[i];\n      if (file === \".\" || file === \"..\") continue;\n      var path = (root + \"/\" + file);\n      //console.log(\"removing: \" + path);\n      var mode = FS.stat(path).mode;\n      if (FS.isDir(mode)) {\n        _this.removeDirectoryContentsRecursively(path);\n        FS.rmdir(path);\n      } else {\n        if (_this._shouldRemoveFile(path)) {\n          FS.unlink(path);\n        } else {\n          console.log(\"will NOT remove file: \" + path);\n        }\n      }\n    }\n  }\n\n  reverseFlush = (context) => {\n    profileBegin(\"Rev\", \"IDB start reverse flush\");\n    FS.syncfs(true, function(err) {\n        if (err) {\n            console.error(\"SyncFS_IDB - reverseFlush - failed FS.syncfs\");\n        }\n        MessageForwarder.forward(\"IDB_OnChangesFlushed\", \"SyncFS\", [context]);\n        profileEnd(\"Rev\", \"IDB end reverse flush\");\n    });\n  };\n\n  flushChanges = (context) => {\n    if (this.flushing) {\n      this.flushQueue.push(context);\n      return;\n    }\n    profileBegin(\"F\", \"IDB start flush\");\n    var _this = this;\n    this.flushing = true;\n    FS.syncfs(false, function(err) {\n      profileEnd(\"F\", \"IDB end flush\");\n      MessageForwarder.forward(\"IDB_OnChangesFlushed\", \"SyncFS\", [context]);\n      _this.flushing = false;\n      if (_this.flushQueue.length > 0) {\n        _this.flushChanges(_this.flushQueue.shift());\n      }\n    });\n  };\n\n  printFolderStructure = (root) => {\n    var files = this.listFolderStructure(root);\n    files.forEach(function(file) {\n      console.log(file);\n    });\n  };\n\n  listFolderStructure = (root) => {\n    var files = [];\n    var result = FS.readdir(root);\n    for (var i = 0; i < result.length; ++i)\n    {\n      var file = result[i];\n      if (file === \".\" || file === \"..\") continue;\n      var path = (root + \"/\" + file);\n      var mode = FS.stat(path).mode;\n      if (FS.isDir(mode)) {\n        files = files.concat(this.listFolderStructure(path));\n      } else {\n        files.push(path);\n      }\n    }\n    return files;\n  };\n\n  startTrackingFileChanges = () => {\n    console.log(\"SyncFS_IDB.startTrackingFileChanges()\");\n    var _this = this;\n    this._trackingFilesChanges = true;\n    // Trigger synchronization of changed files only every now and then\n    // as the 'onWriteToFile' delegate might be called multiple times in a row\n    // for the same file (multiple chunks written in succession).\n    setInterval(function(){ _this._syncChangedFiles(); }, 1000);\n  };\n\n  _syncChangedFiles = () => {\n    var _this = this;\n    this._modifiedFiles.forEach(function(path) {\n      //console.log(\"SyncFS_IDB._syncChangedFiles: \" + path);\n      MessageForwarder.forward(\"IDB_OnTrackedFileModified\", \"SyncFS\", [path]);\n    });\n    this._modifiedFiles.clear();\n  };\n\n  _shouldRemoveFile = (path) => {\n    // if (path === this._playerPrefsPath)\n    //   return false;\n    return true;\n  };\n\n  _shouldAutoTrackFile = (path) => {\n    if (path === this._playerPrefsPath)\n      return true;\n    return false;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SyncFS_IDB.js","import BaseModule from 'components/BaseModule';\nimport UnityMessageHandler from 'UnityMessageHandler';\n\nexport default class BluetoothHandler extends BaseModule {\n  constructor() {\n    super();\n    this.queue = [];\n    this.unityMessageHandler = new UnityMessageHandler();\n  }\n  \n  setUnityObjectName = (unityObjectName) => {\n    this.unityObjectName = unityObjectName;\n\n    while(this.queue.length > 0) {\n      const queuedCall = this.queue.unshift();\n      this.sendData.apply(this, queuedCall);\n    }\n  };\n\n\n  sendData = (data) => {\n    if (!this.unityObjectName) { // Unity is not ready to receive messages\n      this.queue.push([method, data]);\n    } else {\n        SendMessage(\n            this.unityObjectName,\n            data.method,\n            typeof data.data !== 'string' ? JSON.stringify(data.data) : data.data\n        );\n    }\n  };\n  \n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ../chromeos_resources/src/BluetoothHandler.js","import BaseModule from 'components/BaseModule';\nimport UnityMessageHandler from 'UnityMessageHandler';\nimport MessageForwarder from 'MessageForwarder';\n\nexport default class EmscriptenFSHandler extends BaseModule {\n  constructor() {\n    super();\n    this.unityMessageHandler = new UnityMessageHandler();\n  }\n\n  saveFile = (data) => {\n    var fileReader = new FileReader();\n    fileReader.onload  = (progressEvent) => {\n        const int8Array  = new Int8Array(fileReader.result);\n        FS.writeFile(data.filePath, int8Array, {encoding: 'binary'});\n        FS.syncfs(false, (error) => {\n          if(error) {\n            console.log(error);\n          } else {\n            this.unityMessageHandler.callUnity('OnRecieveMessageFromChromeOS', data.dataURL);\n            MessageForwarder.forward(\"saveFile\", \"SyncFS\", [data.filePath]);\n          }\n        });\n    };\n    fileReader.readAsArrayBuffer(data.fileBlob);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../chromeos_resources/src/EmscriptenFSHandler.js","import BaseModule from 'components/BaseModule';\n\nexport default class WindowHandler extends BaseModule {\n\n  resize = (data) => {\n    const canvasElementId = \"#canvas\"; // #canvas is created by auto generated UnityLoader.js\n\n    let unityCanvas = window.document.getElementById(canvasElementId);\n    if (!unityCanvas) {\n        const canvases = window.document.getElementsByTagName(\"canvas\");\n        if (canvases.length === 1) {\n            unityCanvas = canvases[0];\n        } else {\n          console.info(\"Found \" + canvases.length + \" <canvas> elements on page - none of them with id \" + canvasElementId);\n        }\n    }\n\n    if (unityCanvas) {\n        unityCanvas.width = data.width;\n        unityCanvas.height = data.height;\n    } else {\n        console.error(\"No unityCanvas found. Unable to set width and height data after resize\");\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../chromeos_resources/src/WindowHandler.js","import WindowHandler from './WindowHandler';\nimport EmscriptenFSHandler from './EmscriptenFSHandler';\nimport SyncFS_IDB from 'components/SyncFS_IDB'\nimport BluetoothHandler from './BluetoothHandler';\nimport UnityApp from 'UnityApp';\nconst unityApp = new UnityApp(console, window);\n\nunityApp\n  .initialize()\n  .then( () => {\n    unityApp.attachListener('window', new WindowHandler());\n    unityApp.attachListener('emscriptenFSHandler', new EmscriptenFSHandler());\n    unityApp.attachListener('SyncFS_IDB', new SyncFS_IDB());\n    unityApp.attachListener('bluetoothHandler', new BluetoothHandler());\n  })\n\n\n\n// WEBPACK FOOTER //\n// ../chromeos_resources/src/unity.js"],"sourceRoot":""}