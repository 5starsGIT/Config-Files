!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("undefined"!=typeof exports)t();else{t(),e.unknown={}}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(){function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.apply(this,arguments)}const t=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",DEFAULT:"Default"});class n{constructor(){this.Σ0=function(e){return this.ROTR(2,e)^this.ROTR(13,e)^this.ROTR(22,e)},this.Σ1=function(e){return this.ROTR(6,e)^this.ROTR(11,e)^this.ROTR(25,e)},this.σ0=function(e){return this.ROTR(7,e)^this.ROTR(18,e)^e>>>3},this.σ1=function(e){return this.ROTR(17,e)^this.ROTR(19,e)^e>>>10},this.Ch=function(e,t,n){return e&t^~e&n},this.Maj=function(e,t,n){return e&t^e&n^t&n}}hash(e){e=unescape(encodeURIComponent(e));for(var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=(e+=String.fromCharCode(128)).length/4+2,r=Math.ceil(i/16),a=new Array(r),s=0;s<r;s++){a[s]=new Array(16);for(var o=0;o<16;o++)a[s][o]=e.charCodeAt(64*s+4*o)<<24|e.charCodeAt(64*s+4*o+1)<<16|e.charCodeAt(64*s+4*o+2)<<8|e.charCodeAt(64*s+4*o+3)}a[r-1][14]=8*(e.length-1)/Math.pow(2,32),a[r-1][14]=Math.floor(a[r-1][14]),a[r-1][15]=8*(e.length-1)&4294967295;var c,u,l,d,h,p,g,f,m=new Array(64);for(s=0;s<r;s++){for(var v=0;v<16;v++)m[v]=a[s][v];for(v=16;v<64;v++)m[v]=this.σ1(m[v-2])+m[v-7]+this.σ0(m[v-15])+m[v-16]&4294967295;c=n[0],u=n[1],l=n[2],d=n[3],h=n[4],p=n[5],g=n[6],f=n[7];for(v=0;v<64;v++){var _=f+this.Σ1(h)+this.Ch(h,p,g)+t[v]+m[v],y=this.Σ0(c)+this.Maj(c,u,l);f=g,g=p,p=h,h=d+_&4294967295,d=l,l=u,u=c,c=_+y&4294967295}n[0]=n[0]+c&4294967295,n[1]=n[1]+u&4294967295,n[2]=n[2]+l&4294967295,n[3]=n[3]+d&4294967295,n[4]=n[4]+h&4294967295,n[5]=n[5]+p&4294967295,n[6]=n[6]+g&4294967295,n[7]=n[7]+f&4294967295}return this.toHexStr(n[0])+this.toHexStr(n[1])+this.toHexStr(n[2])+this.toHexStr(n[3])+this.toHexStr(n[4])+this.toHexStr(n[5])+this.toHexStr(n[6])+this.toHexStr(n[7])}ROTR(e,t){return t>>>e|t<<32-e}toHexStr(e){for(var t="",n=7;n>=0;n--)t+=(e>>>4*n&15).toString(16);return t}}class i{constructor(e){const{applicationName:t="",analyticsTrackingCode:i=""}=e;if(t.length<0)throw"The application used when creating an Analytics instance is invalid.";if(!this._isAnalytics(i))throw"The analytics tracking code used when creating an Analytics instance is invalid.";this._applicationName=t,this._analyticsTrackingCode=i,this._analyticsEndpoint="https://www.google-analytics.com/collect",this.AnalyticsAttributes=Object.freeze({TRACKING_CODE:"tid",HIT_TYPE:"t",SCREEN_RESOLUTION:"sr",VIEW_PORT:"vp",APPLICATION_VERSION:"av",LIBRARY_VERSION:"_v",COLOR_DEPTH:"sd",LANGUAGE:"ul",APPLICATION_NAME:"an",PROTOCAL_VERSION:"v",USER_ID:"uid",CLIENT_ID:"cid",SCREEN_NAME:"cd",EVENT_CATEGORY:"ec",EVENT_ACTION:"ea",EVENT_LABEL:"el",EVENT_VALUE:"ev",HOST_NAME:"dh"}),this._libraryVersion=Object.freeze("1.0.58"),this._hasher=new n}sendAppView(e){const{screenName:t="(none)",userId:n=""}=e;if(n.length<1)throw"An analytics screen view must have a user ID.";const i=new URLSearchParams;i.append(this.AnalyticsAttributes.HIT_TYPE,"screenview"),i.append(this.AnalyticsAttributes.LIBRARY_VERSION,this._getLibraryVersion()),i.append(this.AnalyticsAttributes.PROTOCAL_VERSION,"1"),i.append(this.AnalyticsAttributes.APPLICATION_NAME,this._applicationName),i.append(this.AnalyticsAttributes.APPLICATION_VERSION,this._getVersion().toString()),i.append(this.AnalyticsAttributes.TRACKING_CODE,this._analyticsTrackingCode),i.append(this.AnalyticsAttributes.LANGUAGE,this._getLanguage()),i.append(this.AnalyticsAttributes.COLOR_DEPTH,this._getColorDepth()),i.append(this.AnalyticsAttributes.SCREEN_RESOLUTION,this._getScreenResolution()),i.append(this.AnalyticsAttributes.VIEW_PORT,this._getViewportSize()),i.append(this.AnalyticsAttributes.USER_ID,n),i.append(this.AnalyticsAttributes.CLIENT_ID,n),i.append(this.AnalyticsAttributes.SCREEN_NAME,t),fetch(this._analyticsEndpoint,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",DNT:1,Accept:"application/json"},body:i})}sendEvent(e){const{eventCategory:t="",eventAction:n="",eventLabel:i="",eventValue:r=-1,userId:a="",screenName:s="(none)",hostName:o="(none)",customAttributes:c=[]}=e;if(t.length<1)throw"An analytics event must have a category.";if(n.length<1)throw"An analytics event must have an action.";if(a.length<1)throw"An analytics event must have a user ID.";const u=new URLSearchParams;u.append(this.AnalyticsAttributes.EVENT_CATEGORY,t),u.append(this.AnalyticsAttributes.EVENT_ACTION,n),i.length>0&&u.append(this.AnalyticsAttributes.EVENT_LABEL,i),r>-1&&u.append(this.AnalyticsAttributes.EVENT_VALUE,r.toString()),u.append(this.AnalyticsAttributes.HIT_TYPE,"event"),u.append(this.AnalyticsAttributes.LIBRARY_VERSION,this._getLibraryVersion()),u.append(this.AnalyticsAttributes.PROTOCAL_VERSION,"1"),u.append(this.AnalyticsAttributes.APPLICATION_NAME,this._applicationName),u.append(this.AnalyticsAttributes.APPLICATION_VERSION,this._getVersion().toString()),u.append(this.AnalyticsAttributes.TRACKING_CODE,this._analyticsTrackingCode),u.append(this.AnalyticsAttributes.LANGUAGE,this._getLanguage()),u.append(this.AnalyticsAttributes.COLOR_DEPTH,this._getColorDepth()),u.append(this.AnalyticsAttributes.SCREEN_RESOLUTION,this._getScreenResolution()),u.append(this.AnalyticsAttributes.SCREEN_NAME,s),u.append(this.AnalyticsAttributes.HOST_NAME,o),u.append(this.AnalyticsAttributes.VIEW_PORT,this._getViewportSize()),u.append(this.AnalyticsAttributes.USER_ID,a),u.append(this.AnalyticsAttributes.CLIENT_ID,a),c.forEach(((e,t)=>{let n="cd";"m"==e.t&&(n="cm"),u.append(n+e.i.toString(),e.value)})),fetch(this._analyticsEndpoint,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",DNT:1,Accept:"application/json"},body:u})}hash(e){const{stringToHash:t="",salt:n="hfdu9b89';JHK7898hbh;';[/"}=e;if(t.length<1)throw"The string to hash is invalid.";return this._hasher.hash(t+n)}hashEmail(e){let t=(e=e.toLowerCase()).split("@")[0].replace("%",""),n=e.substring(t.length+1);return{email:e,userIemailNamedName:t,emailDomain:n,deIdentifiedEmail:this.hash({stringToHash:t})+"@"+n}}getUTCTimeStamp(){let e=new Date;function t(e){return("0"+e).slice(-2)}return e.getUTCFullYear().toString()+":"+t((e.getUTCMonth()+1).toString())+":"+t(e.getUTCDate().toString())+"    "+t(e.getUTCHours().toString())+":"+t(e.getUTCMinutes().toString())+":"+t(e.getUTCSeconds().toString())}_isAnalytics(e){return/^ua-\d{4,9}-\d{1,4}$/i.test(e.toString())}_getScreenResolution(){throw"virtual function that must have a derived implementation"}_getViewportSize(){throw"virtual function that must have a derived implementation"}_getVersion(){throw"virtual function that must have a derived implementation"}_getColorDepth(){throw"virtual function that must have a derived implementation"}_getLanguage(){throw"virtual function that must have a derived implementation"}_getLibraryVersion(){return this._libraryVersion}}class r extends i{constructor(e){super(e)}_getScreenResolution(){try{return(window.screen.width*window.devicePixelRatio).toString()+"x"+(window.screen.height*window.devicePixelRatio).toString()}catch(e){return"0x0"}}_getViewportSize(){try{return Math.max(document.documentElement.clientWidth,window.innerWidth||0).toString()+"x"+Math.max(document.documentElement.clientHeight,window.innerHeight||0).toString()}catch(e){return"0x0"}}_getVersion(){try{return chrome.runtime.getManifest().version}catch(e){return 0}}_getColorDepth(){try{return window.screen.colorDepth+"-bit"}catch(e){return"0-bit"}}_getLanguage(){try{return navigator.language}catch(e){return""}}}function a(e,t,n,i,r,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function o(e){a(s,i,r,o,c,"next",e)}function c(e){a(s,i,r,o,c,"throw",e)}o(void 0)}))}}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var c={};function u(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:c}var l=Object.assign,d=Object.getOwnPropertyDescriptor,h=Object.defineProperty,p=Object.prototype,g=[];Object.freeze(g);var f={};Object.freeze(f);var m="undefined"!=typeof Proxy,v=Object.toString();function _(){m||o("Proxy not available")}function y(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var b=function(){};function S(e){return"function"==typeof e}function E(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function A(e){return null!==e&&"object"==typeof e}function T(e){if(!A(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===v}function O(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function w(e,t,n){h(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function C(e,t,n){h(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function I(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return A(e)&&!0===e[n]}}function N(e){return e instanceof Map}function R(e){return e instanceof Set}var D=void 0!==Object.getOwnPropertySymbols;var L="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:D?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function k(e){return null===e?null:"object"==typeof e?""+e:e}function P(e,t){return p.hasOwnProperty.call(e,t)}var U=Object.getOwnPropertyDescriptors||function(e){var t={};return L(e).forEach((function(n){t[n]=d(e,n)})),t};function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},j.apply(this,arguments)}function Y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,G(e,t)}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K=Symbol("mobx-stored-annotations");function H(e){return Object.assign((function(t,n){W(t,n,e)}),e)}function W(e,t,n){P(e,K)||w(e,K,j({},e[K])),function(e){return e.annotationType_===ee}(n)||(e[K][t]=n)}var J=Symbol("mobx administration"),z=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ze.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return vt(this)},t.reportChanged=function(){ft(),_t(this),mt()},t.toString=function(){return this.name_},e}(),q=I("Atom",z);function $(e,t,n){void 0===t&&(t=b),void 0===n&&(n=b);var i,r=new z(e);return t!==b&&Mt(Ut,r,t,i),n!==b&&xt(r,n),r}var X={identity:function(e,t){return e===t},structural:function(e,t){return ei(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return ei(e,t,1)}};function Q(e,t,n){return Wt(e)?e:Array.isArray(e)?De.array(e,{name:n}):T(e)?De.object(e,void 0,{name:n}):N(e)?De.map(e,{name:n}):R(e)?De.set(e,{name:n}):"function"!=typeof e||Lt(e)||Ht(e)?e:O(e)?Vt(e):Dt(n,e)}function Z(e){return e}var ee="override";function te(e,t){return{annotationType_:e,options_:t,make_:ne,extend_:ie}}function ne(e,t,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Lt(n.value))return 1;var a=re(e,this,t,n,!1);return h(i,t,a),2}function ie(e,t,n,i){var r=re(e,this,t,n);return e.defineProperty_(t,r,i)}function re(e,t,n,i,r){var a,s,o,c,u,l,d,h;void 0===r&&(r=dt.safeDescriptors),h=i,t.annotationType_,h.value;var p,g=i.value;null!=(a=t.options_)&&a.bound&&(g=g.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Fe(null!=(s=null==(o=t.options_)?void 0:o.name)?s:n.toString(),g,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function ae(e,t){return{annotationType_:e,options_:t,make_:se,extend_:oe}}function se(e,t,n,i){var r;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!P(e.target_,t)||!Ht(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(Ht(n.value))return 1;var a=ce(e,this,t,n,!1,!1);return h(i,t,a),2}function oe(e,t,n,i){var r,a=ce(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,a,i)}function ce(e,t,n,i,r,a){var s;void 0===a&&(a=dt.safeDescriptors),s=i,t.annotationType_,s.value;var o,c=i.value;(Ht(c)||(c=Vt(c)),r)&&((c=c.bind(null!=(o=e.proxy_)?o:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function ue(e,t){return{annotationType_:e,options_:t,make_:le,extend_:de}}function le(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function de(e,t,n,i){var r;return r=n,this.annotationType_,r.get,e.defineComputedProperty_(t,j({},this.options_,{get:n.get,set:n.set}),i)}function he(e,t){return{annotationType_:e,options_:t,make_:pe,extend_:ge}}function pe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ge(e,t,n,i){var r,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(r=null==(a=this.options_)?void 0:a.enhancer)?r:Q,i)}var fe=me();function me(e){return{annotationType_:"true",options_:e,make_:ve,extend_:_e}}function ve(e,t,n,i){var r,a,s,o;if(n.get)return Ue.make_(e,t,n,i);if(n.set){var c=Fe(t.toString(),n.set);return i===e.target_?null===e.defineProperty_(t,{configurable:!dt.safeDescriptors||e.isPlainObject_,set:c})?0:2:(h(i,t,{configurable:!0,set:c}),2)}if(i!==e.target_&&"function"==typeof n.value)return O(n.value)?(null!=(o=this.options_)&&o.autoBind?Vt.bound:Vt).make_(e,t,n,i):(null!=(s=this.options_)&&s.autoBind?Dt.bound:Dt).make_(e,t,n,i);var u,l=!1===(null==(r=this.options_)?void 0:r.deep)?De.ref:De;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,i)}function _e(e,t,n,i){var r,a,s;if(n.get)return Ue.extend_(e,t,n,i);if(n.set)return e.defineProperty_(t,{configurable:!dt.safeDescriptors||e.isPlainObject_,set:Fe(t.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?De.ref:De).extend_(e,t,n,i)}var ye={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function be(e){return e||ye}Object.freeze(ye);var Se=he("observable"),Ee=he("observable.ref",{enhancer:Z}),Ae=he("observable.shallow",{enhancer:function(e,t,n){return null==e||jn(e)||Sn(e)||In(e)||Dn(e)?e:Array.isArray(e)?De.array(e,{name:n,deep:!1}):T(e)?De.object(e,void 0,{name:n,deep:!1}):N(e)?De.map(e,{name:n,deep:!1}):R(e)?De.set(e,{name:n,deep:!1}):void 0}}),Te=he("observable.struct",{enhancer:function(e,t){return ei(e,t)?t:e}}),Oe=H(Se);function we(e){return!0===e.deep?Q:!1===e.deep?Z:(t=e.defaultDecorator)&&null!=(n=null==(i=t.options_)?void 0:i.enhancer)?n:Q;var t,n,i}function Ce(e,t,n){if(!E(t))return Wt(e)?e:T(e)?De.object(e,t,n):Array.isArray(e)?De.array(e,t):N(e)?De.map(e,t):R(e)?De.set(e,t):"object"==typeof e&&null!==e?e:De.box(e,t);W(e,t,Se)}Object.assign(Ce,Oe);var Ie,Ne,Re={box:function(e,t){var n=be(t);return new We(e,we(n),n.name,!0,n.equals)},array:function(e,t){var n=be(t);return(!1===dt.useProxies||!1===n.proxy?qn:hn)(e,we(n),n.name)},map:function(e,t){var n=be(t);return new Cn(e,we(n),n.name)},set:function(e,t){var n=be(t);return new Rn(e,we(n),n.name)},object:function(e,t,n){return jt(!1===dt.useProxies||!1===(null==n?void 0:n.proxy)?Un({},n):function(e,t){var n,i;return _(),e=Un(e,t),null!=(i=(n=e[J]).proxy_)?i:n.proxy_=new Proxy(e,Zt)}({},n),e,t)},ref:H(Ee),shallow:H(Ae),deep:Oe,struct:H(Te)},De=l(Ce,Re),Le="computed",ke=ue(Le),Pe=ue("computed.struct",{equals:X.structural}),Ue=function(e,t){if(E(t))return W(e,t,ke);if(T(e))return H(ue(Le,e));var n=T(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new $e(n)};Object.assign(Ue,ke),Ue.struct=H(Pe);var xe,Me=0,je=1,Ye=null!=(Ie=null==(Ne=d((function(){}),"name"))?void 0:Ne.configurable)&&Ie,Ge={value:"action",configurable:!0,writable:!1,enumerable:!1};function Fe(e,t,n,i){function r(){return Be(e,n,t,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,Ye&&(Ge.value=e,Object.defineProperty(r,"name",Ge)),r}function Be(e,t,n,i,r){var a=function(e,t,n,i){var r=!1,a=0,s=dt.trackingDerivation,o=!t||!s;ft();var c=dt.allowStateChanges;o&&(rt(),c=Ve(!0));var u=st(!0),l={runAsAction_:o,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:r,startTime_:a,actionId_:je++,parentActionId_:Me};return Me=l.actionId_,l}(0,t);try{return n.apply(i,r)}catch(e){throw a.error_=e,e}finally{!function(e){Me!==e.actionId_&&o(30);Me=e.parentActionId_,void 0!==e.error_&&(dt.suppressReactionErrors=!0);Ke(e.prevAllowStateChanges_),ot(e.prevAllowStateReads_),mt(),e.runAsAction_&&at(e.prevDerivation_);dt.suppressReactionErrors=!1}(a)}}function Ve(e){var t=dt.allowStateChanges;return dt.allowStateChanges=e,t}function Ke(e){dt.allowStateChanges=e}xe=Symbol.toPrimitive;var He,We=function(e){function t(t,n,i,r,a){var s;return void 0===i&&(i="ObservableValue"),void 0===a&&(a=X.default),(s=e.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=a,s.value_=n(t,void 0,i),s}Y(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==dt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(en(this)){var t=nn(this,{object:this,type:un,newValue:e});if(!t)return dt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?dt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),rn(this)&&sn(this,{type:un,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return tn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:un,newValue:this.value_,oldValue:void 0}),an(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return k(this.get())},n[xe]=function(){return this.valueOf()},t}(z),Je=I("ObservableValue",We);He=Symbol.toPrimitive;var ze,qe,$e=function(){function e(e){this.dependenciesState_=ze.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=ze.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Qe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=qe.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||o(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Fe("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?X.structural:X.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==ze.UP_TO_DATE_)return;e.lowestObserverState_=ze.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===ze.UP_TO_DATE_&&(e.dependenciesState_=ze.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&o(32,this.name_,this.derivation),0!==dt.inBatch||0!==this.observers_.size||this.keepAlive_){if(vt(this),et(this)){var e=dt.trackingContext;this.keepAlive_&&!e&&(dt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===ze.STALE_)return;e.lowestObserverState_=ze.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===ze.POSSIBLY_STALE_?t.dependenciesState_=ze.STALE_:t.dependenciesState_===ze.UP_TO_DATE_&&(e.lowestObserverState_=ze.UP_TO_DATE_)}))}(this),dt.trackingContext=e}}else et(this)&&(this.warnAboutUntrackedRead_(),ft(),this.value_=this.computeValue_(!1),mt());var t=this.value_;if(Ze(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&o(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else o(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===ze.NOT_TRACKING_,n=this.computeValue_(!0),i=t||Ze(e)||Ze(n)||!this.equals_(e,n);return i&&(this.value_=n),i},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ve(!1);if(e)t=tt(this,this.derivation,this.scope_);else if(!0===dt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Qe(e)}return Ke(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(nt(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,i=!0,r=void 0;return kt((function(){var a=n.get();if(!i||t){var s=rt();e({observableKind:"computed",debugObjectName:n.name_,type:un,object:n,newValue:a,oldValue:r}),at(s)}i=!1,r=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return k(this.get())},t[He]=function(){return this.valueOf()},e}(),Xe=I("ComputedValue",$e);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(ze||(ze={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(qe||(qe={}));var Qe=function(e){this.cause=void 0,this.cause=e};function Ze(e){return e instanceof Qe}function et(e){switch(e.dependenciesState_){case ze.UP_TO_DATE_:return!1;case ze.NOT_TRACKING_:case ze.STALE_:return!0;case ze.POSSIBLY_STALE_:for(var t=st(!0),n=rt(),i=e.observing_,r=i.length,a=0;a<r;a++){var s=i[a];if(Xe(s)){if(dt.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return at(n),ot(t),!0}if(e.dependenciesState_===ze.STALE_)return at(n),ot(t),!0}}return ct(e),at(n),ot(t),!1}}function tt(e,t,n){var i=st(!0);ct(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++dt.runId;var r,a=dt.trackingDerivation;if(dt.trackingDerivation=e,dt.inBatch++,!0===dt.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new Qe(e)}return dt.inBatch--,dt.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,i=ze.UP_TO_DATE_,r=0,a=e.unboundDepsCount_,s=0;s<a;s++){var o=n[s];0===o.diffValue_&&(o.diffValue_=1,r!==s&&(n[r]=o),r++),o.dependenciesState_>i&&(i=o.dependenciesState_)}n.length=r,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&pt(c,e),c.diffValue_=0}for(;r--;){var u=n[r];1===u.diffValue_&&(u.diffValue_=0,ht(u,e))}i!==ze.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}(e),ot(i),r}function nt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)pt(t[n],e);e.dependenciesState_=ze.NOT_TRACKING_}function it(e){var t=rt();try{return e()}finally{at(t)}}function rt(){var e=dt.trackingDerivation;return dt.trackingDerivation=null,e}function at(e){dt.trackingDerivation=e}function st(e){var t=dt.allowStateReads;return dt.allowStateReads=e,t}function ot(e){dt.allowStateReads=e}function ct(e){if(e.dependenciesState_!==ze.UP_TO_DATE_){e.dependenciesState_=ze.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=ze.UP_TO_DATE_}}var ut=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},lt=!0,dt=function(){var e=u();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(lt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new ut).version&&(lt=!1),lt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ut):(setTimeout((function(){o(35)}),1),new ut)}();function ht(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function pt(e,t){e.observers_.delete(t),0===e.observers_.size&&gt(e)}function gt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,dt.pendingUnobservations.push(e))}function ft(){dt.inBatch++}function mt(){if(0==--dt.inBatch){bt();for(var e=dt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof $e&&n.suspend_())}dt.pendingUnobservations=[]}}function vt(e){var t=dt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&dt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&dt.inBatch>0&&gt(e),!1)}function _t(e){e.lowestObserverState_!==ze.STALE_&&(e.lowestObserverState_=ze.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===ze.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=ze.STALE_})))}var yt=function(){function e(e,t,n,i){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=ze.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=qe.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,dt.pendingReactions.push(this),bt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ft(),this.isScheduled_=!1;var e=dt.trackingContext;if(dt.trackingContext=this,et(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}dt.trackingContext=e,mt()}},t.track=function(e){if(!this.isDisposed_){ft(),this.isRunning_=!0;var t=dt.trackingContext;dt.trackingContext=this;var n=tt(this,e,void 0);dt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&nt(this),Ze(n)&&this.reportExceptionInDerivation_(n.cause),mt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(dt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";dt.suppressReactionErrors||console.error(n,e),dt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ft(),nt(this),mt()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[J]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){o("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];"boolean"==typeof n[n.length-1]&&(e=n.pop());var r=$t(n);if(!r)return o("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");r.isTracing_===qe.NONE&&console.log("[mobx.trace] '"+r.name_+"' tracing enabled");r.isTracing_=e?qe.BREAK:qe.LOG}(this,e)},e}();function bt(){dt.inBatch>0||dt.isRunningReactions||function(e){e()}(St)}function St(){dt.isRunningReactions=!0;for(var e=dt.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}dt.isRunningReactions=!1}var Et=I("Reaction",yt);var At="action",Tt="autoAction",Ot=te(At),wt=te("action.bound",{bound:!0}),Ct=te(Tt,{autoAction:!0}),It=te("autoAction.bound",{autoAction:!0,bound:!0});function Nt(e){return function(t,n){return S(t)?Fe(t.name||"<unnamed action>",t,e):S(n)?Fe(t,n,e):E(n)?W(t,n,e?Ct:Ot):E(t)?H(te(e?Tt:At,{name:t,autoAction:e})):void 0}}var Rt=Nt(!1);Object.assign(Rt,Ot);var Dt=Nt(!0);function Lt(e){return S(e)&&!0===e.isMobxAction}function kt(e,t){var n,i;void 0===t&&(t=f);var r,a=null!=(n=null==(i=t)?void 0:i.name)?n:"Autorun";if(!t.scheduler&&!t.delay)r=new yt(a,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var s=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Pt}(t),o=!1;r=new yt(a,(function(){o||(o=!0,s((function(){o=!1,r.isDisposed_||r.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(r)}return r.schedule_(),r.getDisposer_()}Object.assign(Dt,Ct),Rt.bound=H(wt),Dt.bound=H(It);var Pt=function(e){return e()};var Ut="onBO";function xt(e,t,n){return Mt("onBUO",e,t,n)}function Mt(e,t,n,i){var r="function"==typeof i?$n(t,n):$n(t),a=S(i)?i:n,s=e+"L";return r[s]?r[s].add(a):r[s]=new Set([a]),function(){var e=r[s];e&&(e.delete(a),0===e.size&&delete r[s])}}function jt(e,t,n,i){var r=U(t),a=Un(e,i)[J];ft();try{L(r).forEach((function(e){a.extend_(e,r[e],!n||(!(e in n)||n[e]))}))}finally{mt()}return e}var Yt=0;function Gt(){this.message="FLOW_CANCELLED"}Gt.prototype=Object.create(Error.prototype);var Ft=ae("flow"),Bt=ae("flow.bound",{bound:!0}),Vt=Object.assign((function(e,t){if(E(t))return W(e,t,Ft);var n=e,i=n.name||"<unnamed flow>",r=function(){var e,t=this,r=arguments,a=++Yt,s=Rt(i+" - runid: "+a+" - init",n).apply(t,r),o=void 0,c=new Promise((function(t,n){var r=0;function c(e){var t;o=void 0;try{t=Rt(i+" - runid: "+a+" - yield "+r++,s.next).call(s,e)}catch(e){return n(e)}l(t)}function u(e){var t;o=void 0;try{t=Rt(i+" - runid: "+a+" - yield "+r++,s.throw).call(s,e)}catch(e){return n(e)}l(t)}function l(e){if(!S(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return c.cancel=Rt(i+" - runid: "+a+" - cancel",(function(){try{o&&Kt(o);var t=s.return(void 0),n=Promise.resolve(t.value);n.then(b,b),Kt(n),e(new Gt)}catch(t){e(t)}})),c};return r.isMobXFlow=!0,r}),Ft);function Kt(e){S(e.cancel)&&e.cancel()}function Ht(e){return!0===(null==e?void 0:e.isMobXFlow)}function Wt(e){return function(e,t){return!!e&&(void 0!==t?!!jn(e)&&e[J].values_.has(t):jn(e)||!!e[J]||q(e)||Et(e)||Xe(e))}(e)}function Jt(e,t,n){return e.set(t,n),n}function zt(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!Wt(e))return e;if(Je(e)||Xe(e))return zt(e.get(),t);if(t.has(e))return t.get(e);if(Sn(e)){var n=Jt(t,e,new Array(e.length));return e.forEach((function(e,i){n[i]=zt(e,t)})),n}if(Dn(e)){var i=Jt(t,e,new Set);return e.forEach((function(e){i.add(zt(e,t))})),i}if(In(e)){var r=Jt(t,e,new Map);return e.forEach((function(e,n){r.set(n,zt(e,t))})),r}var a=Jt(t,e,{});return function(e){if(jn(e))return e[J].ownKeys_();o(38)}(e).forEach((function(n){p.propertyIsEnumerable.call(e,n)&&(a[n]=zt(e[n],t))})),a}function qt(e,t){return zt(e,new Map)}function $t(e){switch(e.length){case 0:return dt.trackingDerivation;case 1:return $n(e[0]);case 2:return $n(e[0],e[1])}}function Xt(e,t){void 0===t&&(t=void 0),ft();try{return e.apply(t)}finally{mt()}}function Qt(e){return e[J]}Vt.bound=H(Bt);var Zt={has:function(e,t){return Qt(e).has_(t)},get:function(e,t){return Qt(e).get_(t)},set:function(e,t,n){var i;return!!E(t)&&(null==(i=Qt(e).set_(t,n,!0))||i)},deleteProperty:function(e,t){var n;return!!E(t)&&(null==(n=Qt(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var i;return null==(i=Qt(e).defineProperty_(t,n))||i},ownKeys:function(e){return Qt(e).ownKeys_()},preventExtensions:function(e){o(13)}};function en(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function tn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),y((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function nn(e,t){var n=rt();try{for(var i=[].concat(e.interceptors_||[]),r=0,a=i.length;r<a&&((t=i[r](t))&&!t.type&&o(14),t);r++);return t}finally{at(n)}}function rn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function an(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),y((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function sn(e,t){var n=rt(),i=e.changeListeners_;if(i){for(var r=0,a=(i=i.slice()).length;r<a;r++)i[r](t);at(n)}}var on=Symbol("mobx-keys");var cn="splice",un="update",ln={get:function(e,t){var n=e[J];return t===J?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?P(pn,t)?pn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var i=e[J];return"length"===t&&i.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){o(15)}},dn=function(){function e(e,t,n,i){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new z(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return tn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),an(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&o("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&o(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&zn(e+t+1)},t.spliceWithArray_=function(e,t,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=g),en(this)){var a=nn(this,{object:this.proxy_,type:cn,index:e,removedCount:t,added:n});if(!a)return g;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return i.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var o=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,o),this.dehanceValues_(o)},t.spliceItemsIntoValues_=function(e,t,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[e,t].concat(n));var r=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var o=0;o<a.length;o++)this.values_[e+n.length+o]=a[o];return r},t.notifyArrayChildUpdate_=function(e,t,n){var i=!this.owned_&&!1,r=rn(this),a=r||i?{observableKind:"array",object:this.proxy_,type:un,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&sn(this,a)},t.notifyArraySplice_=function(e,t,n){var i=!this.owned_&&!1,r=rn(this),a=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:cn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&sn(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&o(17,e,n.length),e<n.length){this.atom_;var i=n[e];if(en(this)){var r=nn(this,{type:un,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var a=new Array(e+1-n.length),s=0;s<a.length-1;s++)a[s]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function hn(e,t,n,i){void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),_();var r=new dn(n,t,i,!1);C(r.values_,J,r);var a=new Proxy(r.values_,ln);if(r.proxy_=a,e&&e.length){var s=Ve(!0);r.spliceWithArray_(0,0,e),Ke(s)}return a}var pn={clear:function(){return this.splice(0)},replace:function(e){var t=this[J];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this[J];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[J].spliceWithArray_(e,t,n)},push:function(){for(var e=this[J],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[J].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[J],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return dt.trackingDerivation&&o(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){dt.trackingDerivation&&o(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[J],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function gn(e,t){"function"==typeof Array.prototype[e]&&(pn[e]=t(e))}function fn(e){return function(){var t=this[J];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function mn(e){return function(t,n){var i=this,r=this[J];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,i)}))}}function vn(e){return function(){var t=this,n=this[J];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,i){return r(e,n,i,t)},i[e].apply(i,arguments)}}gn("concat",fn),gn("flat",fn),gn("includes",fn),gn("indexOf",fn),gn("join",fn),gn("lastIndexOf",fn),gn("slice",fn),gn("toString",fn),gn("toLocaleString",fn),gn("every",mn),gn("filter",mn),gn("find",mn),gn("findIndex",mn),gn("flatMap",mn),gn("forEach",mn),gn("map",mn),gn("some",mn),gn("reduce",vn),gn("reduceRight",vn);var _n,yn,bn=I("ObservableArrayAdministration",dn);function Sn(e){return A(e)&&bn(e[J])}var En={},An="add",Tn="delete";_n=Symbol.iterator,yn=Symbol.toStringTag;var On,wn,Cn=function(){function e(e,t,n){var i=this;void 0===t&&(t=Q),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[J]=En,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,S(Map)||o(18),this.keysAtom_=$("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=Ve(e);try{t()}finally{Ke(n)}}(!0,(function(){i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!dt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var i=n=new We(this.has_(e),Z,"ObservableMap.key?",!1);this.hasMap_.set(e,i),xt(i,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(en(this)){var i=nn(this,{type:n?un:An,object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,en(this))&&!nn(this,{type:Tn,object:this,name:e}))return!1;if(this.has_(e)){var n=rn(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:Tn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Xt((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&sn(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==dt.UNCHANGED){var i=rn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:un,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&sn(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Xt((function(){var i,r=new We(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(i=n.hasMap_.get(e))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=rn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:An,object:this,name:e,newValue:t}:null;i&&sn(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return ii({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return ii({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},t[_n]=function(){return this.entries()},t.forEach=function(e,t){for(var n,i=V(this);!(n=i()).done;){var r=n.value,a=r[0],s=r[1];e.call(t,s,a,this)}},t.merge=function(e){var t=this;return In(e)&&(e=new Map(e)),Xt((function(){T(e)?function(e){var t=Object.keys(e);if(!D)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return p.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];return t.set(n,i)})):N(e)?(e.constructor!==Map&&o(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&o(20,e)})),this},t.clear=function(){var e=this;Xt((function(){it((function(){for(var t,n=V(e.keys());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.replace=function(e){var t=this;return Xt((function(){for(var n,i=function(e){if(N(e)||In(e))return e;if(Array.isArray(e))return new Map(e);if(T(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return o(21,e)}(e),r=new Map,a=!1,s=V(t.data_.keys());!(n=s()).done;){var c=n.value;if(!i.has(c))if(t.delete(c))a=!0;else{var u=t.data_.get(c);r.set(c,u)}}for(var l,d=V(i.entries());!(l=d()).done;){var h=l.value,p=h[0],g=h[1],f=t.data_.has(p);if(t.set(p,g),t.data_.has(p)){var m=t.data_.get(p);r.set(p,m),f||(a=!0)}}if(!a)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),_=r.keys(),y=v.next(),b=_.next();!y.done;){if(y.value!==b.value){t.keysAtom_.reportChanged();break}y=v.next(),b=_.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return an(this,e)},t.intercept_=function(e){return tn(this,e)},M(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:yn,get:function(){return"Map"}}]),e}(),In=I("ObservableMap",Cn);var Nn={};On=Symbol.iterator,wn=Symbol.toStringTag;var Rn=function(){function e(e,t,n){void 0===t&&(t=Q),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[J]=Nn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,S(Set)||o(22),this.atom_=$(this.name_),this.enhancer_=function(e,i){return t(e,i,n)},e&&this.replace(e)}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Xt((function(){it((function(){for(var t,n=V(e.data_.values());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.forEach=function(e,t){for(var n,i=V(this);!(n=i()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,en(this))&&!nn(this,{type:An,object:this,newValue:e}))return this;if(!this.has(e)){Xt((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=rn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:An,object:this,newValue:e}:null;n&&sn(this,i)}return this},t.delete=function(e){var t=this;if(en(this)&&!nn(this,{type:Tn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=rn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Tn,object:this,oldValue:e}:null;return Xt((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&sn(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return ii({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return ii({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Dn(e)&&(e=new Set(e)),Xt((function(){Array.isArray(e)||R(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&o("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return an(this,e)},t.intercept_=function(e){return tn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[On]=function(){return this.values()},M(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:wn,get:function(){return"Set"}}]),e}(),Dn=I("ObservableSet",Rn),Ln=Object.create(null),kn="remove",Pn=function(){function e(e,t,n,i){void 0===t&&(t=new Map),void 0===i&&(i=fe),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new z("ObservableObject.keys"),this.isPlainObject_=T(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof $e)return n.set(t),!0;if(en(this)){var i=nn(this,{type:un,object:this.proxy_||this.target_,name:e,newValue:t});if(!i)return null;t=i.newValue}if((t=n.prepareNewValue_(t))!==dt.UNCHANGED){var r=rn(this),a=r?{type:un,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&sn(this,a)}return!0},t.get_=function(e){return dt.trackingDerivation&&!P(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),P(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!dt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new We(e in this.target_,Z,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[K])&&n[e])return;o(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==p;){var r=d(i,e);if(r){var a=t.make_(this,e,r,i);if(0===a)return;if(1===a)break}i=Object.getPrototypeOf(i)}Yn(this,t,e)}},t.extend_=function(e,t,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,i);var r=n.extend_(this,e,t,i);return r&&Yn(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{ft();var i=this.delete_(e);if(!i)return i;if(en(this)){var r=nn(this,{object:this.proxy_||this.target_,name:e,type:An,newValue:t.value});if(!r)return null;var a=r.newValue;t.value!==a&&(t=j({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else h(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{mt()}return!0},t.defineObservableProperty_=function(e,t,n,i){void 0===i&&(i=!1);try{ft();var r=this.delete_(e);if(!r)return r;if(en(this)){var a=nn(this,{object:this.proxy_||this.target_,name:e,type:An,newValue:t});if(!a)return null;t=a.newValue}var s=Mn(e),o={configurable:!dt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,e,o))return!1}else h(this.target_,e,o);var c=new We(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{mt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{ft();var i=this.delete_(e);if(!i)return i;if(en(this))if(!nn(this,{object:this.proxy_||this.target_,name:e,type:An,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=Mn(e),a={configurable:!dt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else h(this.target_,e,a);this.values_.set(e,new $e(t)),this.notifyPropertyAddition_(e,void 0)}finally{mt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!P(this.target_,e))return!0;if(en(this)&&!nn(this,{object:this.proxy_||this.target_,name:e,type:kn}))return null;try{var n,i;ft();var r,a=rn(this),s=this.values_.get(e),o=void 0;if(!s&&a)o=null==(r=d(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof We&&(o=s.value_),_t(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(e in this.target_),a){var c={type:kn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:e};0,a&&sn(this,c)}}finally{mt()}return!0},t.observe_=function(e,t){return an(this,e)},t.intercept_=function(e){return tn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,i,r=rn(this);if(r){var a=r?{type:An,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&sn(this,a)}null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),L(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Un(e,t){var n;if(P(e,J))return e;var i=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new Pn(e,new Map,String(i),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:me(e):void 0}(t));return w(e,J,r),e}var xn=I("ObservableObjectAdministration",Pn);function Mn(e){return Ln[e]||(Ln[e]={get:function(){return this[J].getObservablePropValue_(e)},set:function(t){return this[J].setObservablePropValue_(e,t)}})}function jn(e){return!!A(e)&&xn(e[J])}function Yn(e,t,n){var i;null==(i=e.target_[K])||delete i[n]}var Gn,Fn,Bn=Wn(0),Vn=0,Kn=function(){};Gn=Kn,Fn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Gn.prototype,Fn):void 0!==Gn.prototype.__proto__?Gn.prototype.__proto__=Fn:Gn.prototype=Fn;var Hn=function(e,t,n){function i(t,n,i,r){var a;void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),a=e.call(this)||this;var s=new dn(i,n,r,!0);if(s.proxy_=F(a),C(F(a),J,s),t&&t.length){var o=Ve(!0);a.spliceWithArray(0,0,t),Ke(o)}return Object.defineProperty(F(a),"0",Bn),a}Y(i,e);var r=i.prototype;return r.concat=function(){this[J].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Sn(e)?e.slice():e})))},r[n]=function(){var e=this,t=0;return ii({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},M(i,[{key:"length",get:function(){return this[J].getArrayLength_()},set:function(e){this[J].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),i}(Kn,Symbol.toStringTag,Symbol.iterator);function Wn(e){return{enumerable:!1,configurable:!0,get:function(){return this[J].get_(e)},set:function(t){this[J].set_(e,t)}}}function Jn(e){h(Hn.prototype,""+e,Wn(e))}function zn(e){if(e>Vn){for(var t=Vn;t<e+100;t++)Jn(t);Vn=e}}function qn(e,t,n){return new Hn(e,t,n)}function $n(e,t){if("object"==typeof e&&null!==e){if(Sn(e))return void 0!==t&&o(23),e[J].atom_;if(Dn(e))return e[J];if(In(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||o(25,t,Qn(e)),n}if(jn(e)){if(!t)return o(26);var i=e[J].values_.get(t);return i||o(27,t,Qn(e)),i}if(q(e)||Xe(e)||Et(e))return e}else if(S(e)&&Et(e[J]))return e[J];o(28)}function Xn(e,t){return e||o(29),void 0!==t?Xn($n(e,t)):q(e)||Xe(e)||Et(e)||In(e)||Dn(e)?e:e[J]?e[J]:void o(24,e)}function Qn(e,t){var n;if(void 0!==t)n=$n(e,t);else{if(Lt(e))return e.name;n=jn(e)||In(e)||Dn(e)?Xn(e):$n(e)}return n.name_}Object.entries(pn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&w(Hn.prototype,t,n)})),zn(1e3);var Zn=p.toString;function ei(e,t,n){return void 0===n&&(n=-1),ti(e,t,n)}function ti(e,t,n,i,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var s=Zn.call(e);if(s!==Zn.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=ni(e),t=ni(t);var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(S(c)&&c instanceof c&&S(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return r[l]===t;if(i.push(e),r.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!ti(e[l],t[l],n-1,i,r))return!1}else{var d,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!P(t,d=h[l])||!ti(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function ni(e){return Sn(e)?e.slice():N(e)||In(e)||R(e)||Dn(e)?Array.from(e.entries()):e}function ii(e){return e[Symbol.iterator]=ri,e}function ri(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===u()[e]&&o("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Qn},$mobx:J});class ai{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class si{static encode(e){var t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);var t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}var oi="local";class ci extends ai{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(this._event&&t===this._syncType&&this._keys.has(Object.keys(e)[0])){var n=JSON.parse(si.decode(Object.values(e)[0].newValue));this._event(n)}}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise(function(){var r=s((function*(r,a){try{if("none"===i._syncType)return void r(!0);var s={};if(n){if(Object.keys(e).length>0){var o=yield i._retrieve(e,i._syncType);if(o){if(null===o[e]){var c=si.encode(t);return i._store(e,c,i._syncType),i._keys.add(e),void r(!0)}if((s=si.decode(o[e]))===JSON.stringify(t))return void r(!0);var u=i.mergeDeep(JSON.parse(s),t,!0),l=si.encode(u);return i._store(e,l,i._syncType),i._keys.add(e),void r(!0)}var d=si.encode(t);return i._store(e,d,i._syncType),i._keys.add(e),void r(!0)}}else{var h=si.encode(t);i._store(e,h,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}));return function(e,t){return r.apply(this,arguments)}}())}retrieve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return new Promise(function(){var i=s((function*(i,r){try{if("none"===n._syncType)return void i(t);var a={};if(Object.keys(e).length>0){var s=yield n._retrieve(e,n._syncType);if(s)a=si.decode(s[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(a),!0));else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}));return function(e,t){return i.apply(this,arguments)}}())}remove(e){var t=this;return new Promise(function(){var n=s((function*(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){yield t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}));return function(e,t){return n.apply(this,arguments)}}())}mergeDeep(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(e=>{var t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);var i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{var a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}class ui extends EventTarget{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];super(),this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=i,function(e,t,n){if(T(e))return jt(e,e,t,n);var i=Un(e,n)[J];if(!e[on]){var r=Object.getPrototypeOf(e),a=new Set([].concat(L(e),L(r)));a.delete("constructor"),a.delete(J),w(r,on,a)}ft();try{e[on].forEach((function(e){return i.make_(e,!t||!(e in t)||t[e])}))}finally{mt()}}(this),this._persistentStore=null,this._persistOn=r)}initialise(){var e=this;return s((function*(){return new Promise(function(){var t=s((function*(t,n){e._persistentStore=new ci(e.storageType),e._persistentStore.onUpdate(function(){var t=s((function*(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));return function(e){return t.apply(this,arguments)}}());var i=yield e._persistentStore.retrieve(e.storageKey,qt(e.state));e.state&&(e.state=i),e._startAutoSaving(e,e.storageKey),t(i)}));return function(e,n){return t.apply(this,arguments)}}())}))()}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return qt(this.state)}_startAutoSaving(e,t){var n=this;kt(s((function*(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))})))}_storeOnSave(e,t){var n=arguments,i=this;return s((function*(){var r=n.length>2&&void 0!==n[2]&&n[2];(i._persistOn||r)&&(yield i._persistentStore.store(t,qt(e.state),i.merge))}))()}}var li=1,di=2,hi=3,pi=4,gi=5,fi=6,mi=7,vi=8;class _i extends EventTarget{constructor(){super(),this.FRAMEKEY="texthelp-cfe-9828",this.SESSIONKEY="texthelp-cfe-9829",this._frameId=null,this._sessionId=null}getSessionId(){return s((function*(){return new Promise(((e,t)=>{"undefined"!=typeof window?chrome.runtime.sendMessage({command:"th-getWindowId"},(t=>{e(t.toString())})):e("serviceworkerId")}))}))()}initialise(){var e=this;return s((function*(){return new Promise(function(){var t=s((function*(t,n){e._frameId=_i.getGuid(),e._sessionId=yield e.getSessionId(),chrome.storage.onChanged.addListener(((t,n)=>{for(var i in t)i==e.FRAMEKEY&&function(){var n=JSON.parse(t[e.FRAMEKEY].newValue);switch(n.data.source={},n.data.source.sessionId=n.sessionId,n.data.source.frameId=n.frameId,n.type){case mi:"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case li:e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case hi:n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case di:chrome.storage.local.get(["activeFrame"],function(){var t=s((function*(t){t.activeFrame&&t.activeFrame===e._frameId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}));return function(e){return t.apply(this,arguments)}}());break;case pi:chrome.storage.local.get(["activeFrame"],function(){var t=s((function*(t){t.activeFrame&&t.activeFrame===e._frameId&&n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}));return function(e){return t.apply(this,arguments)}}());break;case gi:"undefined"!=typeof window&&window.self===window.top&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case fi:"undefined"!=typeof window&&window.self===window.top&&n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case vi:n.sessionId===e._sessionId&&n.frameId===e._frameId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}}()})),t({frameId:e._frameId,sessionId:e._sessionId})}));return function(e,n){return t.apply(this,arguments)}}())}))()}dispatchStorageEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._sessionId,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._frameId,a={name:e,time:Date.now(),type:t,data:n,sessionId:i,frameId:r};chrome.storage.local.set({[this.FRAMEKEY]:JSON.stringify(a)})}static getGuid(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}class yi{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class bi{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}const Si="sync",Ei="local",Ai="none";class Ti extends yi{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(bi.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=bi.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=bi.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=bi.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=bi.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=bi.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=bi.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}const Oi=Object.freeze({PREDICTION:"prediction",DICTIONARY:"dictionary",PICTUREDICTIONARY:"picturedictionary",PLAY:"play",PAUSE:"pause",STOP:"stop",SCREENSHOTREADER:"screenshotreader",AUDIOMAKER:"audiomaker",WEBSEARCH:"websearch",SCREENMASKING:"screenmasking",TALKANDTYPE:"talkandtype",TRANSLATOR:"translator",STUDYBLUE:"studyblue",STUDYPINK:"studypink",STUDYYELLOW:"studyyellow",STUDYGREEN:"studygreen",STUDYCLEAR:"studyclear",STUDYCOLLECT:"studycollect",VOCABLIST:"vocablist",VOICENOTE:"voicenote",CHECKIT:"checkit",PRACTICEREADINGALOUD:"practicereadingaloud",CLICKTOSPEAK:"clicktospeak",SIMPLIFY:"simplify"}),wi=Object.freeze({TOP:"docked-top",FLOAT:"float",SELECTOR:"selector"});Object.freeze({EN:"en",EN_US:"en_US",FR:"fr",ES:"es",PT:"pt",NL:"nl"}),Object.freeze({"https://docs.google.com/document/*https://assignments.google.com*":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.VOICENOTE,Oi.CHECKIT,Oi.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*edit":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.VOICENOTE,Oi.CHECKIT,Oi.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*preview*":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.VOICENOTE,Oi.CHECKIT,Oi.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*pub":{dock:wi.FLOAT,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*classroom.google.com":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.VOICENOTE,Oi.CHECKIT,Oi.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/presentation/*edit":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.VOICENOTE,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*edit":{dock:wi.FLOAT,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*startquiz":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,"settings","help","logo","optionsmenu","minimise","maximise","options-menuitem"]},"https://docs.google.com/forms/*viewform":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*formresponse":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/redir*":{dock:wi.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/edit.aspx*":{dock:wi.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*word-edit.officeapps.live.com":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/:w:/*":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/:o:/*":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/*doc.aspx*":{dock:wi.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]"],supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/*doc.aspx*.xls*":{dock:wi.FLOAT,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.SIMPLIFY,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*onenote.officeapps.live.com/o/onenoteframe.aspx":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://reading.texthelp.com/readwrite":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://fluency.texthelp.com/readwrite":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://newsela.com/":{dock:wi.FLOAT,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.SIMPLIFY,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://www.dogonews.com":{dock:wi.FLOAT,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.SIMPLIFY,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify.texthelp.com":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify-qa.texthelp.com":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify.dev.texthelp.com":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://epub.texthelp.com/":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-epub-qa.texthelp.com/":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://epub.dev.texthelp.com":{dock:wi.TOP,supported:[Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.instructure.com":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.SIMPLIFY,Oi.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.awinfosys.com":{dock:wi.TOP,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.SIMPLIFY,Oi.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},default:{dock:wi.FLOAT,supported:[Oi.PREDICTION,Oi.CLICKTOSPEAK,Oi.DICTIONARY,Oi.PICTUREDICTIONARY,Oi.PLAY,Oi.PAUSE,Oi.STOP,Oi.SCREENSHOTREADER,Oi.AUDIOMAKER,Oi.WEBSEARCH,Oi.SCREENMASKING,Oi.TALKANDTYPE,Oi.TRANSLATOR,Oi.STUDYBLUE,Oi.STUDYPINK,Oi.STUDYYELLOW,Oi.STUDYGREEN,Oi.STUDYCLEAR,Oi.STUDYCOLLECT,Oi.VOCABLIST,Oi.SIMPLIFY,Oi.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]}});const Ci=Object.freeze({GROUP:"group",DOMAIN:"domain",SINGLE:"single"}),Ii=Object.freeze({FREEMIUM:"freemium",PREMIUM:"premium",TRIAL:"trial"});const Ni=new class extends ui{constructor(){const e=new Date;e.setDate(e.getDate()-1);const t={audiomaker:!1,checkit:!1,dictionary:!1,studyclear:!1,picturedictionary:!1,play:!0,practicereadingaloud:!0,prediction:!1,screenmasking:!1,screenshotreader:!1,simplify:!1,talkandtype:!1,translator:!0,vocablist:!1,websearch:!1,studyyellow:!1,studygreen:!1,studyblue:!1,studypink:!1,studycollect:!1,pause:!0,stop:!0,clicktospeak:!0,voicenote:!1},n={lastupdated:void 0,licensetype:Ci.SINGLE,licensesubscription:Ii.FREEMIUM,expiry:e.toISOString().split("T")[0],authcode:void 0,features:t,meta:{}};super({license:{lastupdated:void 0,licensetype:Ci.SINGLE,licensesubscription:Ii.FREEMIUM,expiry:e.toISOString().split("T")[0],authcode:void 0,features:t,meta:{}},lastlicense:void 0},Ei,"th.rw4gc.license.store",!1,!0),this.defaultFeatures=t,this.defaultLicense=n}set license(e){let t=JSON.stringify(e,((e,t)=>"currentDateTime"===e||"lastUpdated"===e?"null":t));if(this.state.lastlicense&&this.state.lastlicense===t)return;this.state.lastlicense=t;let n=!1;void 0!==e.trial&&(n=e.trial);let i=!1;void 0!==e.unlimited&&(i=e.unlimited),e.licensesubscription=Ii.FREEMIUM,e.licensetype=Ci.FREEMIUM,e.daysleft>0&&!n?e.licensesubscription=Ii.PREMIUM:e.daysleft>0&&n&&(e.licensesubscription=Ii.TRIAL),i?e.licensetype=Ci.DOMAIN:"group"==e.licence_type.toLowerCase()&&(e.licensetype=Ii.GROUP),this.state.license=e,this._mapLicense(e)}set authcode(e){void 0!==e&&(this.state.license.authcode=e)}get nextDay(){const e=new Date,t=1e4*e.getFullYear()+100*e.getMonth()+e.getDate(),n=this.state.license.expiry;return 1e4*n.getFullYear()+100*n.getMonth()+n.getDate()!==t}get lastUpdate(){return this.state.license.lastupdated?this.state.license.lastupdated.toString().split("T")[0]:void 0}get licenseObject(){return e({},this.state.license)}resetLicense(){this.state.lastlicense=void 0,this.state.license=JSON.parse(JSON.stringify(this.defaultLicense))}_mapLicense(t){let n={"Check It":Oi.CHECKIT,Prediction:Oi.PREDICTION,Dictionary:Oi.DICTIONARY,"Picture Dictionary":Oi.PICTUREDICTIONARY,Play:Oi.PLAY,"Screenshot Reader":Oi.SCREENSHOTREADER,"Audio Maker":Oi.AUDIOMAKER,"Screen Masking":Oi.SCREENMASKING,"Web Search":Oi.WEBSEARCH,"Talk&Type":Oi.TALKANDTYPE,Translator:Oi.TRANSLATOR,"Vocabulary List":Oi.VOCABLIST,"Voice Note":Oi.VOICENOTE,"Simplify Page":Oi.SIMPLIFY,"Practice Reading Aloud":Oi.PRACTICEREADINGALOUD,"Erase Highlights":Oi.STUDYCLEAR},i=t.features,r=Object.keys(i).reduce(((e,t)=>(void 0!==n[t]&&(e[n[t]]=i[t]),e)),{}),a=e({},this.defaultFeatures,r);void 0===i.Highlights&&(i.Highlights=!1),a[Oi.STUDYYELLOW]=i.Highlights,a[Oi.STUDYGREEN]=i.Highlights,a[Oi.STUDYBLUE]=i.Highlights,a[Oi.STUDYPINK]=i.Highlights,a[Oi.STUDYCOLLECT]=i.Highlights,a[Oi.STUDYCLEAR]=i.Highlights,void 0===i.Play&&(i.Play=!0),a[Oi.PAUSE]=i.Play,a[Oi.STOP]=i.Play,a[Oi.CLICKTOSPEAK]=i.Play,void 0===i["Practice Reading Aloud"]&&(a[Oi.PRACTICEREADINGALOUD]=!0),void 0===i.Translator&&(a[Oi.TRANSLATOR]=!0),this.state.license.features=JSON.parse(JSON.stringify(a))}};function Ri(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Di={};function Li(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:Di}var ki=Object.assign,Pi=Object.getOwnPropertyDescriptor,Ui=Object.defineProperty,xi=Object.prototype,Mi=[];Object.freeze(Mi);var ji={};Object.freeze(ji);var Yi="undefined"!=typeof Proxy,Gi=Object.toString();function Fi(){Yi||Ri("Proxy not available")}function Bi(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Vi=function(){};function Ki(e){return"function"==typeof e}function Hi(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function Wi(e){return null!==e&&"object"==typeof e}function Ji(e){if(!Wi(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===Gi}function zi(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function qi(e,t,n){Ui(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function $i(e,t,n){Ui(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Xi(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return Wi(e)&&!0===e[n]}}function Qi(e){return e instanceof Map}function Zi(e){return e instanceof Set}var er=void 0!==Object.getOwnPropertySymbols;var tr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:er?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function nr(e){return null===e?null:"object"==typeof e?""+e:e}function ir(e,t){return xi.hasOwnProperty.call(e,t)}var rr=Object.getOwnPropertyDescriptors||function(e){var t={};return tr(e).forEach((function(n){t[n]=Pi(e,n)})),t};function ar(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sr(e,t,n){return t&&ar(e.prototype,t),n&&ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function or(){return or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},or.apply(this,arguments)}function cr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ur(e,t)}function ur(e,t){return ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ur(e,t)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function hr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var pr=Symbol("mobx-stored-annotations");function gr(e){return Object.assign((function(t,n){fr(t,n,e)}),e)}function fr(e,t,n){ir(e,pr)||qi(e,pr,or({},e[pr])),function(e){return e.annotationType_===Ar}(n)||(e[pr][t]=n)}var mr=Symbol("mobx administration"),vr=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=va.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Ga(this)},t.reportChanged=function(){ja(),Fa(this),Ya()},t.toString=function(){return this.name_},e}(),_r=Xi("Atom",vr);function yr(e,t,n){void 0===t&&(t=Vi),void 0===n&&(n=Vi);var i,r=new vr(e);return t!==Vi&&ss(rs,r,t,i),n!==Vi&&as(r,n),r}var br={identity:function(e,t){return e===t},structural:function(e,t){return So(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return So(e,t,1)}};function Sr(e,t,n){return fs(e)?e:Array.isArray(e)?ea.array(e,{name:n}):Ji(e)?ea.object(e,void 0,{name:n}):Qi(e)?ea.map(e,{name:n}):Zi(e)?ea.set(e,{name:n}):"function"!=typeof e||ts(e)||gs(e)?e:zi(e)?hs(e):es(n,e)}function Er(e){return e}var Ar="override";function Tr(e,t){return{annotationType_:e,options_:t,make_:Or,extend_:wr}}function Or(e,t,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(e,t,n,!1)?0:1;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(ts(n.value))return 1;var a=Cr(e,this,t,n,!1);return Ui(i,t,a),2}function wr(e,t,n,i){var r=Cr(e,this,t,n);return e.defineProperty_(t,r,i)}function Cr(e,t,n,i,r){var a,s,o,c,u,l,d,h;void 0===r&&(r=Pa.safeDescriptors),h=i,t.annotationType_,h.value;var p,g=i.value;null!=(a=t.options_)&&a.bound&&(g=g.bind(null!=(p=e.proxy_)?p:e.target_));return{value:la(null!=(s=null==(o=t.options_)?void 0:o.name)?s:n.toString(),g,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!r||e.isPlainObject_,enumerable:!1,writable:!r}}function Ir(e,t){return{annotationType_:e,options_:t,make_:Nr,extend_:Rr}}function Nr(e,t,n,i){var r;if(i===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!ir(e.target_,t)||!gs(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(gs(n.value))return 1;var a=Dr(e,this,t,n,!1,!1);return Ui(i,t,a),2}function Rr(e,t,n,i){var r,a=Dr(e,this,t,n,null==(r=this.options_)?void 0:r.bound);return e.defineProperty_(t,a,i)}function Dr(e,t,n,i,r,a){var s;void 0===a&&(a=Pa.safeDescriptors),s=i,t.annotationType_,s.value;var o,c=i.value;(gs(c)||(c=hs(c)),r)&&((c=c.bind(null!=(o=e.proxy_)?o:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function Lr(e,t){return{annotationType_:e,options_:t,make_:kr,extend_:Pr}}function kr(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Pr(e,t,n,i){var r;return r=n,this.annotationType_,r.get,e.defineComputedProperty_(t,or({},this.options_,{get:n.get,set:n.set}),i)}function Ur(e,t){return{annotationType_:e,options_:t,make_:xr,extend_:Mr}}function xr(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Mr(e,t,n,i){var r,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(r=null==(a=this.options_)?void 0:a.enhancer)?r:Sr,i)}var jr=Yr();function Yr(e){return{annotationType_:"true",options_:e,make_:Gr,extend_:Fr}}function Gr(e,t,n,i){var r,a,s,o;if(n.get)return ra.make_(e,t,n,i);if(n.set){var c=la(t.toString(),n.set);return i===e.target_?null===e.defineProperty_(t,{configurable:!Pa.safeDescriptors||e.isPlainObject_,set:c})?0:2:(Ui(i,t,{configurable:!0,set:c}),2)}if(i!==e.target_&&"function"==typeof n.value)return zi(n.value)?(null!=(o=this.options_)&&o.autoBind?hs.bound:hs).make_(e,t,n,i):(null!=(s=this.options_)&&s.autoBind?es.bound:es).make_(e,t,n,i);var u,l=!1===(null==(r=this.options_)?void 0:r.deep)?ea.ref:ea;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,i)}function Fr(e,t,n,i){var r,a,s;if(n.get)return ra.extend_(e,t,n,i);if(n.set)return e.defineProperty_(t,{configurable:!Pa.safeDescriptors||e.isPlainObject_,set:la(t.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?ea.ref:ea).extend_(e,t,n,i)}var Br={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Vr(e){return e||Br}Object.freeze(Br);var Kr=Ur("observable"),Hr=Ur("observable.ref",{enhancer:Er}),Wr=Ur("observable.shallow",{enhancer:function(e,t,n){return null==e||so(e)||Vs(e)||$s(e)||Zs(e)?e:Array.isArray(e)?ea.array(e,{name:n,deep:!1}):Ji(e)?ea.object(e,void 0,{name:n,deep:!1}):Qi(e)?ea.map(e,{name:n,deep:!1}):Zi(e)?ea.set(e,{name:n,deep:!1}):void 0}}),Jr=Ur("observable.struct",{enhancer:function(e,t){return So(e,t)?t:e}}),zr=gr(Kr);function qr(e){return!0===e.deep?Sr:!1===e.deep?Er:(t=e.defaultDecorator)&&null!=(n=null==(i=t.options_)?void 0:i.enhancer)?n:Sr;var t,n,i}function $r(e,t,n){if(!Hi(t))return fs(e)?e:Ji(e)?ea.object(e,t,n):Array.isArray(e)?ea.array(e,t):Qi(e)?ea.map(e,t):Zi(e)?ea.set(e,t):"object"==typeof e&&null!==e?e:ea.box(e,t);fr(e,t,Kr)}Object.assign($r,zr);var Xr,Qr,Zr={box:function(e,t){var n=Vr(t);return new fa(e,qr(n),n.name,!0,n.equals)},array:function(e,t){var n=Vr(t);return(!1===Pa.useProxies||!1===n.proxy?mo:Ps)(e,qr(n),n.name)},map:function(e,t){var n=Vr(t);return new qs(e,qr(n),n.name)},set:function(e,t){var n=Vr(t);return new Qs(e,qr(n),n.name)},object:function(e,t,n){return os(!1===Pa.useProxies||!1===(null==n?void 0:n.proxy)?io({},n):function(e,t){var n,i;return Fi(),e=io(e,t),null!=(i=(n=e[mr]).proxy_)?i:n.proxy_=new Proxy(e,Es)}({},n),e,t)},ref:gr(Hr),shallow:gr(Wr),deep:zr,struct:gr(Jr)},ea=ki($r,Zr),ta="computed",na=Lr(ta),ia=Lr("computed.struct",{equals:br.structural}),ra=function(e,t){if(Hi(t))return fr(e,t,na);if(Ji(e))return gr(Lr(ta,e));var n=Ji(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new ya(n)};Object.assign(ra,na),ra.struct=gr(ia);var aa,sa=0,oa=1,ca=null!=(Xr=null==(Qr=Pi((function(){}),"name"))?void 0:Qr.configurable)&&Xr,ua={value:"action",configurable:!0,writable:!1,enumerable:!1};function la(e,t,n,i){function r(){return da(e,n,t,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,ca&&(ua.value=e,Object.defineProperty(r,"name",ua)),r}function da(e,t,n,i,r){var a=function(e,t,n,i){var r=!1,a=0,s=Pa.trackingDerivation,o=!t||!s;ja();var c=Pa.allowStateChanges;o&&(Ca(),c=ha(!0));var u=Na(!0),l={runAsAction_:o,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:r,startTime_:a,actionId_:oa++,parentActionId_:sa};return sa=l.actionId_,l}(0,t);try{return n.apply(i,r)}catch(e){throw a.error_=e,e}finally{!function(e){sa!==e.actionId_&&Ri(30);sa=e.parentActionId_,void 0!==e.error_&&(Pa.suppressReactionErrors=!0);pa(e.prevAllowStateChanges_),Ra(e.prevAllowStateReads_),Ya(),e.runAsAction_&&Ia(e.prevDerivation_);Pa.suppressReactionErrors=!1}(a)}}function ha(e){var t=Pa.allowStateChanges;return Pa.allowStateChanges=e,t}function pa(e){Pa.allowStateChanges=e}aa=Symbol.toPrimitive;var ga,fa=function(e){function t(t,n,i,r,a){var s;return void 0===i&&(i="ObservableValue"),void 0===a&&(a=br.default),(s=e.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=a,s.value_=n(t,void 0,i),s}cr(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==Pa.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(As(this)){var t=Os(this,{object:this,type:Ds,newValue:e});if(!t)return Pa.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Pa.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),ws(this)&&Is(this,{type:Ds,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Ts(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Ds,newValue:this.value_,oldValue:void 0}),Cs(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return nr(this.get())},n[aa]=function(){return this.valueOf()},t}(vr),ma=Xi("ObservableValue",fa);ga=Symbol.toPrimitive;var va,_a,ya=function(){function e(e){this.dependenciesState_=va.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=va.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Sa(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=_a.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||Ri(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=la("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?br.structural:br.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==va.UP_TO_DATE_)return;e.lowestObserverState_=va.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===va.UP_TO_DATE_&&(e.dependenciesState_=va.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&Ri(32,this.name_,this.derivation),0!==Pa.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ga(this),Aa(this)){var e=Pa.trackingContext;this.keepAlive_&&!e&&(Pa.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===va.STALE_)return;e.lowestObserverState_=va.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===va.POSSIBLY_STALE_?t.dependenciesState_=va.STALE_:t.dependenciesState_===va.UP_TO_DATE_&&(e.lowestObserverState_=va.UP_TO_DATE_)}))}(this),Pa.trackingContext=e}}else Aa(this)&&(this.warnAboutUntrackedRead_(),ja(),this.value_=this.computeValue_(!1),Ya());var t=this.value_;if(Ea(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&Ri(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else Ri(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===va.NOT_TRACKING_,n=this.computeValue_(!0),i=t||Ea(e)||Ea(n)||!this.equals_(e,n);return i&&(this.value_=n),i},t.computeValue_=function(e){this.isComputing_=!0;var t,n=ha(!1);if(e)t=Ta(this,this.derivation,this.scope_);else if(!0===Pa.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Sa(e)}return pa(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Oa(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,i=!0,r=void 0;return ns((function(){var a=n.get();if(!i||t){var s=Ca();e({observableKind:"computed",debugObjectName:n.name_,type:Ds,object:n,newValue:a,oldValue:r}),Ia(s)}i=!1,r=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return nr(this.get())},t[ga]=function(){return this.valueOf()},e}(),ba=Xi("ComputedValue",ya);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(va||(va={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(_a||(_a={}));var Sa=function(e){this.cause=void 0,this.cause=e};function Ea(e){return e instanceof Sa}function Aa(e){switch(e.dependenciesState_){case va.UP_TO_DATE_:return!1;case va.NOT_TRACKING_:case va.STALE_:return!0;case va.POSSIBLY_STALE_:for(var t=Na(!0),n=Ca(),i=e.observing_,r=i.length,a=0;a<r;a++){var s=i[a];if(ba(s)){if(Pa.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return Ia(n),Ra(t),!0}if(e.dependenciesState_===va.STALE_)return Ia(n),Ra(t),!0}}return Da(e),Ia(n),Ra(t),!1}}function Ta(e,t,n){var i=Na(!0);Da(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++Pa.runId;var r,a=Pa.trackingDerivation;if(Pa.trackingDerivation=e,Pa.inBatch++,!0===Pa.disableErrorBoundaries)r=t.call(n);else try{r=t.call(n)}catch(e){r=new Sa(e)}return Pa.inBatch--,Pa.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,i=va.UP_TO_DATE_,r=0,a=e.unboundDepsCount_,s=0;s<a;s++){var o=n[s];0===o.diffValue_&&(o.diffValue_=1,r!==s&&(n[r]=o),r++),o.dependenciesState_>i&&(i=o.dependenciesState_)}n.length=r,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&xa(c,e),c.diffValue_=0}for(;r--;){var u=n[r];1===u.diffValue_&&(u.diffValue_=0,Ua(u,e))}i!==va.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}(e),Ra(i),r}function Oa(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)xa(t[n],e);e.dependenciesState_=va.NOT_TRACKING_}function wa(e){var t=Ca();try{return e()}finally{Ia(t)}}function Ca(){var e=Pa.trackingDerivation;return Pa.trackingDerivation=null,e}function Ia(e){Pa.trackingDerivation=e}function Na(e){var t=Pa.allowStateReads;return Pa.allowStateReads=e,t}function Ra(e){Pa.allowStateReads=e}function Da(e){if(e.dependenciesState_!==va.UP_TO_DATE_){e.dependenciesState_=va.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=va.UP_TO_DATE_}}var La=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ka=!0,Pa=function(){var e=Li();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(ka=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new La).version&&(ka=!1),ka?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new La):(setTimeout((function(){Ri(35)}),1),new La)}();function Ua(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function xa(e,t){e.observers_.delete(t),0===e.observers_.size&&Ma(e)}function Ma(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Pa.pendingUnobservations.push(e))}function ja(){Pa.inBatch++}function Ya(){if(0==--Pa.inBatch){Va();for(var e=Pa.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof ya&&n.suspend_())}Pa.pendingUnobservations=[]}}function Ga(e){var t=Pa.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Pa.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&Pa.inBatch>0&&Ma(e),!1)}function Fa(e){e.lowestObserverState_!==va.STALE_&&(e.lowestObserverState_=va.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===va.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=va.STALE_})))}var Ba=function(){function e(e,t,n,i){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=va.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=_a.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=i}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Pa.pendingReactions.push(this),Va())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ja(),this.isScheduled_=!1;var e=Pa.trackingContext;if(Pa.trackingContext=this,Aa(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Pa.trackingContext=e,Ya()}},t.track=function(e){if(!this.isDisposed_){ja(),this.isRunning_=!0;var t=Pa.trackingContext;Pa.trackingContext=this;var n=Ta(this,e,void 0);Pa.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Oa(this),Ea(n)&&this.reportExceptionInDerivation_(n.cause),Ya()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Pa.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Pa.suppressReactionErrors||console.error(n,e),Pa.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ja(),Oa(this),Ya()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[mr]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){Ri("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];"boolean"==typeof n[n.length-1]&&(e=n.pop());var r=ys(n);if(!r)return Ri("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");r.isTracing_===_a.NONE&&console.log("[mobx.trace] '"+r.name_+"' tracing enabled");r.isTracing_=e?_a.BREAK:_a.LOG}(this,e)},e}();function Va(){Pa.inBatch>0||Pa.isRunningReactions||function(e){e()}(Ka)}function Ka(){Pa.isRunningReactions=!0;for(var e=Pa.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}Pa.isRunningReactions=!1}var Ha=Xi("Reaction",Ba);var Wa="action",Ja="autoAction",za=Tr(Wa),qa=Tr("action.bound",{bound:!0}),$a=Tr(Ja,{autoAction:!0}),Xa=Tr("autoAction.bound",{autoAction:!0,bound:!0});function Qa(e){return function(t,n){return Ki(t)?la(t.name||"<unnamed action>",t,e):Ki(n)?la(t,n,e):Hi(n)?fr(t,n,e?$a:za):Hi(t)?gr(Tr(e?Ja:Wa,{name:t,autoAction:e})):void 0}}var Za=Qa(!1);Object.assign(Za,za);var es=Qa(!0);function ts(e){return Ki(e)&&!0===e.isMobxAction}function ns(e,t){var n,i;void 0===t&&(t=ji);var r,a=null!=(n=null==(i=t)?void 0:i.name)?n:"Autorun";if(!t.scheduler&&!t.delay)r=new Ba(a,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var s=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:is}(t),o=!1;r=new Ba(a,(function(){o||(o=!0,s((function(){o=!1,r.isDisposed_||r.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(r)}return r.schedule_(),r.getDisposer_()}Object.assign(es,$a),Za.bound=gr(qa),es.bound=gr(Xa);var is=function(e){return e()};var rs="onBO";function as(e,t,n){return ss("onBUO",e,t,n)}function ss(e,t,n,i){var r="function"==typeof i?vo(t,n):vo(t),a=Ki(i)?i:n,s=e+"L";return r[s]?r[s].add(a):r[s]=new Set([a]),function(){var e=r[s];e&&(e.delete(a),0===e.size&&delete r[s])}}function os(e,t,n,i){var r=rr(t),a=io(e,i)[mr];ja();try{tr(r).forEach((function(e){a.extend_(e,r[e],!n||(!(e in n)||n[e]))}))}finally{Ya()}return e}var cs=0;function us(){this.message="FLOW_CANCELLED"}us.prototype=Object.create(Error.prototype);var ls=Ir("flow"),ds=Ir("flow.bound",{bound:!0}),hs=Object.assign((function(e,t){if(Hi(t))return fr(e,t,ls);var n=e,i=n.name||"<unnamed flow>",r=function(){var e,t=this,r=arguments,a=++cs,s=Za(i+" - runid: "+a+" - init",n).apply(t,r),o=void 0,c=new Promise((function(t,n){var r=0;function c(e){var t;o=void 0;try{t=Za(i+" - runid: "+a+" - yield "+r++,s.next).call(s,e)}catch(e){return n(e)}l(t)}function u(e){var t;o=void 0;try{t=Za(i+" - runid: "+a+" - yield "+r++,s.throw).call(s,e)}catch(e){return n(e)}l(t)}function l(e){if(!Ki(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return c.cancel=Za(i+" - runid: "+a+" - cancel",(function(){try{o&&ps(o);var t=s.return(void 0),n=Promise.resolve(t.value);n.then(Vi,Vi),ps(n),e(new us)}catch(t){e(t)}})),c};return r.isMobXFlow=!0,r}),ls);function ps(e){Ki(e.cancel)&&e.cancel()}function gs(e){return!0===(null==e?void 0:e.isMobXFlow)}function fs(e){return function(e,t){return!!e&&(void 0!==t?!!so(e)&&e[mr].values_.has(t):so(e)||!!e[mr]||_r(e)||Ha(e)||ba(e))}(e)}function ms(e,t,n){return e.set(t,n),n}function vs(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!fs(e))return e;if(ma(e)||ba(e))return vs(e.get(),t);if(t.has(e))return t.get(e);if(Vs(e)){var n=ms(t,e,new Array(e.length));return e.forEach((function(e,i){n[i]=vs(e,t)})),n}if(Zs(e)){var i=ms(t,e,new Set);return e.forEach((function(e){i.add(vs(e,t))})),i}if($s(e)){var r=ms(t,e,new Map);return e.forEach((function(e,n){r.set(n,vs(e,t))})),r}var a=ms(t,e,{});return function(e){if(so(e))return e[mr].ownKeys_();Ri(38)}(e).forEach((function(n){xi.propertyIsEnumerable.call(e,n)&&(a[n]=vs(e[n],t))})),a}function _s(e,t){return vs(e,new Map)}function ys(e){switch(e.length){case 0:return Pa.trackingDerivation;case 1:return vo(e[0]);case 2:return vo(e[0],e[1])}}function bs(e,t){void 0===t&&(t=void 0),ja();try{return e.apply(t)}finally{Ya()}}function Ss(e){return e[mr]}hs.bound=gr(ds);var Es={has:function(e,t){return Ss(e).has_(t)},get:function(e,t){return Ss(e).get_(t)},set:function(e,t,n){var i;return!!Hi(t)&&(null==(i=Ss(e).set_(t,n,!0))||i)},deleteProperty:function(e,t){var n;return!!Hi(t)&&(null==(n=Ss(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var i;return null==(i=Ss(e).defineProperty_(t,n))||i},ownKeys:function(e){return Ss(e).ownKeys_()},preventExtensions:function(e){Ri(13)}};function As(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Ts(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),Bi((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Os(e,t){var n=Ca();try{for(var i=[].concat(e.interceptors_||[]),r=0,a=i.length;r<a&&((t=i[r](t))&&!t.type&&Ri(14),t);r++);return t}finally{Ia(n)}}function ws(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Cs(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),Bi((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Is(e,t){var n=Ca(),i=e.changeListeners_;if(i){for(var r=0,a=(i=i.slice()).length;r<a;r++)i[r](t);Ia(n)}}var Ns=Symbol("mobx-keys");var Rs="splice",Ds="update",Ls={get:function(e,t){var n=e[mr];return t===mr?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?ir(Us,t)?Us[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var i=e[mr];return"length"===t&&i.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:i.set_(parseInt(t),n),!0},preventExtensions:function(){Ri(15)}},ks=function(){function e(e,t,n,i){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new vr(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Ts(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Cs(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&Ri("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&Ri(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&fo(e+t+1)},t.spliceWithArray_=function(e,t,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===n&&(n=Mi),As(this)){var a=Os(this,{object:this.proxy_,type:Rs,index:e,removedCount:t,added:n});if(!a)return Mi;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return i.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(r,s)}var o=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,o),this.dehanceValues_(o)},t.spliceItemsIntoValues_=function(e,t,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[e,t].concat(n));var r=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var o=0;o<a.length;o++)this.values_[e+n.length+o]=a[o];return r},t.notifyArrayChildUpdate_=function(e,t,n){var i=!this.owned_&&!1,r=ws(this),a=r||i?{observableKind:"array",object:this.proxy_,type:Ds,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),r&&Is(this,a)},t.notifyArraySplice_=function(e,t,n){var i=!this.owned_&&!1,r=ws(this),a=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Rs,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),r&&Is(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&Ri(17,e,n.length),e<n.length){this.atom_;var i=n[e];if(As(this)){var r=Os(this,{type:Ds,object:this.proxy_,index:e,newValue:t});if(!r)return;t=r.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else{for(var a=new Array(e+1-n.length),s=0;s<a.length-1;s++)a[s]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function Ps(e,t,n,i){void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),Fi();var r=new ks(n,t,i,!1);$i(r.values_,mr,r);var a=new Proxy(r.values_,Ls);if(r.proxy_=a,e&&e.length){var s=ha(!0);r.spliceWithArray_(0,0,e),pa(s)}return a}var Us={clear:function(){return this.splice(0)},replace:function(e){var t=this[mr];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this[mr];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,i)},spliceWithArray:function(e,t,n){return this[mr].spliceWithArray_(e,t,n)},push:function(){for(var e=this[mr],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[mr].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[mr],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Pa.trackingDerivation&&Ri(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Pa.trackingDerivation&&Ri(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[mr],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function xs(e,t){"function"==typeof Array.prototype[e]&&(Us[e]=t(e))}function Ms(e){return function(){var t=this[mr];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function js(e){return function(t,n){var i=this,r=this[mr];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[e]((function(e,r){return t.call(n,e,r,i)}))}}function Ys(e){return function(){var t=this,n=this[mr];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(e,n,i){return r(e,n,i,t)},i[e].apply(i,arguments)}}xs("concat",Ms),xs("flat",Ms),xs("includes",Ms),xs("indexOf",Ms),xs("join",Ms),xs("lastIndexOf",Ms),xs("slice",Ms),xs("toString",Ms),xs("toLocaleString",Ms),xs("every",js),xs("filter",js),xs("find",js),xs("findIndex",js),xs("flatMap",js),xs("forEach",js),xs("map",js),xs("some",js),xs("reduce",Ys),xs("reduceRight",Ys);var Gs,Fs,Bs=Xi("ObservableArrayAdministration",ks);function Vs(e){return Wi(e)&&Bs(e[mr])}var Ks={},Hs="add",Ws="delete";Gs=Symbol.iterator,Fs=Symbol.toStringTag;var Js,zs,qs=function(){function e(e,t,n){var i=this;void 0===t&&(t=Sr),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[mr]=Ks,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,Ki(Map)||Ri(18),this.keysAtom_=yr("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=ha(e);try{t()}finally{pa(n)}}(!0,(function(){i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Pa.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var i=n=new fa(this.has_(e),Er,"ObservableMap.key?",!1);this.hasMap_.set(e,i),as(i,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(As(this)){var i=Os(this,{type:n?Ds:Hs,object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,As(this))&&!Os(this,{type:Ws,object:this,name:e}))return!1;if(this.has_(e)){var n=ws(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:Ws,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return bs((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Is(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Pa.UNCHANGED){var i=ws(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Ds,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Is(this,r)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,bs((function(){var i,r=new fa(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,null==(i=n.hasMap_.get(e))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=ws(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Hs,object:this,name:e,newValue:t}:null;i&&Is(this,r)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return To({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:e.get(r)}}})},t.entries=function(){var e=this,t=this.keys();return To({next:function(){var n=t.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,e.get(r)]}}})},t[Gs]=function(){return this.entries()},t.forEach=function(e,t){for(var n,i=hr(this);!(n=i()).done;){var r=n.value,a=r[0],s=r[1];e.call(t,s,a,this)}},t.merge=function(e){var t=this;return $s(e)&&(e=new Map(e)),bs((function(){Ji(e)?function(e){var t=Object.keys(e);if(!er)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return xi.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],i=e[1];return t.set(n,i)})):Qi(e)?(e.constructor!==Map&&Ri(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&Ri(20,e)})),this},t.clear=function(){var e=this;bs((function(){wa((function(){for(var t,n=hr(e.keys());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.replace=function(e){var t=this;return bs((function(){for(var n,i=function(e){if(Qi(e)||$s(e))return e;if(Array.isArray(e))return new Map(e);if(Ji(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return Ri(21,e)}(e),r=new Map,a=!1,s=hr(t.data_.keys());!(n=s()).done;){var o=n.value;if(!i.has(o))if(t.delete(o))a=!0;else{var c=t.data_.get(o);r.set(o,c)}}for(var u,l=hr(i.entries());!(u=l()).done;){var d=u.value,h=d[0],p=d[1],g=t.data_.has(h);if(t.set(h,p),t.data_.has(h)){var f=t.data_.get(h);r.set(h,f),g||(a=!0)}}if(!a)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var m=t.data_.keys(),v=r.keys(),_=m.next(),y=v.next();!_.done;){if(_.value!==y.value){t.keysAtom_.reportChanged();break}_=m.next(),y=v.next()}t.data_=r})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Cs(this,e)},t.intercept_=function(e){return Ts(this,e)},sr(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Fs,get:function(){return"Map"}}]),e}(),$s=Xi("ObservableMap",qs);var Xs={};Js=Symbol.iterator,zs=Symbol.toStringTag;var Qs=function(){function e(e,t,n){void 0===t&&(t=Sr),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[mr]=Xs,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,Ki(Set)||Ri(22),this.atom_=yr(this.name_),this.enhancer_=function(e,i){return t(e,i,n)},e&&this.replace(e)}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;bs((function(){wa((function(){for(var t,n=hr(e.data_.values());!(t=n()).done;){var i=t.value;e.delete(i)}}))}))},t.forEach=function(e,t){for(var n,i=hr(this);!(n=i()).done;){var r=n.value;e.call(t,r,r,this)}},t.add=function(e){var t=this;if((this.atom_,As(this))&&!Os(this,{type:Hs,object:this,newValue:e}))return this;if(!this.has(e)){bs((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=ws(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Hs,object:this,newValue:e}:null;n&&Is(this,i)}return this},t.delete=function(e){var t=this;if(As(this)&&!Os(this,{type:Ws,object:this,oldValue:e}))return!1;if(this.has(e)){var n=ws(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Ws,object:this,oldValue:e}:null;return bs((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Is(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return To({next:function(){var i=e;return e+=1,i<n.length?{value:[t[i],n[i]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return To({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Zs(e)&&(e=new Set(e)),bs((function(){Array.isArray(e)||Zi(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&Ri("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Cs(this,e)},t.intercept_=function(e){return Ts(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Js]=function(){return this.values()},sr(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:zs,get:function(){return"Set"}}]),e}(),Zs=Xi("ObservableSet",Qs),eo=Object.create(null),to="remove",no=function(){function e(e,t,n,i){void 0===t&&(t=new Map),void 0===i&&(i=jr),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new vr("ObservableObject.keys"),this.isPlainObject_=Ji(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof ya)return n.set(t),!0;if(As(this)){var i=Os(this,{type:Ds,object:this.proxy_||this.target_,name:e,newValue:t});if(!i)return null;t=i.newValue}if((t=n.prepareNewValue_(t))!==Pa.UNCHANGED){var r=ws(this),a=r?{type:Ds,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Is(this,a)}return!0},t.get_=function(e){return Pa.trackingDerivation&&!ir(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),ir(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Pa.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new fa(e in this.target_,Er,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[pr])&&n[e])return;Ri(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==xi;){var r=Pi(i,e);if(r){var a=t.make_(this,e,r,i);if(0===a)return;if(1===a)break}i=Object.getPrototypeOf(i)}oo(this,t,e)}},t.extend_=function(e,t,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,i);var r=n.extend_(this,e,t,i);return r&&oo(this,n,e),r},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{ja();var i=this.delete_(e);if(!i)return i;if(As(this)){var r=Os(this,{object:this.proxy_||this.target_,name:e,type:Hs,newValue:t.value});if(!r)return null;var a=r.newValue;t.value!==a&&(t=or({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else Ui(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Ya()}return!0},t.defineObservableProperty_=function(e,t,n,i){void 0===i&&(i=!1);try{ja();var r=this.delete_(e);if(!r)return r;if(As(this)){var a=Os(this,{object:this.proxy_||this.target_,name:e,type:Hs,newValue:t});if(!a)return null;t=a.newValue}var s=ao(e),o={configurable:!Pa.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,e,o))return!1}else Ui(this.target_,e,o);var c=new fa(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{Ya()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{ja();var i=this.delete_(e);if(!i)return i;if(As(this))if(!Os(this,{object:this.proxy_||this.target_,name:e,type:Hs,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var r=ao(e),a={configurable:!Pa.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else Ui(this.target_,e,a);this.values_.set(e,new ya(t)),this.notifyPropertyAddition_(e,void 0)}finally{Ya()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!ir(this.target_,e))return!0;if(As(this)&&!Os(this,{object:this.proxy_||this.target_,name:e,type:to}))return null;try{var n,i;ja();var r,a=ws(this),s=this.values_.get(e),o=void 0;if(!s&&a)o=null==(r=Pi(this.target_,e))?void 0:r.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof fa&&(o=s.value_),Fa(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(e in this.target_),a){var c={type:to,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:e};0,a&&Is(this,c)}}finally{Ya()}return!0},t.observe_=function(e,t){return Cs(this,e)},t.intercept_=function(e){return Ts(this,e)},t.notifyPropertyAddition_=function(e,t){var n,i,r=ws(this);if(r){var a=r?{type:Hs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&Is(this,a)}null==(n=this.pendingKeys_)||null==(i=n.get(e))||i.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),tr(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function io(e,t){var n;if(ir(e,mr))return e;var i=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",r=new no(e,new Map,String(i),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Yr(e):void 0}(t));return qi(e,mr,r),e}var ro=Xi("ObservableObjectAdministration",no);function ao(e){return eo[e]||(eo[e]={get:function(){return this[mr].getObservablePropValue_(e)},set:function(t){return this[mr].setObservablePropValue_(e,t)}})}function so(e){return!!Wi(e)&&ro(e[mr])}function oo(e,t,n){var i;null==(i=e.target_[pr])||delete i[n]}var co=po(0),uo=0,lo=function(){};!function(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(lo,Array.prototype);var ho=function(e,t,n){function i(t,n,i,r){var a;void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),a=e.call(this)||this;var s=new ks(i,n,r,!0);if(s.proxy_=lr(a),$i(lr(a),mr,s),t&&t.length){var o=ha(!0);a.spliceWithArray(0,0,t),pa(o)}return Object.defineProperty(lr(a),"0",co),a}cr(i,e);var r=i.prototype;return r.concat=function(){this[mr].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Vs(e)?e.slice():e})))},r[n]=function(){var e=this,t=0;return To({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},sr(i,[{key:"length",get:function(){return this[mr].getArrayLength_()},set:function(e){this[mr].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),i}(lo,Symbol.toStringTag,Symbol.iterator);function po(e){return{enumerable:!1,configurable:!0,get:function(){return this[mr].get_(e)},set:function(t){this[mr].set_(e,t)}}}function go(e){Ui(ho.prototype,""+e,po(e))}function fo(e){if(e>uo){for(var t=uo;t<e+100;t++)go(t);uo=e}}function mo(e,t,n){return new ho(e,t,n)}function vo(e,t){if("object"==typeof e&&null!==e){if(Vs(e))return void 0!==t&&Ri(23),e[mr].atom_;if(Zs(e))return e[mr];if($s(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||Ri(25,t,yo(e)),n}if(so(e)){if(!t)return Ri(26);var i=e[mr].values_.get(t);return i||Ri(27,t,yo(e)),i}if(_r(e)||ba(e)||Ha(e))return e}else if(Ki(e)&&Ha(e[mr]))return e[mr];Ri(28)}function _o(e,t){return e||Ri(29),void 0!==t?_o(vo(e,t)):_r(e)||ba(e)||Ha(e)||$s(e)||Zs(e)?e:e[mr]?e[mr]:void Ri(24,e)}function yo(e,t){var n;if(void 0!==t)n=vo(e,t);else{if(ts(e))return e.name;n=so(e)||$s(e)||Zs(e)?_o(e):vo(e)}return n.name_}Object.entries(Us).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&qi(ho.prototype,t,n)})),fo(1e3);var bo=xi.toString;function So(e,t,n){return void 0===n&&(n=-1),Eo(e,t,n)}function Eo(e,t,n,i,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var s=bo.call(e);if(s!==bo.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Ao(e),t=Ao(t);var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(Ki(c)&&c instanceof c&&Ki(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var l=(i=i||[]).length;l--;)if(i[l]===e)return r[l]===t;if(i.push(e),r.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!Eo(e[l],t[l],n-1,i,r))return!1}else{var d,h=Object.keys(e);if(l=h.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!ir(t,d=h[l])||!Eo(e[d],t[d],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function Ao(e){return Vs(e)?e.slice():Qi(e)||$s(e)||Zi(e)||Zs(e)?Array.from(e.entries()):e}function To(e){return e[Symbol.iterator]=Oo,e}function Oo(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===Li()[e]&&Ri("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:yo},$mobx:mr});class wo extends EventTarget{constructor(e={},t=Ei,n=null,i=!0,r=!0){super(),this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=i,function(e,t,n){if(Ji(e))return os(e,e,t,n);var i=io(e,n)[mr];if(!e[Ns]){var r=Object.getPrototypeOf(e),a=new Set([].concat(tr(e),tr(r)));a.delete("constructor"),a.delete(mr),qi(r,Ns,a)}ja();try{e[Ns].forEach((function(e){return i.make_(e,!t||!(e in t)||t[e])}))}finally{Ya()}}(this),this._persistentStore=null,this._persistOn=r)}async initialise(){var e=this;return new Promise((async function(t,n){e._persistentStore=new Ti(e.storageType),e._persistentStore.onUpdate((async function(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));let i=await e._persistentStore.retrieve(e.storageKey,_s(e.state));e.state&&(e.state=i),e._startAutoSaving(e,e.storageKey),t(i)}))}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return _s(this.state)}_startAutoSaving(e,t){var n=this;ns((async function(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))}))}async _storeOnSave(e,t,n=!1){(this._persistOn||n)&&await this._persistentStore.store(t,_s(e.state),this.merge)}}const Co=new class extends wo{constructor(){const e={audiomaker:!0,checkit:!0,dictionary:!0,studyclear:!0,picturedictionary:!0,play:!0,practicereadingaloud:!0,prediction:!0,screenmasking:!0,screenshotreader:!0,simplify:!0,talkandtype:!0,translator:!0,vocablist:!0,websearch:!0,studyyellow:!0,studygreen:!0,studyblue:!0,studypink:!0,studycollect:!0,pause:!0,stop:!0,clicktospeak:!0,voicenote:!0};super({features:e},Ei,"th.rw4gc.datadesk.store"),this.defaultFeatures=e}set features(e){this._mapFeatures(e)}resetFeatures(){this.state.features=this.defaultFeatures}_mapFeatures(e){let t={"Check It":Oi.CHECKIT,Prediction:Oi.PREDICTION,Dictionary:Oi.DICTIONARY,"Picture Dictionary":Oi.PICTUREDICTIONARY,"Hover Speech":Oi.CLICKTOSPEAK,Play:Oi.PLAY,"Screenshot Reader":Oi.SCREENSHOTREADER,"Audio Maker":Oi.AUDIOMAKER,"Screen Masking":Oi.SCREENMASKING,"Web Search":Oi.WEBSEARCH,"Talk&Type":Oi.TALKANDTYPE,Translator:Oi.TRANSLATOR,"Vocabulary List":Oi.VOCABLIST,"Simplify Page":Oi.SIMPLIFY,"Practice Reading Aloud":Oi.PRACTICEREADINGALOUD,"Erase Highlights":Oi.STUDYCLEAR,"Voice Note":Oi.VOICENOTE},n=JSON.parse(JSON.stringify(this.defaultFeatures)),i=Object.keys(e).reduce(((n,i)=>(void 0!==t[i]&&(n[t[i]]=this._parseBoolean(e[i])),n)),{});Object.keys(i).forEach((e=>{n[e]=i[e]}));let r=!1;r=void 0===e.Highlights||this._parseBoolean(e.Highlights),n[Oi.STUDYYELLOW]=r,n[Oi.STUDYGREEN]=r,n[Oi.STUDYBLUE]=r,n[Oi.STUDYPINK]=r,n[Oi.STUDYCOLLECT]=r,n[Oi.STUDYCLEAR]=r,r=void 0===e.Play||this._parseBoolean(e.Play),n[Oi.PAUSE]=r,n[Oi.STOP]=r,this.state.features=n}_parseBoolean(e){switch(e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}};const Io=new class extends wo{constructor(){super({licenseType:"Default"},Ei,"th.rw4gc.Application.store")}setLicenseType(e){this.state.licenseType=e}},No="color",Ro="position";const Do=new class extends wo{constructor(){let t={toolbar:{buttons:{},docked:!1,showMenu:!1},features:{},dialogs:{searchword:"",dictionary:{open:!1},picturedictionary:{open:!1},translator:{open:!1},settingsdialog:{open:!1},prediction:{open:!1}},popups:{highlights:{visible:!1,sort:No,colors:{blue:!0,green:!0,yellow:!0,pink:!0},error:!1,errorTitle:"",errorMessage:"",timerShow:!1,timerTitle:"",timerMessage:"",timerLength:0},vocab:{visible:!1,colors:{blue:!0,green:!0,yellow:!0,pink:!0},error:!1,errorTitle:"",errorMessage:"",timerShow:!1,timerTitle:"",timerMessage:"",timerLength:0},audiomaker:{visible:!1,status:0,error:!1,errorTitle:"",errorMessage:""}}};const n=({name:n,enabled:i=!0,toggled:r=!1,displayed:a=!1})=>{t.toolbar.buttons=e({},t.toolbar.buttons,(({name:e,enabled:t=!0,toggled:n=!1,displayed:i=!1,policyEnabled:r=!0})=>({[e]:{enabled:t,toggled:n,displayed:i,policyEnabled:r}}))({name:n,enabled:i,toggled:r,displayed:a})),t.features=e({},t.features,(({name:e,enabled:t=!1})=>({[e]:t}))({name:n,enabled:i}))};n({name:Oi.CHECKIT}),n({name:Oi.PREDICTION}),n({name:Oi.CLICKTOSPEAK}),n({name:Oi.DICTIONARY}),n({name:Oi.PICTUREDICTIONARY}),n({name:Oi.PLAY}),n({name:Oi.PAUSE}),n({name:Oi.STOP}),n({name:Oi.SCREENSHOTREADER}),n({name:Oi.AUDIOMAKER}),n({name:Oi.WEBSEARCH}),n({name:Oi.SCREENMASKING}),n({name:Oi.TALKANDTYPE}),n({name:Oi.TRANSLATOR}),n({name:Oi.STUDYYELLOW}),n({name:Oi.STUDYGREEN}),n({name:Oi.STUDYBLUE}),n({name:Oi.STUDYPINK}),n({name:Oi.STUDYCLEAR}),n({name:Oi.STUDYCOLLECT}),n({name:Oi.VOCABLIST}),n({name:Oi.VOICENOTE}),n({name:Oi.SIMPLIFY}),n({name:Oi.PRACTICEREADINGALOUD}),super(t,Ai,"th.rw4gc.toolbarpage.store"),this.applyFeatureSetToButtons()}setSpeaking(e){const t=({name:e,enabled:t=!0})=>{let n=t;void 0!==this.state.features[e]&&(n=t&&this.state.features[e]),this.state.toolbar.buttons[e].enabled=n};let n=!e;t({name:Oi.CHECKIT,enabled:n}),t({name:Oi.PREDICTION,enabled:n}),t({name:Oi.DICTIONARY,enabled:n}),t({name:Oi.PICTUREDICTIONARY,enabled:n}),t({name:Oi.PLAY,enabled:n}),t({name:Oi.SCREENSHOTREADER,enabled:n}),t({name:Oi.AUDIOMAKER,enabled:n}),t({name:Oi.SCREENMASKING,enabled:n}),t({name:Oi.WEBSEARCH,enabled:n}),t({name:Oi.TALKANDTYPE,enabled:n}),t({name:Oi.TRANSLATOR,enabled:n}),t({name:Oi.STUDYYELLOW,enabled:n}),t({name:Oi.STUDYGREEN,enabled:n}),t({name:Oi.STUDYBLUE,enabled:n}),t({name:Oi.STUDYPINK,enabled:n}),t({name:Oi.STUDYCLEAR,enabled:n}),t({name:Oi.STUDYCOLLECT,enabled:n}),t({name:Oi.VOCABLIST,enabled:n}),t({name:Oi.VOICENOTE,enabled:n}),t({name:Oi.SIMPLIFY,enabled:n}),t({name:Oi.PRACTICEREADINGALOUD,enabled:n})}setFeatures(e){let t={"Check It":Oi.CHECKIT,Prediction:Oi.PREDICTION,Dictionary:Oi.DICTIONARY,"Picture Dictionary":Oi.PICTUREDICTIONARY,Play:Oi.PLAY,"Screenshot Reader":Oi.SCREENSHOTREADER,"Audio Maker":Oi.AUDIOMAKER,"Screen Masking":Oi.SCREENMASKING,"Web Search":Oi.WEBSEARCH,"Talk&Type":Oi.TALKANDTYPE,Translator:Oi.TRANSLATOR,"Vocabulary List":Oi.VOCABLIST,"Voice Note":Oi.VOICENOTE,"Simplify Page":Oi.SIMPLIFY,"Practice Reading Aloud":Oi.PRACTICEREADINGALOUD,"Erase Highlights":Oi.STUDYCLEAR},n=Object.keys(e).reduce(((n,i)=>(void 0!==t[i]&&(n[t[i]]=e[i]),n)),{});void 0===e.Highlights&&(e.Highlights=!1),n[Oi.STUDYYELLOW]=e.Highlights,n[Oi.STUDYGREEN]=e.Highlights,n[Oi.STUDYBLUE]=e.Highlights,n[Oi.STUDYPINK]=e.Highlights,n[Oi.STUDYCOLLECT]=e.Highlights,n[Oi.STUDYCLEAR]=e.Highlights,void 0===e.Play&&(e.Play=!1),n[Oi.PAUSE]=e.Play,n[Oi.STOP]=e.Play,n[Oi.CLICKTOSPEAK]=e.Play,this.state.features=JSON.parse(JSON.stringify(n)),this.applyFeatureSetToButtons()}applyFeatureSetToButtons(){const e=e=>{let t=this.state.toolbar.buttons[e].enabled;t=void 0!==this.state.features[e]&&(t&&this.state.features[e]),this.setButtonEnabled(e,t)};Object.keys(this.state.toolbar.buttons).forEach((t=>{e(t)}))}setButtonDisplayed(e,t){this.state.toolbar.buttons[e].displayed=t}setButtonPolicyEnabled(e,t){this.state.toolbar.buttons[e].policyEnabled=t}setButtonEnabled(e,t){this.state.toolbar.buttons[e].enabled=t}setButtonToggled(e,t){return void 0!==t?(this.state.toolbar.buttons[e].toggled=t,this.state.toolbar.buttons[e].toggled):(this.state.toolbar.buttons[e].toggled=!this.state.toolbar.buttons[e].toggled,this.state.toolbar.buttons[e].toggled)}setToolbarDocked(e){this.state.toolbar.docked=e}setToolbarMenuShow(e){this.state.toolbar.showMenu=e}showDictionary(e){this.state.dialogs.dictionary.open=e}showPictureDictionary(e){this.state.dialogs.picturedictionary.open=e}showTranslator(e){this.state.dialogs.translator.open=e}showSettingsDialog(e){this.state.dialogs.settingsdialog.open=e}showPrediction(e){this.state.dialogs.prediction.open=e}setSearchWord(e){this.state.dialogs.searchword=e}displayCollectDialog(e,t){this.state.popups[e].visible=t}displayAudioMakerDialog(e){this.updateAudioMakerProgress(0),this.state.popups.audiomaker.visible=e,this.setButtonEnabled(Oi.AUDIOMAKER,!e)}updateAudioMakerProgress(e){this.state.popups.audiomaker.status=e}displayErrorInfoTab(e,t=!0,n="",i=""){try{this.state.popups[e].error=t,this.state.popups[e].errorTitle=n,this.state.popups[e].errorMessage=i}catch(e){console.log("infoType not found")}}displayTimerInfoTab(e,t=!0,n=10,i="",r=""){try{this.state.popups[e].timerShow=t,this.state.popups[e].timerTitle=i,this.state.popups[e].timerMessage=r,this.state.popups[e].timerLength=n,console.log(this.state.popups)}catch(e){console.log("infoType not found")}}setHighlightSort(e){switch(e){case"color":this.state.popups.highlights.sort!=No&&(this.state.popups.highlights.sort=No);break;case"position":this.state.popups.highlights.sort!=Ro&&(this.state.popups.highlights.sort=Ro)}}setCollectionColor(e,t,n){this.state.popups[e].colors[t]=n}displayCollectVocab(e){this.state.popups.vocab.visible=e}sortOptionChecked(e){return e===this.state.popups.highlights.sort}toogleClickAndSpeak(){}};const Lo=new class extends wo{constructor(){super({token:""},Si,"th.rw4gc.token.store")}setToken(e){this.state.token=e}};const ko=new class extends wo{constructor(){const e={activeSettingsTab:"settings_speech",speech:{voice:"Ava",speed:50,reading:!0,speakAsIType:{onEachWord:!1,onEachSentence:!1},translation:"es"},prediction:{numberOfResults:10,general:{followCursor:!0,predictAhead:!0,predictAheadPolicy:!0,predictOnHover:!1},fontSize:"15"},checkIt:{dictionary:[],readonhover:!1},screenMasking:{backgroundColor:"#000000",readingLightColor:"#ffffff",backgroundOpacity:50,readingLightOpacity:50,readingLightHeight:200,readingLight:!0},language:{language:"en_GB",features:"en_GB"},features:[{name:"checkit",key:"settings_features_checkit",enabled:!0,dragging:!1,hidden:!1},{name:"prediction",key:"settings_features_prediction",enabled:!0,dragging:!1,hidden:!1},{name:"clicktospeak",key:"settings_features_hover_speech",enabled:!0,dragging:!1,hidden:!1},{name:"dictionary",key:"settings_features_dictionary",enabled:!0,dragging:!1,hidden:!1},{name:"picturedictionary",key:"settings_features_picture_dictionary",enabled:!0,dragging:!1,hidden:!1},{name:"play",key:"settings_features_play",enabled:!0,dragging:!1,hidden:!1},{name:"pause",key:"settings_features_pause",enabled:!0,dragging:!1,hidden:!1},{name:"stop",key:"settings_features_stop",enabled:!0,dragging:!1,hidden:!1},{name:"screenshotreader",key:"settings_features_screenshot_reader",enabled:!0,dragging:!1,hidden:!1},{name:"audiomaker",key:"settings_features_audio_maker",enabled:!0,dragging:!1,hidden:!1},{name:"websearch",key:"settings_features_web_search",enabled:!0,dragging:!1,hidden:!1},{name:"screenmasking",key:"settings_features_screen_masking",enabled:!0,dragging:!1,hidden:!1},{name:"talkandtype",key:"settings_features_talk_and_type",enabled:!0,dragging:!1,hidden:!1},{name:"translator",key:"settings_features_translator",enabled:!0,dragging:!1,hidden:!1},{name:"studyyellow",key:"settings_features_yellow_highlight",enabled:!0,dragging:!1,hidden:!1},{name:"studygreen",key:"settings_features_green_highlight",enabled:!0,dragging:!1,hidden:!1},{name:"studyblue",key:"settings_features_blue_highlight",enabled:!0,dragging:!1,hidden:!1},{name:"studypink",key:"settings_features_pink_highlight",enabled:!0,dragging:!1,hidden:!1},{name:"studyclear",key:"settings_features_clear_highlight",enabled:!0,dragging:!1,hidden:!1},{name:"studycollect",key:"settings_features_collect_highlight",enabled:!0,dragging:!1,hidden:!1},{name:"vocablist",key:"settings_features_vocabulary",enabled:!0,dragging:!1,hidden:!1},{name:"voicenote",key:"settings_features_voicenote",enabled:!0,dragging:!1},{name:"simplify",key:"settings_features_simplify_page",enabled:!0,dragging:!1,hidden:!1},{name:"practicereadingaloud",key:"settings_features_practice_reading_aloud",enabled:!0,dragging:!1,hidden:!1}],theme:"Light",accounts:{google:!1,microsoft:!1,email:""},defaultsSet:!1,driveInstall:!1,notificationVersion:0};super(e,Si,"th.rw4gc.settings.store",!1,!1),this.initialState=e}setWholeState(e){this.state=e}setDefaultState(){this.setWholeState(this.initialState),this.save()}setNotifcationVersion(e){this.state.notificationVersion=e}setScreenMaskingState(e){this.state.screenMasking=e}setDriveInstall(e){this.state.driveInstall=e}setCurrentPage(e){this.state.activeSettingsTab=e}setFirstLoadSettings(e,t,n,i,r,a,s,o,c){this.state.speech.voice=e,this.state.speech.speed=t,this.state.speech.reading=n,this.state.speech.speakAsIType.onEachWord=i,this.state.speech.speakAsIType.onEachSentence=r,this.state.speech.translation=a,this.state.language.language=s,this.state.language.features=o,this.state.defaultsSet=c,this.initialState.speech.voice=e,this.initialState.speech.speed=t,this.initialState.speech.reading=n,this.initialState.speech.speakAsIType.onEachWord=i,this.initialState.speech.speakAsIType.onEachSentence=r,this.initialState.speech.translation=a,this.initialState.language.language=s,this.initialState.language.features=o,this.initialState.defaultsSet=c}setPolicySettings(e){void 0!==e.voice&&(this.state.speech.voice=e.voice,this.initialState.speech.voice=e.voice),void 0!==e.speed&&(this.state.speech.speed=e.speed,this.initialState.speech.speed=e.speed),void 0!==e.reading&&(this.state.speech.reading=e.reading,this.initialState.speech.reading=e.reading),void 0!==e.onEachWord&&(this.state.speech.speakAsIType.onEachWord=e.onEachWord,this.initialState.speech.speakAsIType.onEachWord=e.onEachWord),void 0!==e.onEachSentence&&(this.state.speech.speakAsIType.onEachSentence=e.onEachSentence,this.initialState.speech.speakAsIType.onEachSentence=e.onEachSentence),void 0!==e.translation&&(this.state.speech.translation=e.translation,this.initialState.speech.translation=e.translation),void 0!==e.numberOfResults&&(this.state.prediction.numberOfResults=e.numberOfResults,this.initialState.prediction.numberOfResults=e.numberOfResults),void 0!==e.followCursor&&(this.state.prediction.general.followCursor=e.followCursor,this.initialState.prediction.general.followCursor=e.followCursor),void 0!==e.predictAhead&&(this.state.prediction.general.predictAhead=e.predictAhead,this.initialState.prediction.general.predictAhead=e.predictAhead),void 0!==e.predictOnHover&&(this.state.prediction.general.predictOnHover=e.predictOnHover,this.initialState.prediction.general.predictOnHover=e.predictOnHover),void 0!==e.fontSize&&(this.state.prediction.fontSize=e.fontSize,this.initialState.prediction.fontSize=e.fontSize),void 0!==e.readonhover&&(this.state.checkIt.readonhover=e.readonhover,this.initialState.checkIt.readonhover=e.readonhover),void 0!==e.backgroundColor&&(this.state.screenMasking.backgroundColor=e.backgroundColor,this.initialState.screenMasking.backgroundColor=e.backgroundColor),void 0!==e.readingLightColor&&(this.state.screenMasking.readingLightColor=e.readingLightColor,this.initialState.screenMasking.readingLightColor=e.readingLightColor),void 0!==e.backgroundOpacity&&(this.state.screenMasking.backgroundOpacity=e.backgroundOpacity,this.initialState.screenMasking.backgroundOpacity=e.backgroundOpacity),void 0!==e.readingLightOpacity&&(this.state.screenMasking.readingLightOpacity=e.readingLightOpacity,this.initialState.screenMasking.readingLightOpacity=e.readingLightOpacity),void 0!==e.readingLightHeight&&(this.state.screenMasking.readingLightHeight=e.readingLightHeight,this.initialState.screenMasking.readingLightHeight=e.readingLightHeight),void 0!==e.readingLight&&(this.state.screenMasking.readingLight=e.readingLight,this.initialState.screenMasking.readingLight=e.readingLight),void 0!==e.language&&(this.state.language.language=e.language,this.initialState.language.language=e.language),void 0!==e.features&&(this.state.language.features=e.features,this.initialState.language.features=e.features),void 0!==e.theme&&(this.state.theme=e.theme,this.initialState.theme=e.theme)}addCheckitDictionaryItem(e){this.state.checkIt.dictionary.includes(e)||this.state.checkIt.dictionary.push(e)}setPredictAheadPolicy(e){this.state.prediction.general.predictAheadPolicy=e,this.state.prediction.general.predictAheadPolicy||(this.state.prediction.general.predictAhead=!1)}resetUser(e){this.state.accounts.email=e,this.state.accounts.microsoft=!1,this.state.accounts.google=!1,this.save()}setV1Settings(e){void 0!==e.voice&&(this.state.speech.voice=e.voice.substr(0,e.voice.length-1)),void 0!==e.speed&&(this.state.speech.speed=e.speed),void 0!==e.continousreading&&(this.state.speech.reading=e.continousreading),void 0!==e.translang&&(this.state.speech.translation=e.translang),void 0!==e.speakoneachsentence&&(this.state.speech.speakAsIType.onEachSentence=e.speakoneachsentence),void 0!==e.speakoneachword&&(this.state.speech.speakAsIType.onEachWord=e.speakoneachword),void 0!==e.predictionResults&&(this.state.prediction.numberOfResults=e.predictionResults),void 0!==e.predictionTextSize&&(this.state.prediction.fontSize=e.predictionTextSize),void 0!==e.predictionCaretPosition&&(this.state.prediction.general.followCursor=e.predictionCaretPosition),void 0!==e.predictionpredictahead&&(this.state.prediction.general.predictAhead=e.predictionpredictahead),void 0!==e.screenmaskingBackgroundColour&&(this.state.screenMasking.backgroundColor=e.screenmaskingBackgroundColour),void 0!==e.screenmaskingBackgroundOpacity&&(this.state.screenMasking.backgroundOpacity=e.screenmaskingBackgroundOpacity),void 0!==e.screenmaskingReadingLightColour&&(this.state.screenMasking.readingLightColor=e.screenmaskingReadingLightColour),void 0!==e.screenmaskingReadingLightHeight&&(this.state.screenMasking.readingLightHeight=e.screenmaskingReadingLightHeight),void 0!==e.screenmaskingReadingLightOpacity&&(this.state.screenMasking.readingLightOpacity=e.screenmaskingReadingLightOpacity),void 0!==e.screenmaskingReadingLightVisibility&&(this.state.screenMasking.readingLight=e.screenmaskingReadingLightVisibility),void 0!==e.language&&(this.state.language.language=e.language),void 0!==e.services&&(this.state.language.features=e.services)}setV1ToolbarFeatures(e){e.map&&e.map((e=>{let t=this.state.features.find((t=>{if(e.command===t.name)return e;switch(e.command){case"factfinder":if("websearch"===t.name)return e;break;case"speechinput":if("talkandtype"===t.name)return e;break;case"speechmaker":if("audiomaker"===t.name)return e;break;case"highlightyellow":if("studyyellow"===t.name)return e;break;case"highlightgreen":if("studygreen"===t.name)return e;break;case"highlightblue":if("studyblue"===t.name)return e;break;case"highlightpink":if("studypink"===t.name)return e;break;case"highlightclear":if("studyclear"===t.name)return e;break;case"highlightscollect":if("studycollect"===t.name)return e;break;case"vocabtool":if("vocablist"===t.name)return e}}));t&&(t.enabled=e.show)}))}importV1Settings(e,t,n){this.state.defaultsSet=!1,this.setV1Settings(e),t.length>0&&(this.state.checkIt.dictionary=t),this.setV1ToolbarFeatures(n),this.save()}fixVoice(){this.state.speech.voice.startsWith("ss-")&&(this.state.speech.voice=this.state.speech.voice.slice(3),this.save())}};var Po=["body"];function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){Mo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jo(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yo(e,t,n,i,r,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,r)}function Go(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){Yo(a,i,r,s,o,"next",e)}function o(e){Yo(a,i,r,s,o,"throw",e)}s(void 0)}))}}class Fo{constructor(){}static doFetch(e){var t=arguments,n=this;return Go((function*(){var i=t.length>1&&void 0!==t[1]?t[1]:{},{body:r}=i,a=jo(i,Po);return new Promise(function(){var t=Go((function*(t,i){if(n.method="GET",n.timeout=0,void 0===a.method?n.method=r?"POST":"GET":n.method=a.method,a.blob){for(var s=atob(r.split(",")[1]),o=new ArrayBuffer(s.length),c=new Uint8Array(o),u=a.headers["content-type"],l=0;l<s.length;l++)c[l]=s.charCodeAt(l);r=new Blob([c],{type:u})}a.timeout&&(n.timeout=a.timeout);var d=xo(xo({method:n.method},a),{},{headers:xo({},a.headers)});r&&(d.body=r);var h=null;if(n.timeout>0)try{var p=new AbortController,g=setTimeout((()=>p.abort()),n.timeout);h=yield fetch(e,xo(xo({},d),{},{signal:p.signal})),clearTimeout(g)}catch(e){return Promise.reject(e)}else h=yield fetch(e,d);if(h.ok){var f={};if(f.contentType=h.headers.get("content-type"),f.headers=Object.fromEntries(h.headers.entries()),f.contentType){if(-1!==f.contentType.indexOf("application/json"))f.json=yield h.json();else if(f.contentType.startsWith("text"))f.text=yield h.text();else if(-1!==f.contentType.indexOf("audio/mpeg")){var m=yield h.arrayBuffer();f.arrayBuffer=(e=>{for(var t="",n=new Uint8Array(e),i=n.byteLength,r=0;r<i;r++)t+=String.fromCharCode(n[r]);return btoa(t)})(m)}else f.blob=yield h.blob();t({data:f})}else i(f)}else i(f)}));return function(e,n){return t.apply(this,arguments)}}())}))()}}class Bo{constructor(){chrome.runtime.onMessage.addListener(((e,t,n)=>{if(t.id!==chrome.runtime.id)return!1;if(!e.command)return!1;if("swfetch8598"===e.command)Fo.doFetch(e.url,e.options).then((e=>{n(e)}));return!0}))}}const Vo=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",DEFAULT:"Default"});class Ko{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class Ho{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}const Wo="local";class Jo extends Ko{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(Ho.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=Ho.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=Ho.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=Ho.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=Ho.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=Ho.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=Ho.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}class zo{constructor(e,t="microsoft"){this.idName=t,this.clientId=e,this.userInfo=void 0,this.email=void 0,this.accessCode=void 0,this.redirectUri="undefined"!=typeof chrome&&chrome.identity?chrome.identity.getRedirectURL():`${window.location.origin}/index.html`,this.storage=new Jo(Wo),this.storage.retrieve("rw4gc.ms-code.cache").then((e=>{null===e||0===Object.keys(e).length&&e.constructor===Object||(this.accessCode=e)}))}async getUserInfo(e=!0,t=!1,n=!1){var i=this;return new Promise(((n,r)=>{if(chrome){if(this.userInfo&&!t)return void n(this.userInfo);chrome.identity.getProfileUserInfo((async function(t){e?(await i.authorize(["user.read"]),n(i.userInfo)):r("Unable to get user details")}))}else r(new Error("Not running on a chromium browser"))}))}get msSiteUrl(){return"https://thzbf.texthelp.com/"}get sitePath(){return"mslogin.html"}async authorizeDocumentCreation(){return await this.authorize(["user.read","files.readwrite"],!1,!0)}async authorizeDriveInstall(){return""}async authorize(e,t=!1,n=!0){var i=this;try{return new Promise((async function(t,r){const a=(await i._chromeTabsQuery({active:!0,currentWindow:!0}))[0].id;let s=await i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]});if(s[0])chrome.tabs.update(s[0].id,{url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`});else{var o=Object.keys(e).map((t=>e[t])).join(",");chrome.tabs.create({url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`})}chrome.runtime.onMessage.addListener((async function e(s,o){if(o.id!==chrome.runtime.id)return!1;if(!s.command)return!1;switch(s.command.toLowerCase()){case"thswauthorised":chrome.runtime.onMessage.removeListener(e),i.accessCode=s.account.accessToken,n&&(i.userInfo=i.genericUserFormat(s.account.account),i.storage.store("rw4gc.ms-code.cache",i.accessCode,!1)),i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),chrome.tabs.update(a,{active:!0}),t(i.accessCode);break;case"thswauthcancelled":chrome.runtime.onMessage.removeListener(e),r("User cancelled")}}))}))}catch(e){console.log(e)}}signOut(){var e=this;return new Promise((async function(t,n){try{const n={active:!0,currentWindow:!0},i=await e._chromeTabsQuery(n);try{const n=i[0].id;let r,a=await e._chromeTabsQuery({url:[`${e.msSiteUrl}*`]});a[0]?(r=a[0].id,chrome.tabs.update(a[0].id,{url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`})):chrome.tabs.create({url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`},(function(e){r=e.id}));let s=async function n(i,r){if(r.id!==chrome.runtime.id&&t(),i.command||t(),"thswsignedout"===i.command.toLowerCase()){chrome.runtime.onMessage.removeListener(n),e.accessCode=void 0;try{e.storage.remove("rw4gc.ms-code.cache")}catch(e){}t()}};chrome.runtime.onMessage.addListener(s),chrome.tabs.onUpdated.addListener(((e,t)=>{e===r&&"complete"===t.status&&t.url}))}catch(n){e.accessCode=void 0,e.storage.remove("rw4gc.ms-code.cache"),t()}}catch(e){console.log(e),t()}}))}genericUserFormat(e){let t={licensetype:"microsoft"},n=e.displayName;null==n&&(n=e.name),t.name=n;let i=e.mail;return null==i&&(i=e.userPrincipalName),null==i&&(i=e.username),t.email=i,t}_openTab(e){chrome.tabs.query({},(function(t){for(let n,i=0;n=t[i];i++)if(n.url===e)return chrome.tabs.reload(n.id,{},(function(){})),void chrome.tabs.update(n.id,{active:!0});chrome.tabs.create({url:e})}))}_chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}}class qo{constructor(e="google"){this.idName=e,this.userScopes=["https://www.googleapis.com/auth/userinfo.email"],this.docScopes=["https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"],this.driveScopes=["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install"]}getUserInfo(e=!0,t=!1,n=!1){return new Promise(((i,r)=>{try{chrome?chrome.identity?chrome.identity.getProfileUserInfo((a=>{null!==a&&null!==a.email&&""===a.email&&null!==a.id&&""===a.id&&n?(this.userInfo=null,i(null)):a&&a.email.length>0&&(void 0===a.licensetype||"google"===a.licensetype)&&!t?(a.licensetype="google",this.userInfo=a,i(a)):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details")})):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details"):r("Not running on a chromium browser")}catch(e){r(e.Message)}}))}async authorizeDocumentCreation(){return this.authorize(this.docScopes)}async authorizeDriveInstall(){return this.authorize(this.driveScopes)}async getUserInfoFromToken(e){const t=await fetch("https://www.googleapis.com/userinfo/v2/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("invalid_response_from_oauth");const{name:n,email:i}=await t.json();return{name:n,email:i,licensetype:"google"}}getAuthToken(e,t,n=!0){return new Promise(((i,r)=>{try{chrome.identity.getAuthToken({interactive:e,scopes:t},(a=>{if(chrome.runtime.lastError||null==a)if(n)try{chrome.identity.removeCachedAuthToken({token:a},(()=>{this.getAuthToken(e,t,!1).then((e=>{i(e)})).catch((e=>{r(e)}))}))}catch(e){r(e.Message)}else r(chrome.runtime.lastError);else i(a)}))}catch(e){console.log(e.Message),r(e.Message)}}))}async authorize(e){let t;try{return t=await this.getAuthToken(!1,e),t}catch(n){try{return t=await this.getAuthToken(!0,e),t}catch(e){throw console.log("auth error"),console.error(e),Error(e)}}}async signOut(){chrome.identity.launchWebAuthFlow({interactive:!1,url:"https://accounts.google.com/logout"},(function(e){}))}}class $o{constructor(){this.auth=null}async initialise(e){var t=this;return new Promise((async function(n){switch(e){case Vo.GOOGLE:return t.auth=new qo,void n();case Vo.MICROSOFT:return t.auth=new zo("0113ff4a-9673-4c71-8cba-9229b16b7ad8"),void n();default:let e=await t.getAccountTypeFromProfileInfo();if(e)return t.auth=e,void n();chrome.runtime.onMessage.addListener((async function(e,i){if(i.id===chrome.runtime.id&&e.command)return"thswsetaccounttype"===e.command.toLowerCase()?("MS"===e.accountType?t.auth=new zo("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):t.auth=new qo,void n()):void n()}));let i={active:!0,currentWindow:!0},r=await t.chromeTabsQuery(i);if(r[0].url.includes("selectiondialog.html?q"));else{let e=await t.chromeTabsQuery({url:["chrome-extension://"+chrome.runtime.id+"/*"]});e[0]?await chrome.tabs.update(e[0].id,{active:!0}):chrome.tabs.create({url:"chrome-extension://"+chrome.runtime.id+"/selectiondialog/selectiondialog.html?q="+r[0].id})}}}))}chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}async switchAuthType(e){}async getAccountTypeFromProfileInfo(){var e=this;return new Promise((async function(t){chrome.identity?chrome.identity.getProfileUserInfo((async function(n){if(n.email.length>0){let n=null;return n=await e._isEdge()?new zo("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):new qo,void t(n)}t(null)})):t(null)}))}async getUserInfo(e=!1,t=!1){return await this.auth.getUserInfo(void 0,e,t)}async authorizeDocumentCreation(){return await this.auth.authorizeDocumentCreation()}async authorizeDriveInstall(){return await this.auth.authorizeDriveInstall()}async authorize(e){return await this.auth.authorize(e)}async _isEdge(){chrome.runtime.sendMessage({command:"th-isEdge"},(e=>e))}}class Xo{constructor(){chrome.runtime.onMessage.addListener(((e,t,n)=>{if(t.id!==chrome.runtime.id)return!1;if(!e.command)return!1;switch(e.command.toLowerCase()){case"swauthorize":return this.swAuthorize(e.authType,e.scopes).then((e=>{void 0!==n&&n(e)})),!0;case"swauthorizefordoccreation":return this.swAuthorizeForDocCreation(e.authType).then((e=>{void 0!==n&&n(e)})),!0;case"swauthorizefordriveinstall":return this.swAuthorizeForDriveInstall(e.authType).then((e=>{void 0!==n&&n(e)})),!0;case"swlauncewebauthflow":return this.swLaunchWebAuthFlow(e.interactive,e.url).then((e=>{void 0!==n&&n(e)})),!0;default:return!1}}))}async swAuthorize(e,t){return console.log("swAuthorize"),this.bgAuth=new $o,await this.bgAuth.initialise(e),this.bgAuth.authorize(t)}async swAuthorizeForDocCreation(e){return this.bgAuth=new $o,await this.bgAuth.initialise(e),this.bgAuth.authorizeDocumentCreation()}async swAuthorizeForDriveInstall(e){return this.bgAuth=new $o,await this.bgAuth.initialise(e),this.bgAuth.authorizeDriveInstall()}swLaunchWebAuthFlow(e,t){return new Promise(((n,i)=>{chrome.identity.launchWebAuthFlow({interactive:e,url:t},(e=>{n(e)}))}))}}const Qo=Object.freeze([{matches:["*"],settings:{target:{},files:["content.bundle.js"]}},{matches:["https://docs.google.com/document/*"],settings:{target:{},files:["gdocs.content.bundle.js"]}},{matches:["https://docs.google.com/presentation/*"],settings:{target:{},files:["gdocs.content.bundle.js"]}}]),Zo=Object.freeze([{matches:["https://docs.google.com/document/*"],settings:{target:{},files:["gdi.bundle.js"]}}]),ec=(e,t)=>{let n={};e=e.toLowerCase();for(let i in t){if(i=i.toLowerCase(),"default"==i){n=t[i];break}let r=e.substring(0,i.length);if(r===i){n=t[i];break}{r=e;let a=i.split("*");if(a.length>1){let s=!0;for(let e in a){let t=r.indexOf(a[e]);if(-1==t){s=!1;break}r=r.substr(t+a[e].length)}if(s){r=e,n=t[i];break}}}}return n},tc=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",DEFAULT:"Default"});class nc{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class ic{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}const rc="local";class ac extends nc{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(ic.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=ic.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=ic.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=ic.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=ic.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=ic.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=ic.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}class sc{constructor(e,t="microsoft"){this.idName=t,this.clientId=e,this.userInfo=void 0,this.email=void 0,this.accessCode=void 0,this.redirectUri="undefined"!=typeof chrome&&chrome.identity?chrome.identity.getRedirectURL():`${window.location.origin}/index.html`,this.storage=new ac(rc),this.storage.retrieve("rw4gc.ms-code.cache").then((e=>{null===e||0===Object.keys(e).length&&e.constructor===Object||(this.accessCode=e)}))}async getUserInfo(e=!0,t=!1,n=!1){var i=this;return new Promise(((n,r)=>{if(chrome){if(this.userInfo&&!t)return void n(this.userInfo);chrome.identity.getProfileUserInfo((async function(t){e?(await i.authorize(["user.read"]),n(i.userInfo)):r("Unable to get user details")}))}else r(new Error("Not running on a chromium browser"))}))}get msSiteUrl(){return"https://thzbf.texthelp.com/"}get sitePath(){return"mslogin.html"}async authorizeDocumentCreation(){return await this.authorize(["user.read","files.readwrite"],!1,!0)}async authorizeDriveInstall(){return""}async authorize(e,t=!1,n=!0){var i=this;try{return new Promise((async function(t,r){const a=(await i._chromeTabsQuery({active:!0,currentWindow:!0}))[0].id;let s=await i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]});if(s[0])chrome.tabs.update(s[0].id,{url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`});else{var o=Object.keys(e).map((t=>e[t])).join(",");chrome.tabs.create({url:`${i.msSiteUrl}${i.sitePath}?action=authorise&scopes=${o}`})}chrome.runtime.onMessage.addListener((async function e(s,o){if(o.id!==chrome.runtime.id)return!1;if(!s.command)return!1;switch(s.command.toLowerCase()){case"thswauthorised":chrome.runtime.onMessage.removeListener(e),i.accessCode=s.account.accessToken,n&&(i.userInfo=i.genericUserFormat(s.account.account),i.storage.store("rw4gc.ms-code.cache",i.accessCode,!1)),i._chromeTabsQuery({url:[`${i.msSiteUrl}*`]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),chrome.tabs.update(a,{active:!0}),t(i.accessCode);break;case"thswauthcancelled":chrome.runtime.onMessage.removeListener(e),r("User cancelled")}}))}))}catch(e){console.log(e)}}signOut(){var e=this;return new Promise((async function(t,n){try{const n={active:!0,currentWindow:!0},i=await e._chromeTabsQuery(n);try{const n=i[0].id;let r,a=await e._chromeTabsQuery({url:[`${e.msSiteUrl}*`]});a[0]?(r=a[0].id,chrome.tabs.update(a[0].id,{url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`})):chrome.tabs.create({url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`},(function(e){r=e.id}));let s=async function n(i,r){if(r.id!==chrome.runtime.id&&t(),i.command||t(),"thswsignedout"===i.command.toLowerCase()){chrome.runtime.onMessage.removeListener(n),e.accessCode=void 0;try{e.storage.remove("rw4gc.ms-code.cache")}catch(e){}t()}};chrome.runtime.onMessage.addListener(s),chrome.tabs.onUpdated.addListener(((e,t)=>{e===r&&"complete"===t.status&&t.url}))}catch(n){e.accessCode=void 0,e.storage.remove("rw4gc.ms-code.cache"),t()}}catch(e){console.log(e),t()}}))}genericUserFormat(e){let t={licensetype:"microsoft"},n=e.displayName;null==n&&(n=e.name),t.name=n;let i=e.mail;return null==i&&(i=e.userPrincipalName),null==i&&(i=e.username),t.email=i,t}_openTab(e){chrome.tabs.query({},(function(t){for(let n,i=0;n=t[i];i++)if(n.url===e)return chrome.tabs.reload(n.id,{},(function(){})),void chrome.tabs.update(n.id,{active:!0});chrome.tabs.create({url:e})}))}_chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}}class oc{constructor(e="google"){this.idName=e,this.userScopes=["https://www.googleapis.com/auth/userinfo.email"],this.docScopes=["https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"],this.driveScopes=["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install"]}getUserInfo(e=!0,t=!1,n=!1){return new Promise(((i,r)=>{try{chrome?chrome.identity?chrome.identity.getProfileUserInfo((a=>{null!==a&&null!==a.email&&""===a.email&&null!==a.id&&""===a.id&&n?(this.userInfo=null,i(null)):a&&a.email.length>0&&(void 0===a.licensetype||"google"===a.licensetype)&&!t?(a.licensetype="google",this.userInfo=a,i(a)):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details")})):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,i(e)}))})):r("Unable to get user details"):r("Not running on a chromium browser")}catch(e){r(e.Message)}}))}async authorizeDocumentCreation(){return this.authorize(this.docScopes)}async authorizeDriveInstall(){return this.authorize(this.driveScopes)}async getUserInfoFromToken(e){const t=await fetch("https://www.googleapis.com/userinfo/v2/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("invalid_response_from_oauth");const{name:n,email:i}=await t.json();return{name:n,email:i,licensetype:"google"}}getAuthToken(e,t,n=!0){return new Promise(((i,r)=>{try{chrome.identity.getAuthToken({interactive:e,scopes:t},(a=>{if(chrome.runtime.lastError||null==a)if(n)try{chrome.identity.removeCachedAuthToken({token:a},(()=>{this.getAuthToken(e,t,!1).then((e=>{i(e)})).catch((e=>{r(e)}))}))}catch(e){r(e.Message)}else r(chrome.runtime.lastError);else i(a)}))}catch(e){console.log(e.Message),r(e.Message)}}))}async authorize(e){let t;try{return t=await this.getAuthToken(!1,e),t}catch(n){try{return t=await this.getAuthToken(!0,e),t}catch(e){throw console.log("auth error"),console.error(e),Error(e)}}}async signOut(){chrome.identity.launchWebAuthFlow({interactive:!1,url:"https://accounts.google.com/logout"},(function(e){}))}}class cc{constructor(){this.auth=null}async initialise(e){var t=this;return new Promise((async function(n){switch(e){case tc.GOOGLE:return t.auth=new oc,void n();case tc.MICROSOFT:return t.auth=new sc("0113ff4a-9673-4c71-8cba-9229b16b7ad8"),void n();default:let e=await t.getAccountTypeFromProfileInfo();if(e)return t.auth=e,void n();chrome.runtime.onMessage.addListener((async function(e,i){if(i.id===chrome.runtime.id&&e.command)return"thswsetaccounttype"===e.command.toLowerCase()?("MS"===e.accountType?t.auth=new sc("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):t.auth=new oc,void n()):void n()}));let i={active:!0,currentWindow:!0},r=await t.chromeTabsQuery(i);if(r[0].url.includes("selectiondialog.html?q"));else{let e=await t.chromeTabsQuery({url:["chrome-extension://"+chrome.runtime.id+"/*"]});e[0]?await chrome.tabs.update(e[0].id,{active:!0}):chrome.tabs.create({url:"chrome-extension://"+chrome.runtime.id+"/selectiondialog/selectiondialog.html?q="+r[0].id})}}}))}chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}async switchAuthType(e){}async getAccountTypeFromProfileInfo(){var e=this;return new Promise((async function(t){chrome.identity?chrome.identity.getProfileUserInfo((async function(n){if(n.email.length>0){let n=null;return n=await e._isEdge()?new sc("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):new oc,void t(n)}t(null)})):t(null)}))}async getUserInfo(e=!1,t=!1){return await this.auth.getUserInfo(void 0,e,t)}async authorizeDocumentCreation(){return await this.auth.authorizeDocumentCreation()}async authorizeDriveInstall(){return await this.auth.authorizeDriveInstall()}async authorize(e){return await this.auth.authorize(e)}async _isEdge(){chrome.runtime.sendMessage({command:"th-isEdge"},(e=>e))}}class uc{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class lc{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}const dc="local";class hc extends uc{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(lc.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var i=this;return new Promise((async function(r,a){try{if("none"===i._syncType)return void r(!0);let a={};if(n){if(Object.keys(e).length>0){let n=await i._retrieve(e,i._syncType);if(n){if(null===n[e]){const n=lc.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}if(a=lc.decode(n[e]),a===JSON.stringify(t))return void r(!0);let s=i.mergeDeep(JSON.parse(a),t,!0);const o=lc.encode(s);return i._store(e,o,i._syncType),i._keys.add(e),void r(!0)}{const n=lc.encode(t);return i._store(e,n,i._syncType),i._keys.add(e),void r(!0)}}}else{const n=lc.encode(t);i._store(e,n,i._syncType)}i._keys.add(e),r(!0)}catch(e){a(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(i,r){try{if("none"===n._syncType)return void i(t);let r={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){r=lc.decode(a[e]),n._keys.add(e),i(n.mergeDeep(t,JSON.parse(r),!0))}else n._keys.add(e),i(t)}else n._keys.add(e),i(t)}catch(e){r(e)}}))}remove(e){var t=this;return new Promise((async function(n,i){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){i(e)}}))}mergeDeep(e,t,n=!1){e=(e=>{let t;try{t=JSON.parse(JSON.stringify(e))}catch(n){t=Object.assign({},e)}return t})(e);const i=e=>e&&"object"==typeof e;return i(e)&&i(t)?(Object.keys(t).forEach((r=>{const a=e[r],s=t[r];Array.isArray(a)&&Array.isArray(s)?n?(e[r]=a.map(((e,t)=>s.length<=t?e:this.mergeDeep(e,s[t],n))),s.length>a.length&&(e[r]=e[r].concat(s.slice(a.length)))):e[r]=a.concat(s):i(a)&&i(s)?e[r]=this.mergeDeep(Object.assign({},a),s,n):e[r]=s})),e):t}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,i)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}class pc{constructor(e=tc.DEFAULT,t=!1){this._loginType=e,this.isEdge=t}getUser(e=!1,t=!1){var n=this;return new Promise(((i,r)=>{try{let a=new hc(dc);a.retrieve("rw4gc.user.cache").then((async function(s){if(e||null===s||0===Object.keys(s).length&&s.constructor===Object){n.isEdge&&(n._loginType=tc.MICROSOFT);let s=new cc;await s.initialise(n._loginType),s.getUserInfo(e,t).then((e=>{null===e?a.remove("rw4gc.user.cache"):a.store("rw4gc.user.cache",e,!1),i(e)})).catch((e=>{r(e)}))}else if(void 0===s.email||null===s.email){n.isEdge&&(n._loginType=tc.MICROSOFT);let s=new cc;await s.initialise(n._loginType),s.getUserInfo(e,t).then((e=>{null===e?a.remove("rw4gc.user.cache"):a.store("rw4gc.user.cache",e,!1),i(e)})).catch((e=>{r(e)}))}else i(s)}))}catch(e){r(e)}}))}signOut(){var e=this;return new Promise((async function(t,n){try{let i=new hc(dc);i.retrieve("rw4gc.user.cache").then((async function(r){let a=new cc;await a.initialise(e._loginType),null===r||0===Object.keys(r).length&&r.constructor===Object?a.auth.signOut().then((()=>{t(!0)})).catch((e=>{n(e)})):a.auth.signOut().then((()=>{i.remove("rw4gc.user.cache").then((()=>{t(!0)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}))}catch(e){n(e)}}))}}var gc={thDebugMode:!1,thCloudFrontBypass:!1,thAuthProduct:!1,sendFetchRequest:function(e,t){return new Promise((function(n){!1===t&&(t=new Date),gc.sendBrowserRequest(e,t).then((e=>{n([e,t,!1])})).catch((e=>{n([!1,t,!1])}))}))},s3Req:function(e,t){if(gc.thCloudFrontBypass)var n="https://s3.amazonaws.com/rwfamilylive/"+e;else n="https://licensing.texthelp.com/"+e;return gc.sendFetchRequest(n,t)},sendBrowserRequest:function(e,t){return void 0===gc.retryCount&&(gc.retryCount=2),new Promise((function(n,i){fetch(e+"?cbp="+Math.random(),{}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");n(e.text())})).catch((function(r){if(1===gc.retryCount)return i(r);gc.retryCount=gc.retryCount-1,setTimeout((function(){gc.sendBrowserRequest(e,t).then(n).catch(i)}),3e3)}))}))},setToday:function(e){var t=e.getResponseHeader("Date"),n=e.getResponseHeader("Age");if(!isNaN(parseFloat(n))&&isFinite(n))var i=new Date(t),r=new Date(i.getTime()+parseInt(1e3*n)),a=new Date(r);else a=new Date(t);return a},sugarFetchReq:function(e,t,n,i){return new Promise((function(e){fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).then((t=>{t.ok?t.text().then((t=>{e(""!==t)})):(gc.logger(t.status),gc.logger(t.statusText),e(!1))})).catch((t=>{e(!1)}))}))},sugarReq:function(e,t){return new Promise((function(n){var i="https://ist.texthelp.com/queue/licensing/push/"+e,r=JSON.stringify(t);return n(gc.sugarFetchReq(e,t,i,r))}))},freemium:function(e,t,n){var i="expiry_"+n,r={};return r.user=e,r.start=gc.getTodaysDate(t),r[i]=gc.get30DaysDate(t),r.licence_type="Freemium",JSON.stringify(r)},expiredFreemium:function(e,t,n){var i="expiry_"+n,r={};return r.user=e,r.start=gc.getTodaysDate(t),r[i]=gc.getTodaysDate(t),r.licence_type="Freemium",JSON.stringify(r)},getTodaysDate:function(e){if(e instanceof Date)var t=new Date(e).toJSON().slice(0,10);else t=(new Date).toJSON().slice(0,10);return t},getYesterdaysDate:function(e){var t;return e instanceof Date?((t=new Date(e)).setDate(t.getDate()-1),t=t.toJSON().slice(0,10)):((t=new Date).setDate(t.getDate()-1),t=t.toJSON().slice(0,10)),t},getCurrentDateTime:function(e){if(e instanceof Date)var t=new Date(e).toJSON();else t=(new Date).toJSON();return t},dateInFuture:function(e,t){return e=new Date(e),new Date(t).getTime()<=e.getTime()},get30DaysDate:function(e){var t=new Date(gc.getTodaysDate(e)),n=(new Date).setDate(t.getDate()+30);return new Date(n).toJSON().slice(0,10)},setSyncDate:function(e,t,n){var i=gc.getTodaysDate(e),r={};r[t]=i,"Chrome"==n?chrome.storage.sync.set(r):localStorage.setItem(t,i)},resolveSync:(e,t,n,i)=>void 0===e?(gc.setSyncDate(t,n,i),!0):!(null!==e&&!gc.needsUpdated(e)||(gc.setSyncDate(t,n,i),0)),getLastSync:function(e,t,n){return new Promise((i=>{var r="texthelp_"+t+"_ga_updated_in_licensing";"Chrome"==n?chrome.storage.sync.get([r],(t=>{i(gc.resolveSync(t[r],e,r,n))})):i(gc.resolveSync(localStorage.getItem(r),e,r,n))}))},needsUpdated:function(e){var t=new Date,n=new Date;return n.setDate(t.getDate()-30),n.setHours(0),n.setMinutes(0),n.setSeconds(0),Date.parse(n)>Date.parse(e)},dateDiff:function(e,t,n){e=new Date(e);var i=(t=new Date(t))-e;if(isNaN(i))return NaN;switch(n){case"years":return t.getFullYear()-e.getFullYear();case"months":return 12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth());case"weeks":return Math.floor(i/6048e5);case"days":return Math.floor(i/864e5);case"hours":return Math.floor(i/36e5);case"minutes":return Math.floor(i/6e4);case"seconds":return Math.floor(i/1e3);default:return}},platformFlagToCheck:function(e){return"equatio"==e||"equatio_lti"==e?"equatio":"ft4g"==e?"ft4g":"wriq"==e?"wriq":"reachdeck"==e?"reachdeck":"orbitdoc"==e?"orbitdoc":"claroread"==e?"claroread":"writinghelper"==e?"writinghelper":"scanpen"==e?"scanpen":"read_and_write"},verifyUserCanEnrolInGroup:function(e,t,n){var i=JSON.parse(e),r=i[gc.platformFlagToCheck(n)];if(!0===gc.dateInFuture(i.expiry,t)&&1==r){if(1==i.unlimited)return!0;if(i.user_count>i.enrolled_seats&&1!=i.using_admin_tool)return!0}return!1},getUserFilename:function(e,t){if("equatio"==t)var n="users_equatio";else n="equatio_lti"==t?"users_equatio_lti":"ft4g"==t?"users_ft4g":"wriq"==t?"users_wriq":"reachdeck"==t?"users_reachdeck":"orbitdoc"==t?"users_orbitdoc":"claroread"==t?"users_claroread":"scanpen"==t?"users_scanpen":"writinghelper"==t?"users_writinghelper":"users";return n+"/"+e+".json"},getGroupFilename:function(e){return"groups/"+e+".json"},getFeaturesFilename:function(e,t){return"new_"+t+"_features_"+e+".json"},getDomainsListFilename:function(e,t){return"domains/"+e+"/"+t+".json"},getProductExpiryProp:function(e){return"expiry_"+e},getSoftwareEnabledProp:function(e){return"equatio"==e?"equatio":"equatio_lti"==e?"equatio_lti":"ft4g"==e?"ft4g":"wriq"==e?"wriq":"reachdeck"==e?"reachdeck":"orbitdoc"==e?"orbitdoc":"claroread"==e?"claroread":"scanpen"==e?"scanpen":"writinghelper"==e?"writinghelper":"read_and_write"},isGroupAuthCode:function(e){return"G"==e.substring(0,1)},isValidUser:function(e){return e.indexOf("@")>=0},setDebugMode:function(e){gc.debug=e},validProduct:function(e){return["mac","rw4gc","windows","ipad","android","equatio","equatio_lti","edge","ft4g","wriq","reachdeck","orbitdoc","claroread","writinghelper","scanpen"].includes(e)},logger:function(e){}},fc=function(e,t){return t>>>e|t<<32-e},mc=function(e){return fc(2,e)^fc(13,e)^fc(22,e)},vc=function(e){return fc(6,e)^fc(11,e)^fc(25,e)},_c=function(e){return fc(7,e)^fc(18,e)^e>>>3},yc=function(e){return fc(17,e)^fc(19,e)^e>>>10},bc=function(e,t,n){return e&t^~e&n},Sc=function(e,t,n){return e&t^e&n^t&n},Ec=function(e){for(var t="",n=7;n>=0;n-=1)t+=(e>>>4*n&15).toString(16);return t},Ac=function(e){for(var t=unescape(encodeURIComponent(e)),n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=(t+=String.fromCharCode(128)).length/4+2,a=Math.ceil(r/16),s=new Array(a),o=0;a>o;o+=1){s[o]=new Array(16);for(var c=0;c<16;c+=1)s[o][c]=t.charCodeAt(64*o+4*c)<<24|t.charCodeAt(64*o+4*c+1)<<16|t.charCodeAt(64*o+4*c+2)<<8|t.charCodeAt(64*o+4*c+3)}s[a-1][14]=(t.length-1)/Math.pow(2,32)*8,s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1&4294967295);for(var u=new Array(64),l=0;a>l;l+=1){for(var d=0;d<16;d+=1)u[d]=s[l][d];for(var h=16;h<64;h+=1)u[h]=yc(u[h-2])+u[h-7]+_c(u[h-15])+u[h-16]&4294967295;for(var p=i[0],g=i[1],f=i[2],m=i[3],v=i[4],_=i[5],y=i[6],b=i[7],S=0;S<64;S+=1){var E=b+vc(v)+bc(v,_,y)+n[S]+u[S],A=mc(p)+Sc(p,g,f);b=y,y=_,_=v,v=m+E&4294967295,m=f,f=g,g=p,p=E+A&4294967295}i[0]=i[0]+p&4294967295,i[1]=i[1]+g&4294967295,i[2]=i[2]+f&4294967295,i[3]=i[3]+m&4294967295,i[4]=i[4]+v&4294967295,i[5]=i[5]+_&4294967295,i[6]=i[6]+y&4294967295,i[7]=i[7]+b&4294967295}return`${Ec(i[0])}${Ec(i[1])}${Ec(i[2])}${Ec(i[3])}${Ec(i[4])}${Ec(i[5])}${Ec(i[6])}${Ec(i[7])}`},Tc=function(e){var t=e.toLowerCase();t=t.trim();try{var n=t.split("@"),i=n[0].replace("%",""),r=n[1];return`${Ac(i+="hfdu9b89';JHK7898hbh;';[/")}@${r}`}catch(e){}return""},Oc=function(e){var t=e.toUpperCase();t=t.trim();try{return Ac(t+"hfdu9b89';JHK7898hbh;';[/")}catch(e){}return""},wc=function(e){var t=e.toLowerCase();t=t.trim();try{return Ac(t+"hfdu9b89';JHK7898hbh;';[/")}catch(e){}return""},Cc=!1,Ic=function(e,t){var n=!1,i=!1,r=!1,a=!1,s=!1,o=!1,c=!1,u=!1,l=!1,d=!1,h=!1,p=!1,g=!1,f=!1,m=!1,v=!1,_=!1,y="",b="",S="",E=!0,A=function(){gc.s3Req("institutions_list.json",m).then((([e,t,n])=>{T(e)}))},T=function(e){var t=JSON.parse(e),n=!1;u.find((function(e){return e in t&&(l=t[e],n=!0),n})),l?gc.s3Req(gc.getGroupFilename(l),m).then((([e,t,n])=>{D(e,t)})):C()},O=function(e,t,i){if(m=t,!1!==e)if("Group"===(f=JSON.parse(e)).licence_type)gc.s3Req(gc.getGroupFilename(f.group),m).then((([e,t,n])=>{U(e,t)}));else{n=e;var s=JSON.parse(e);c?A():r&&r!=s.auth_code?a?(d=!0,w()):C():"Freemium"==s.licence_type?(d=!0,w()):Y()}else d=!0,w(i)},w=function(e){if(c)A();else if(s){var t=gc.platformFlagToCheck(g),n=gc.getDomainsListFilename(t,s);gc.s3Req(n,m).then((([e,t,n])=>{I(e,t,n)}))}else C(e)},C=function(e){r&&!a?gc.s3Req(gc.getUserFilename(r,g),m).then((([e,t,n])=>{P(e,t,n)})):n?Y():i?E?x(e):M():(h=Error("User or product code not set"),t(h,!1))},I=function(e,t,n){m=t,!1!==e?R(e,N):C(n)},N=function(e){0!=e?gc.s3Req("groups/"+e+".json",m).then((([e,t,n])=>{D(e,t)})):C()},R=function(e,t){var n=JSON.parse(e),i=!1;"rw4gc"==g||"equatio"==g||"equatio_lti"==g||"ft4g"==g||"wriq"==g||"reachdeck"==g||!1!==o?null!=n.unlimited_oauth&&null!=n.unlimited_oauth[s]&&(i=n.unlimited_oauth[s]):!1!==r&&!0===a&&null!=n.unlimited&&(null!=n.unlimited[r]?i=n.unlimited[r]:h=Error("Product code invalid")),!i&&r&&!0===a&&null!=n.limited&&(null!=n.limited[r]?i=n.limited[r]:h=Error("Product code invalid")),i||null!=n.hide_unlicensed&&null!=n.hide_unlicensed[s]&&(p=!0),t(i)},D=function(e,t){m=t,!1!==e?(n=e,_?Y():L(e)):_?gc.s3Req(gc.getUserFilename(i,g),m).then((([e,t,n])=>{O(e,t,n)})):C()},L=function(e){!1===E?M():gc.verifyUserCanEnrolInGroup(e,m,g)?(n=e,Y(),k(e)):(n=!1,h=Error("Unable to enrol in group"),C())},k=function(e){var t=JSON.parse(e),n={};n.user=i,n.group=t.guid,n.auth_code=t.auth_code,n.product=g,c&&(n.institution_id=l,n.login_type=o),gc.sugarReq("group",n,(function(e){}))},P=function(e,a,s){m=a;try{if(!1!==e)if(gc.logger("[DEBUG]: Found auth code file."),i){var c=!0;0==o&&(c=!1,h=Error("Login type not set"));var u=JSON.parse(e);u.hasOwnProperty("perpetual")&&u.perpetual||gc.dateInFuture(u.expiry,m)||(c=!1,h=Error("License expired"));var l=gc.getSoftwareEnabledProp(g);!c||u.hasOwnProperty(l)&&0!=u[l]||(c=!1,h=Error("Product not enabled"));var d=u[o+"_login"];if(c&&""!==d){if(d===i)return n=e,Y();c=!1,h=Error("This product code is already tied to a user for this login type")}else u[o+"_login"]=i;if(!0===c){n=JSON.stringify(u),gc.logger("[DEBUG]: licence file"),gc.logger(n),Y(),gc.logger("[DEBUG]: Updating single user file via sugar");var p={};p.user=i,p.user_encrypted=!0,p.auth_code=r,p.login_type=o,p.licence_id=u.guid,gc.sugarReq("single",p,(function(e){gc.logger("[DEBUG]: File updated successfully.")}))}else x()}else n=e,Y();else{if(!i)throw new Error("Not a valid product code");h=Error("Not a valid product code"),x(s)}}catch(e){t(e,n)}},U=function(e,t){if(m=t,!1!==e){var i=JSON.parse(e);if(8==i.auth_code.length&&(i.auth_code=Oc(i.auth_code)),f.auth_code==i.auth_code){n=e;var r=gc.getSoftwareEnabledProp(g),a=gc.getProductExpiryProp(g);gc.dateInFuture(i.expiry,m)?1!=i[r]?(i[a]=gc.getYesterdaysDate(m),n=JSON.stringify(i),gc.s3Req(gc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)}))):Y():gc.s3Req(gc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)}))}else h=Error("Group product code has changed, reverting to freemium"),d=!0,M()}else gc.s3Req(gc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)}))},x=function(e){if(null==e&&(e=!1),!1===n&&!0===E){if(n=gc.freemium(i,m,g),e){var t=JSON.parse(n);t.lt=Math.floor(899999*Math.random()+1e5),n=JSON.stringify(t)}else j();Y()}else!1===E?M():Y()},M=function(){!1===n&&(n=gc.expiredFreemium(i,m,g),!0===E&&j()),Y()},j=function(){if(i){var e={};e.user=i,e.product=g,gc.sugarReq("freemium",e).then((e=>{}))}},Y=function(){var e=JSON.parse(n);y=e.licence_type,1==e.unlimited&&(y="Unlimited"),e.free_for_teachers&&(S=1);var t=!1;if("Group"!=e.licence_type){var i=gc.getProductExpiryProp(g),a=gc.getSoftwareEnabledProp(g);(e.hasOwnProperty(a)&&0!=e[a]||e.hasOwnProperty(i))&&(!e.hasOwnProperty(a)||1!=e[a]||gc.dateInFuture(e.expiry,m)||e.hasOwnProperty(i))||(b="Trial",e[i]=gc.get30DaysDate(m),n=JSON.stringify(e),t=!0),"Freemium"==e.licence_type&&(e.hide_unlicensed=p,n=JSON.stringify(e));var o=!1;(e.hasOwnProperty(a)&&1==e[a]&&gc.dateInFuture(e.expiry,m)||e.hasOwnProperty(i)&&gc.dateInFuture(e[i],m))&&(o=!0),!0===o?(b="Premium",gc.s3Req(gc.getFeaturesFilename(g,"premium"),m).then((([e,t,n])=>{G(e,t)}))):(b="Freemium",gc.s3Req(gc.getFeaturesFilename(g,"freemium"),m).then((([e,t,n])=>{G(e,t)})))}else K(n);if(!0===t&&j(),"Group"!=e.licence_type&&!0!==d&&null!=s){var c=!1;if("Single"==e.licence_type&&gc.dateInFuture(e.expiry,m)||(c=!0),!0===c){var u=gc.platformFlagToCheck(g),l=gc.getDomainsListFilename(u,s);gc.s3Req(l,m).then((([e,t,n])=>{F(e,t)}))}}e=JSON.parse(n),r=e.auth_code,!0===E&&("undefined"!=typeof chrome&&void 0!==chrome.storage?gc.getLastSync(m,g,"Chrome").then((e=>{e&&H()})):"undefined"!=typeof localStorage?gc.getLastSync(m,g,"Local").then((e=>{e&&H()})):H())},G=function(e,t){if(m=t,!1!==e){var i=JSON.parse(n),r=JSON.parse(e);i.features=r,n=JSON.stringify(i),K(n)}else K(n)},F=function(e,t){m=t,!1!==e&&R(e,B)},B=function(e){0!=e?gc.s3Req("groups/"+e+".json",m).then((([e,t,n])=>{V(e,t)})):gc.logger("[WARNING]: No groups found for this domain.")},V=function(e,t){m=t,!1!==e&&(gc.verifyUserCanEnrolInGroup(e,m,g)?k(e):gc.logger("[ERROR]: Unable to enroll user in the group."))},K=function(e){var n=JSON.parse(e);n.today=gc.getTodaysDate(m),n.currentDateTime=gc.getCurrentDateTime(m);var r=gc.getSoftwareEnabledProp(g),a=gc.getProductExpiryProp(g);if(n.hasOwnProperty(r)&&1==n[r]?(n.license_expiry=n.expiry,b="Premium",gc.dateInFuture(n.expiry,m)||n.hasOwnProperty(a)&&gc.dateInFuture(n[a],m)&&(n.license_expiry=n[a],b="Trial",n.trial=!0)):(n.license_expiry=n[a],gc.dateInFuture(n.license_expiry,m)?(b="Trial",n.trial=!0):(b="Freemium",n.trial=!1)),n.daysleft=gc.dateDiff(n.today,n.license_expiry,"days"),"Group"!=n.licence_type)if("equatio"==g){var s=gc.getSoftwareEnabledProp("rw4gc");"Single"==n.licence_type&&n.hasOwnProperty(s)&&1==n[s]?n.upgrade_link="https://text.help/2MVuXs":n.upgrade_link="https://text.help/llZsZf"}else n.daysleft>=0?n.upgrade_link="https://text.help/sNm0iR":n.upgrade_link="https://text.help/ojpwiV";void 0===n.user&&0!=i&&(n.user=i),t(h,n)},H=function(){if(i)e=i.split("@")[1];else var e="takehomeuser";var t;switch(g){case"mac":case"rw4gc":case"windows":case"ipad":case"android":case"edge":t="Read&Write";break;case"equatio":case"equatio_lti":t="Equatio";break;case"ft4g":t="Fluency Tutor";break;case"wriq":t="WriQ";break;case"reachdeck":t="ReachDeck";break;case"orbitdoc":t="OrbitDoc";break;case"claroread":t="ClaroRead";break;case"writinghelper":t="WritingHelper";break;case"scanpen":t="ScanPen"}if("undefined"!=typeof chrome&&"undefined"!=typeof analytics&&"function"==typeof analytics.getService){var n;(n=analytics.getService("th_licensing").getTracker("UA-83720712-5")).set("clientId",i),n.set("userId",i);var a=analytics.EventBuilder.builder().category("Licence Check").action(i).label(e).dimension({index:1,value:t}).dimension({index:2,value:y}).dimension({index:3,value:b}).dimension({index:4,value:S}).dimension({index:5,value:r}).dimension({index:6,value:""});n.send(a)}else if("undefined"!=typeof window&&"function"==typeof window.ga&&42===window.ga.answer)window.ga("create","UA-83720712-5","auto","licensingTracker",{clientId:i}),window.ga("licensingTracker.send","event",{uid:i,eventCategory:"Licence Check",eventAction:i,eventLabel:e,cd1:t,cd2:y,cd3:b,cd4:S,cd5:r,cd6:""});else{var s={v:1,t:"event",tid:"UA-83720712-5",ec:"Licence Check",ea:i,cid:i,uid:i,el:e,cd1:t,cd2:y,cd3:b,cd4:S,cd5:r,cd6:""},o=Object.keys(s).filter((function(e){return s[e]})).map((function(e){return e+"="+encodeURIComponent(s[e])})).join("&");fetch("https://www.google-analytics.com/collect",{method:"post",body:o})}};try{if(void 0!==e.debug&&""!=e.debug?(Cc=e.debug,gc.thDebugMode=Cc,gc.logger("=========================="),gc.logger("[CORE]: Debug Mode Enabled"),gc.logger("==========================")):Cc=!1,null!=e.authCode&&""!=e.authCode&&!function(e){return 8==e.length?(e=e.toUpperCase(),gc.isGroupAuthCode(e)&&(a=!0),gc.logger("[DEBUG]: Found an auth code: "+e),r=Oc(e),gc.logger("[DEBUG]: Hashed auth code for use: "+r),!0):10==e.length&&(e=e.toUpperCase(),gc.logger("[DEBUG]: Found a take home code: "+e),r=Oc(e),gc.logger("[DEBUG]: Hashed take home code for use: "+r),_=!0,!0)}(e.authCode))throw new Error("Product code invalid");if(null!=e.product&&""!=e.product){if(!gc.validProduct(e.product))throw new Error("Invalid product");g=e.product}if(void 0!==e.cacheBypass&&""!=e.cacheBypass?(v=e.cacheBypass,gc.thCloudFrontBypass=v,v&&gc.logger("[DEBUG]: Bypassing CloudFront due to configuration option!")):(v=!1,gc.thCloudFrontBypass=!1),void 0!==e.createLicence){if("boolean"!=typeof e.createLicence)throw new Error("createLicence flag should be a boolean");E=e.createLicence,gc.logger("[DEBUG]: thCreateLicence set to "+E)}if(null!=e.user&&""!=e.user){var W=e.user.toLowerCase(),J=!1;if(null!=e.disableUserHash&&!0===e.disableUserHash&&(J=!0),!function(e,t){if(null!=e){if(!gc.isValidUser(e))throw gc.logger("[ERROR]: No domain found in user string."),new Error("No domain found");e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),i=!0===t?e:Tc(e),gc.logger('[DEBUG]: Hashed user string: "'+i+'"');var n=i.split("@")[1];return gc.logger('[DEBUG]: Domain set to: "'+n+'"'),s=wc(n),gc.logger('[DEBUG]: Domain (post-hash) set to: "'+s+'"'),!0}return!1}(W,J))throw new Error("Invalid user")}if(null!=e.loginType&&""!=e.loginType){var z=e.loginType;if(!function(e){return!(["facebook","feide","google","microsoft","linkedin","twitter","uni-c","yahoo"].indexOf(e)<0||(o=e,0))}(z))throw new Error("Invalid login type");!function(t,n,i){if(c=function(e){return!(["feide","uni-c"].indexOf(e)<0||(c=!0,0))}(t)){if(!1===i)throw new Error("ERROR: email should already be hashed.");if(!Array.isArray(n))throw new Error("institutions should be an array");u=n.map((e=>e.toLowerCase()))}else if(null!=e.institutions&&""!=e.institutions)throw new Error("institutions should not be set for this login type")}(z,e.institutions,e.disableUserHash)}if(!i&&!r)throw new Error("User or product code must be set");if(0==g)throw new Error("Product not set");1==_?(gc.logger("[DEBUG]: Starting take home check"),function(e){gc.logger("[DEBUG]: in the take home check");var t=r;0!=t?gc.s3Req("groups/takehome/"+t+".json",m).then((([e,t,n])=>{D(e,t)})):C()}()):i?gc.s3Req(gc.getUserFilename(i,g),m).then((([e,t,n])=>{O(e,t,n)})):(gc.logger("[DEBUG]: Starting single user check"),C())}catch(e){t(e,n)}};class Nc{constructor(e="",t="",n=""){this._user=e,this._loginType=t,this._product=n}getLicense(e=null,t=null,n=null,i=!0,r=null){return new Promise(((a,s)=>{try{let s=!0,o=null;i&&(o=new hc(dc)),void 0!==e&&(this._user!==e&&(s=!1),this._user=e),void 0!==t&&(this._loginType!==t&&(s=!1),this._loginType=t),void 0!==n&&(this._product!==n&&(s=!1),this._product=n);const c={user:e,loginType:t,product:n};null!=r&&(c.authCode=r,s=!1),s&&i?o.retrieve("rw4gc.lic.cache").then((i=>{if(null===i||0===Object.keys(i).length&&i.constructor===Object)s=!1,this.getLicenseNoCache(c).then((i=>{i.meta||(i.meta={}),i.meta.lastUpdated=new Date,i.meta.user=e,i.meta.loginType=t,i.meta.product=n;o.store("rw4gc.lic.cache",i,!1);a(i)}));else{const r=this._user===i.meta.user&&this._product===i.meta.product&&this._loginType===i.meta.loginType,s=new Date(i.meta.lastUpdated);this.nextDay(s)||!r?this.getLicenseNoCache(c).then((i=>{i.meta||(i.meta={}),i.meta.lastUpdated=new Date,i.meta.user=e,i.meta.loginType=t,i.meta.product=n;o.store("rw4gc.lic.cache",i,!1);a(i)})):a(i)}})):this.getLicenseNoCache(c).then((i=>{i.meta||(i.meta={}),i.meta.lastUpdated=new Date,i.meta.user=e,i.meta.loginType=t,i.meta.product=n,a(i)}))}catch(e){s(e)}}))}static removeCachedLicense(){return new Promise(((e,t)=>{try{new hc(dc).remove("rw4gc.lic.cache").then((()=>{e(!0)}))}catch(e){t(e)}}))}getLicenseNoCache(e){return new Promise(((t,n)=>{Ic(e,((e,i)=>{e?n(e):t(i)}))}))}nextDay(e){const t=new Date,n=1e4*t.getFullYear()+100*t.getMonth()+t.getDate();return 1e4*e.getFullYear()+100*e.getMonth()+e.getDate()!==n}}class Rc{constructor(e=tc.DEFAULT,t=!1){this._authtype=e,this._user=void 0,this._license=void 0,this._isEdge=t}async getLicense(e=null,t=!1,n=!1){var i=this;return new Promise((async function(r,a){try{let a=new pc(i._authtype,i._isEdge),s=await a.getUser(t,n);null===s&&r({licenseStore:{license:null,authType:null},authType:null});let o=new Nc(s.email,s.licensetype,"rw4gc"),c=await o.getLicense(s.email,s.licensetype,"rw4gc",!0,e);r({license:c,authType:s.licensetype})}catch(e){a(e)}}))}async getLicenseForAccount(e=null,t=null,n=!1){return new Promise((async function(i,r){try{if(0===e.length)return;let r=new Nc(e.toLowerCase(),t.toLowerCase(),"rw4gc");i(await r.getLicense(e.toLowerCase(),t.toLowerCase(),"rw4gc",n))}catch(e){r(e)}}))}signOut(e){return new Promise(((t,n)=>{try{Nc.removeCachedLicense().then((()=>{e&&(this._authtype=e),new pc(this._authtype,this._isEdge).signOut().then((()=>{this._authtype=tc.DEFAULT,t(!0)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}catch(e){n(e)}}))}}const Dc="bjglhpoliipklkfjcahfefdlfpifcinb"===chrome.runtime.id,Lc=Object.freeze({GROUP:"Group",UNLIMITED:"Unlimited",PREMIUM:"Premium",SINGLE:"Single"}),kc={licenseCheck:null},Pc=(e,t)=>{let n;return kc.licenseCheck&&kc.licenseCheck._authtype===e?n=kc.licenseCheck:(n=new Rc(e,t),kc.licenseCheck=n),n},Uc=async(e,t=null,n=!1,i=!1)=>{let r,a=Pc(e,Dc);return r=t?await a.getLicense(t):await a.getLicense(null,n,i),r},xc=async e=>{if(kc.licenseCheck)await kc.licenseCheck.signOut(e),kc.licenseCheck=null;else{let t=Pc(e,Dc);await t.signOut(e)}},Mc=async()=>{let e,n=await(i=null,new Promise((e=>{chrome.storage.managed.get(i,(t=>{e(t)}))})));var i;return n.accountType&&(e=n.accountType.startsWith(t.MICROSOFT)?t.MICROSOFT:t.GOOGLE),Dc&&(e=t.MICROSOFT),e},jc=async(e,t)=>{chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:[t]},(t=>{t&&t.forEach((t=>{t&&t.result&&!0===t.result.found&&setTimeout((()=>{let n=t.result.injectRule;n.target.tabId=e,n.target.frameIds=[t.frameId],chrome.scripting.executeScript(n)}),100)}))}))},Yc=async(e,n,i)=>{chrome.tabs.sendMessage(e.id,{command:"th-toolbarinjected"},(async function(r){if(!1===r.injected)Hc(e.id,e.url);else if(n){let e=await Mc();e||(e=t.DEFAULT);let n=(await Uc(e)).license;n&&(Ni.license=n,i.dispatchStorageEvent("account-changed",gi,{login:e,user:n.meta.user}))}}))},Gc=async()=>{const[e]=await(e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))})))({active:!0,currentWindow:!0});return e},Fc=async e=>{Bc(e)},Bc=async e=>{chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getSelector.js"]},(t=>{t&&t.forEach((t=>{t&&t.result&&!0===t.result.found&&setTimeout((()=>{let n=t.result.injectRule;n.target.tabId=e,n.target.frameIds=[t.frameId],chrome.scripting.executeScript(n)}),1e3)}))}))},Vc=async(e,t)=>{t.lastIndexOf("sharepoint.com")>-1||t.lastIndexOf("https://onedrive.live.com/")>-1||chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getIfInstalled.js"]},(t=>{t&&t.forEach((t=>{!0!==t.result&&null!==t.result&&setTimeout((()=>{chrome.scripting.executeScript({target:{tabId:e,frameIds:[t.frameId]},files:["frame.bundle.js","domdistiller.js"]})}),1e3)}))}))},Kc=(e,t,n)=>{chrome.scripting.executeScript({target:{tabId:e,frameIds:[n]},files:["functions/getIfInserted.js"]},(t=>{if(!t)return;t.filter((e=>{if(!1===e.result.res&&!1===e.result.checked)return!0})).forEach((t=>{let i=[];Zo.forEach((n=>{let r=n.settings;r.target.tabId=e,n.matches.some((e=>{let a={[e]:r},s=ec(t.result.url,a);if(s.target&&s.target.tabId)return i.push(n),!0}))})),i.length>0&&(i[0].settings.target.frameIds=[n],setTimeout((()=>{chrome.scripting.executeScript(i[0].settings)}),1e3))}))}))},Hc=async(e,t)=>{t=t.toLowerCase(),await jc(e,"mathjax/getIfMathjaxNeeded.js"),await Vc(e,t),await(async e=>{let t=0,n=!1,i=0;for(;!(n||(i++,i>30));)await new Promise((e=>{setTimeout(e,t)})),t=300,chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getIfFrameInitialised.js"]},(e=>{e&&(n=0===e.filter((e=>!e.result)).length)}))})(e),Fc(e),((e,t,n)=>{t.forEach((t=>{let i=t.settings;i.target.tabId=n,t.matches.includes("*")?setTimeout((()=>{chrome.scripting.executeScript(i)}),1e3):t.matches.some((t=>{let n=ec(e,{[t]:i});if(n.target&&n.target.tabId)return setTimeout((()=>{chrome.scripting.executeScript(n)}),1e3),!0}))}))})(t,Qo,e),Kc(e,0,0)},Wc={"en-AU":{speechoptions:{voice:"Karen",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"es",transsource:"en"},language:{language:"en_US",services:"en_US"}},"en-GB":{speechoptions:{voice:"Serena",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_GB",services:"en_GB"}},en:{speechoptions:{voice:"Serena",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_GB",services:"en_GB"}},"en-US":{speechoptions:{voice:"Ava",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"es",transsource:"en"},language:{language:"en_US",services:"en_US"}},"en-CA":{speechoptions:{voice:"Ava",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_US",services:"en_GB"}},fr:{speechoptions:{voice:"Audrey",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},"fr-CA":{speechoptions:{voice:"Amelie",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},"fr-FR":{speechoptions:{voice:"Amelie",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},ms:{speechoptions:{voice:"Tagalog",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"ms"},language:{language:"ms",services:"en_US"}},tl:{speechoptions:{voice:"Tagalog",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"ms"},language:{language:"ms",services:"en_US"}},pt:{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},"pt-BR":{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},"pt-PT":{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},es:{speechoptions:{voice:"Monica",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"es"},language:{language:"es",services:"es"}},nl:{speechoptions:{voice:"Claire",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"nl"},language:{language:"nl",services:"nl"}},"nl-BE":{speechoptions:{voice:"Claire",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"nl"},language:{language:"nl",services:"nl"}},"es-419":{speechoptions:{voice:"Paulina",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"us"},language:{language:"es",services:"es"}}};const Jc=[{name:"Tagalog",Gender:"Female",language:"ms",description:"Tagalog Female Amelia",glang:"ms",vendor:"Google",SupportedEngines:["standard"]},{name:"Tarik",Gender:"Male",language:"ar",description:"Arabic Male Tarik",glang:"ar",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Miren",Gender:"Female",language:"eu-es",description:"Basque Female Miren",glang:"eu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Montserrat",Gender:"Female",language:"ca-es",description:"Catalan Female Montserrat",glang:"ca",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tian-Tian",Gender:"Female",language:"zh-cn",description:"Chinese (Mandarin - Simplified) Female Tian-Tian",glang:"zh_cn",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mei-Jia",Gender:"Female",language:"zh-tw",description:"Chinese (Mandarin - Traditional - Taiwanese) Female Mei-Jia",glang:"zh_tw",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zuzana",Gender:"Female",language:"cs-cz",description:"Czech Female Zuzana",glang:"cs",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sara",Gender:"Female",language:"da-dk",description:"Danish Female Sara",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Magnus",Gender:"Male",language:"da-dk",description:"Danish Male Magnus",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ellen",Gender:"Female",language:"nl-be",description:"Dutch (Belgium and Flemish) Female Ellen",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Claire",Gender:"Female",language:"nl-nl",description:"Dutch (Netherlands) Female Claire",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Xander",Gender:"Male",language:"nl-nl",description:"Dutch (Netherlands) Male Xander",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Karen",Gender:"Female",language:"en-au",description:"English (Australian) Female Karen",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lee",Gender:"Male",language:"en-au",description:"English (Australian) Male Lee",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Veena",Gender:"Female",language:"en-in",description:"English (India) Female Veena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Moira",Gender:"Female",language:"en-ie",description:"English (Irish) Female Moira",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Fiona",Gender:"Female",language:"en-sc",description:"English (Scottish) Female Fiona",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tessa",Gender:"Female",language:"en-za",description:"English (South African) Female Tessa",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daniel",Gender:"Male",language:"en-gb",description:"English (UK) Male Daniel",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Serena",Gender:"Female",language:"en-gb",description:"English (UK) Female Serena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Allison",Gender:"Female",language:"en-us",description:"English (US) Female Allison",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ava",Gender:"Female",language:"en-us",description:"English (US) Female Ava",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tom",Gender:"Male",language:"en-us",description:"English (US) Male Tom",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Samantha",Gender:"Female",language:"en-us",description:"English (US) Female Samantha",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Satu",Gender:"Female",language:"fi-fi",description:"Finnish Female Satu",glang:"fi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Amelie",Gender:"Female",language:"fr-ca",description:"French (Canadian) Female Amelie",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Audrey",Gender:"Female",language:"fr",description:"French Female Audrey",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Thomas",Gender:"Male",language:"fr",description:"French Male Thomas",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmela",Gender:"Female",language:"gl-es",description:"Galician (Spain) Female Carmela",glang:"gl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Anna",Gender:"Female",language:"de-de",description:"German Female Anna",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yannick",Gender:"Male",language:"de-de",description:"German Male Yannick",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Petra",Gender:"Female",language:"de-de",description:"German Female Petra",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Melina",Gender:"Female",language:"el-gr",description:"Greek Female Melina",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nikos",Gender:"Male",language:"el-gr",description:"Greek Male Nikos",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lekha",Gender:"Female",language:"hi-in",description:"Hindi Female Lekha",glang:"hi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mariska",Gender:"Female",language:"hu-hu",description:"Hungarian Female Mariska",glang:"hu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Damayanti",Gender:"Female",language:"id-id",description:"Indonesian (Bahasa) Female Damayanti",glang:"id",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alice",Gender:"Female",language:"it-it",description:"Italian Female Alice",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Federica",Gender:"Female",language:"it-it",description:"Italian Female Federica",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luca",Gender:"Male",language:"it-it",description:"Italian Male Luca",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paola",Gender:"Female",language:"it-it",description:"Italian Female Paola",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ichiro",Gender:"Male",language:"ja-jp",description:"Japanese Male Ichiro",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sakura",Gender:"Female",language:"ja-jp",description:"Japanese Female Sakura",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sora",Gender:"Female",language:"ko-kr",description:"Korean Female Sora",glang:"ko",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nora",Gender:"Female",language:"no-no",description:"Norwegian Female Nora",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Henrik",Gender:"Male",language:"no-no",description:"Norwegian Male Henrik",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ewa",Gender:"Female",language:"pl-pl",description:"Polish Female Ewa",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zosia",Gender:"Female",language:"pl-pl",description:"Polish Female Zosia",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luciana",Gender:"Female",language:"pt-br",description:"Portuguese (Brazilian) Female Luciana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Felipe",Gender:"Male",language:"pt-br",description:"Portuguese (Brazilian) Male Felipe",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Joana",Gender:"Female",language:"pt-pt",description:"Portuguese Female Joana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Catarina",Gender:"Female",language:"pt-pt",description:"Portuguese Female Catarina",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ioana",Gender:"Female",language:"ro-ro",description:"Romanian Female Ioana",glang:"ro",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Milena",Gender:"Female",language:"ru-ru",description:"Russian Female Milena",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yuri",Gender:"Male",language:"ru-ru",description:"Russian Male Yuri",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Laura",Gender:"Female",language:"sk-sk",description:"Slovakian Female Laura",glang:"sk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carlos",Gender:"Male",language:"es-co",description:"Spanish (Columbian) Male Carlos",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Soledad",Gender:"Female",language:"es-co",description:"Spanish (Columbian) Female Soledad",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paulina",Gender:"Female",language:"es-mx",description:"Spanish (Mexican) Female Paulina",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Juan",Gender:"Male",language:"es-mx",description:"Spanish (Mexican) Male Juan",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jorge",Gender:"Male",language:"es-es",description:"Spanish (Castilian) Male Jorge",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Monica",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Female Monica",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alva",Gender:"Female",language:"sv-se",description:"Swedish Female Alva",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Oskar",Gender:"Male",language:"sv-se",description:"Swedish Male Oskar",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Kanya",Gender:"Female",language:"th-th",description:"Thai Female Kanya",glang:"th",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Cem",Gender:"Male",language:"tr-tr",description:"Turkish Male Cem",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yelda",Gender:"Female",language:"tr-tr",description:"Turkish Female Yelda",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Dariush",Gender:"Male",language:"fa-ir",glang:"fa",description:"Farsi Male Dariush",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmit",Gender:"Female",language:"he-il",glang:"he",description:"Hebrew Female Carmit",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lesya",Gender:"Female",language:"uk-ua",glang:"uk",description:"Ukrainian Female Lesya",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jordi",Gender:"Male",language:"ca-es",glang:"ca",description:"Catalan Male Jordi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lana",Gender:"Female",language:"hr-hr",description:"Croatian Female Lana",glang:"hr-hr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sinji_Ml",Gender:"Female",language:"yue-hk",description:"Cantonese Female Sinji",glang:"yue-hk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daria",Gender:"Female",language:"bg-bg",description:"Bulgarian Female Daria",glang:"bg-bg",vendor:"Nuance",SupportedEngines:["standard"]}],zc=[{name:"Geraint",Gender:"Male",language:"en-gb-wls",description:"Welsh English Male Geraint",glang:"en",vendor:"Polly",SupportedEngines:["standard"]},{name:"Gwyneth",Gender:"Female",language:"cy-gb",description:"Welsh Female Gwyneth",glang:"cy",vendor:"Polly",SupportedEngines:["standard"]},{name:"Karl",Gender:"Male",language:"is-is",description:"Icelandic Male Karl",glang:"is",vendor:"Polly",SupportedEngines:["standard"]},{name:"Dora",Gender:"Female",language:"is-is",description:"Icelandic Female Dóra",glang:"is",vendor:"Polly",SupportedEngines:["standard"]}],qc=[{name:"Ceitidh",Gender:"Female",language:"gd",glang:"gd",description:"Gaelic (Scottish) Female Ceitidh",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Peig",Gender:"Female",language:"ga",glang:"ga",description:"Irish Female Peig",vendor:"Cereproc",SupportedEngines:["standard"]}];class $c{constructor(e,t){this.voiceByName={},this.voicesByGenderLang={Male:{},Female:{}},this.voicesByLang={},this.createVoiceMap(e,t)}createVoiceMap(e,t,n){let i=[...Jc];e&&i.push(...zc),t&&i.push(...qc);for(let e=0;e<i.length;e++)this.voiceByName[i[e].name]=i[e],null!=this.voicesByGenderLang[i[e].Gender]&&void 0!==this.voicesByGenderLang[i[e].Gender]||(this.voicesByGenderLang[i[e].Gender]={}),null!=this.voicesByGenderLang[i[e].Gender][i[e].language]&&void 0!==this.voicesByGenderLang[i[e].Gender][i[e].language]||(this.voicesByGenderLang[i[e].Gender][i[e].language]=[]),this.voicesByGenderLang[i[e].Gender][i[e].language].push(i[e])}getVoiceByGenderAndLang(e,t){return this.voicesByGenderLang[e][t]}getVoiceByName(e){return this.voiceByName[e]}getVoices(e=!1,t=!1){let n=[...Jc];return e&&n.push(...zc),t&&n.push(...qc),n}}class Xc{constructor(e="Ava?",t="50"){this.AUDIOMAKERSETTINGS={USER:"rwforgdocs4",SERVICEURL:"https://texthelpspeech.speechstream.net",SERVICEPATH:"Mp3Maker"},Object.freeze(this.CHECKITSETTINGS),this._mp3Path,this._filename,this._speed=t;const n=(new $c).getVoices(!0,!0);if(this._voice=this._validateVoice(e),!(n.filter((t=>{if(t.name===e)return!0})).length>0)){let e=ko.state.language.language.replace(/_/g,"-"),t=Wc[e];void 0===t&&(t=Wc["en-US"]),t.speechoptions.voice?this._voice=t.speechoptions.voice:this._voice="Ava?"}this._baseURL=this._calculatePath(this.AUDIOMAKERSETTINGS.SERVICEURL,this.AUDIOMAKERSETTINGS.SERVICEPATH)+"?userName="+this.AUDIOMAKERSETTINGS.USER+"&voiceName="+this._voice+"&speedValue="+t,this._events=new _i,this._events.initialise(),this._source=null}async convert(e,t,n){var i=this;const r=this._baseURL;this._filename=e,this._source=n;let a=await this.requestMP3(r,e,t);const s=a.statusFileLocation;""!=s&&(this._mp3Path=a.mp3Location,setTimeout((async function(){try{await i._statusChecker(s)}catch(e){}}),1e3))}_validateVoice(e){return"%3F"==e.slice(e.length-3)?e=decodeURIComponent(e):decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),"%3F"==e.slice(e.length-3)?e=decodeURIComponent(e):decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),e}_getServerVoice(){}_calculatePath(e,t){try{"/"!=e.charAt(e.length-1)&&(e+="/"),"/"!=t.charAt(t.length-1)&&(t+="/")}catch(e){}return e+t}async requestMP3(e,t,n){let i=`filename=${t}&text=${n=encodeURIComponent(n)}`;try{let t=await fetch(e,{headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:i,method:"POST",mode:"cors",credentials:"include"});return await t.json()}catch(e){console.log(e)}}async _statusChecker(e){var t=this,n=await this._requestStatusFile(e);try{100==n?this._events.dispatchStorageEvent("th-gotaudiofile",fi,{type:"th-gotaudiofile",file:this._mp3Path},this._source.sessionId,this._source.frameId):setTimeout((async function(){try{await t._statusChecker(e)}catch(e){}}),1e3)}catch(e){}}async _requestStatusFile(e){try{const t=await fetch(e,{method:"GET",mode:"cors"}),n=await t.json();if(null==n);else{if(""==n.error||" "==n.error)return this._events.dispatchStorageEvent("th-audioprogress",fi,{type:"th-audioprogress",value:n.progress},this._source.sessionId,this._source.frameId),n.progress;console.log(n.error)}}catch(e){console.log(e)}}}class Qc{static CallSimplifyService(e=!1,t,n,i,r,a,s){let o="https://rw4gc-simplify.texthelp.com/";e&&(o="https://rw4gc-simplify.dev.texthelp.com/");const c=Qc._userDataFromLicense(a);chrome.tabs.create({url:o,active:!0},(function(e){this._listnr=function(a,o,u){if(u.id===e.id&&"complete"===o.status){const a=()=>{self.setTimeout((()=>{chrome.tabs.sendMessage(e.id,{type:"th-injectsimplify",text:n,url:i,lang:r,userInfo:c,title:t,feature:s},(e=>{"finished"!==e&&a()}))}),100)};a()}},this._removelistnr=function(e,t){chrome.tabs.onUpdated.removeListener(this._listnr),chrome.tabs.onRemoved.removeListener(this._removelistnr)},chrome.tabs.onUpdated.addListener(this._listnr),chrome.tabs.onRemoved.addListener(this._removelistnr)}))}static _userDataFromLicense(e){try{if(void 0===e.user)throw new Error("Field: user");if(void 0===e.trial)throw new Error("Field: trial");if(void 0===e.unlimited&&(e.unlimited=!1),void 0===e.daysleft)throw new Error("Field: daysleft");let t=e.user.split("@")[0].replace("%",""),n=e.user.substring(t.length+1);return{user:e.user,emailDomain:n,trial:e.trial,unlimited:e.unlimited,daysleft:e.daysleft}}catch(e){throw new Error("Error getting the correct license fields: "+e.message)}}}const Zc=e=>{chrome.identity.getAuthToken({interactive:!0,scopes:["profile","email","https://www.googleapis.com/auth/classroom.courses.readonly","https://www.googleapis.com/auth/classroom.rosters.readonly","https://www.googleapis.com/auth/classroom.profile.emails","https://www.googleapis.com/auth/classroom.profile.photos"]},(function(t){e({token:t})}))},eu=e=>{chrome.identity.getAuthToken({interactive:!0,scopes:["profile","email"]},(function(t){e({token:t})}))},tu=e=>{chrome.identity.getAuthToken({interactive:!0,scopes:["https://www.googleapis.com/auth/classroom.courses.readonly","https://www.googleapis.com/auth/classroom.rosters.readonly","https://www.googleapis.com/auth/classroom.profile.emails","https://www.googleapis.com/auth/classroom.profile.photos"]},(function(t){e({token:t})}))},nu=(e,t)=>{chrome.identity.removeCachedAuthToken({token:e},(function(){t({value:!0})}))};class iu{constructor(){this.onAnalyticsViewEvent=e=>{try{let t=e.detail.parserName,n=Ni.stateJSON,i={screenName:this.setScreenName(t.toLowerCase()),userId:n.license.user.toLowerCase()};this._analytics.sendAppView(i)}catch(e){}},this.onAnalyticsEvent=e=>{try{let t=[],n=Ni.stateJSON,i=this._analytics.hashEmail(n.license.meta.user.toLowerCase()),r="",a=e.detail.parameters.customParams;if(void 0!==a){if(void 0!==a.docId){let e=this._analytics.hash({stringToHash:a.docId});t.push({t:"d",i:"1",value:e})}t.push({t:"d",i:"2",value:n.license.licensetype}),t.push({t:"d",i:"3",value:n.license.licensesubscription}),void 0!==a.voice&&t.push({t:"d",i:"4",value:a.voice}),void 0!==a.onLine&&t.push({t:"d",i:"5",value:a.onLine}),void 0!==a.hostName&&(r=a.hostName,t.push({t:"d",i:"6",value:r})),void 0!==a.language&&t.push({t:"d",i:"7",value:a.language}),void 0!==a.ruleId&&t.push({t:"d",i:"8",value:a.ruleId}),void 0!==a.toReplace&&t.push({t:"d",i:"9",value:a.toReplace}),void 0!==a.replacedWith&&t.push({t:"d",i:"10",value:a.replacedWith}),void 0!==a.suggestions&&Array.isArray(a.suggestions)&&t.push({t:"d",i:"11",value:a.suggestions.join(", ")}),void 0!==a.textLength&&t.push({t:"m",i:"1",value:a.textLength}),void 0!==a.responseTime&&t.push({t:"m",i:"2",value:a.responseTime}),void 0!==a.speed&&t.push({t:"m",i:"3",value:parseInt(a.speed)}),void 0!==a.numWords&&t.push({t:"m",i:"4",value:a.numWords});let e=parseInt(this._analytics._getVersion().replace(/\./g,""));t.push({t:"m",i:"5",value:e}),t.push({t:"d",i:"12",value:this._analytics.getUTCTimeStamp().toString()})}let s={eventCategory:e.detail.parameters.eventCategory,eventAction:i.deIdentifiedEmail,eventLabel:i.emailDomain,eventValue:-1,userId:i.deIdentifiedEmail,screenName:this.setScreenName(e.detail.parameters.customParams.screenName.toLowerCase()),hostName:r,customAttributes:t};this._analytics.sendEvent(s)}catch(e){}},this.applicationName="RW4GC",this.analyticsTrackingCode="UA-83720712-1",this._analytics=new r({applicationName:this.applicationName,analyticsTrackingCode:this.analyticsTrackingCode})}setScreenName(e){switch(e){case"gdocsparser":case"gdocsonlyparser":return"google docs";case"htmlparser":return"web";case"googleslidesparser":return"google slides";case"googleformsparser":return"google forms";case"mswordonlineparser":case"mswordonlineonlyparser":return"microsoft word online";default:return e.toLowerCase()}}}class ru{constructor(){this._accessToken="",this._audioBlob=null,this._fileId=null,this._title=null}decode(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var n,i,r,a,s,o=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),d=new Uint8Array(l);for(n=0;n<c;n+=4)i=t.indexOf(e[n]),r=t.indexOf(e[n+1]),a=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),d[u++]=i<<2|r>>4,d[u++]=(15&r)<<4|a>>2,d[u++]=(3&a)<<6|63&s;return l}async _setFolderPermissions(e){await this._driveFetch(`https://content.googleapis.com/drive/v3/files/${e}/permissions?fields=*&alt=json`,"POST",{body:JSON.stringify({role:"writer",type:"anyone",allowFileDiscovery:!1})})}async _fileExists(e){let t=await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${e}?fields=trashed`,"GET");if(200!==t.status)return!1;let{trashed:n}=await t.json();return!n}async createVoiceNote(e,t,n,i,r){if(this._audioBlob=new Blob([this.decode(e)],{type:"audio/ogg; codecs=opus"}),this._fileId=t,this._title=n,this._folderName=i,this._accessToken=await this._getAccessToken(),this._onVoiceNote=r,0===this._accessToken.length)return;let a=null;if(a=await this._getVoiceNoteFolderFromDoc(this._fileId),a)return a=await this.uploadAudioFile(this._audioBlob,a),void r(a);a=await this._getMyVoiceNoteFolder(),a=await this._createVoiceNoteFolder(this._title,a.folderId),await this._setFolderPermissions(a),a=await this.uploadAudioFile(this._audioBlob,a),this._onVoiceNote(a)}async _getAccessToken(){return new Promise((async function(e){chrome.identity.getAuthToken({interactive:!0,scopes:["https://www.googleapis.com/auth/drive.apps.readonly","https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"]},(async function(t){e(t||"")}))}))}async _driveFetch(t,n="GET",i={}){return await fetch(t,e({method:n,headers:new Headers({"Content-Type":"application/json",Authorization:`Bearer ${this._accessToken}`})},i))}uploadVoiceNote(e){}async getFileParentFolderID(){let e=await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${this._fileId}?fields=parents`,"GET"),t=await e.json();return this.parentFolderID=t.parents[0],t.parents[0]}async _checkFolderExist(e,t){let n=await this._driveFetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${e}' and mimeType%3D'application/vnd.google-apps.folder' and parents='${t}'`,"GET"),i=await n.json();return!!(i.files&&i.files.length>0)}async getFolderID(e,t){let n=await this._driveFetch(`https://www.googleapis.com/drive/v3/files?q=name%3D'${e}' and mimeType%3D'application/vnd.google-apps.folder' and parents='${t}'`,"GET"),i=await n.json();return this.currentFolderForNotes=i.files[0].id,i.files[0].id}async _createVoiceNoteFolder(e,t=null){let n={name:e,mimeType:"application/vnd.google-apps.folder"};t&&(n.parents=[t]);let i=await this._driveFetch("https://www.googleapis.com/drive/v3/files?supportsAllDrives=true","POST",{body:JSON.stringify(n)}),r=await i.json();return await this._driveFetch(`https://content.googleapis.com/drive/v3/files/${this._fileId}?alt=json`,"PATCH",{body:JSON.stringify({appProperties:{folderId:r.id}})}),r.id}async _deleteVoiceNoteConfigFile(e){return await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${e}`,"DELETE")}async _getMyVoiceNoteFolder(){if(this._config)return this._config;let e=await this._driveFetch("https://content.googleapis.com/drive/v3/files?q=name%3D%27TexthelpVoiceNoteConfig%27&spaces=appDataFolder&fields=files%2Fid%2Cfiles%2Fdescription%2Cfiles%2Ftrashed","GET"),t=await e.json();const{files:n}=t;if(n.length<1){const e=await this._createVoiceNoteFolder(this._folderName);return await this._createConfigFile(e),{folderId:e}}let{id:i,description:r,trashed:a}=n[0];if(await this._fileExists(r))return{folderId:r};await this._deleteVoiceNoteConfigFile(this._accessToken,i);const s=await this._createVoiceNoteFolder(this._folderName);return await this._createConfigFile(s),{folderId:s}}async _createConfigFile(e){let t=await this._driveFetch("https://www.googleapis.com/drive/v3/files","POST",{body:JSON.stringify({name:"TexthelpVoiceNoteConfig",parents:["appDataFolder"],description:e})});return await t.json()}async _getVoiceNoteFolderFromDoc(e){let t=await this._driveFetch(`https://content.googleapis.com/drive/v3/files/${e}?fields=appProperties`,"GET");if(404===t.status)return null;let n=await t.json();return n.appProperties&&await this._fileExists(n.appProperties.folderId)?n.appProperties.folderId:null}async uploadAudioFile(e,t){const n=new FormData;n.append("blob",e,"Voice Note");let i=await this._driveFetch("https://www.googleapis.com/upload/drive/v3/files?","POST",{headers:new Headers({Authorization:`Bearer ${this._accessToken}`}),body:n});return i=await i.json(),await this._driveFetch(`https://www.googleapis.com/drive/v3/files/${i.id}?addParents=${t}`,"PATCH",{body:JSON.stringify({name:"Voice Note.ogg",mimeType:"audio/ogg; codecs=opus"})}),i.id}}function au(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var su=function(){function e(t,n,i,r){var a=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._senderId=t,this._messagingUrl="https://messaging.texthelp.com/",this._messagingCallback=void 0,"boolean"==typeof i?(!i&&(this._messagingUrl="https://th-messaging.dev.texthelp.com/"),this._messagingCallback=r):this._messagingCallback="function"==typeof i?i:r,this._lastMessage=void 0,this._waiting=!1,this._onMessageCallback=void 0,this._lastTopic=void 0,this._lastCallback=void 0,this._lastWaitTopic=void 0,this._application=n,this._GCMListen(),chrome.alarms.onAlarm.addListener((function(e){if("GCMKeepAlive"===e.name)void 0!==a._lastTopic&&a._registerTopic(a._lastTopic,void 0,!1,(function(){}))}))}return t=e,(n=[{key:"getLastMessage",value:function(e,t,n){var i=this,r=!1,a=void 0!==this._lastMessage;if(e!==this._lastTopic&&(t=!1,this._registerTopic(e,this._lastTopic,!0,(function(){}))),this._lastTopic=e,this._lastCallback=n,t&&a){try{"timed"===this._lastMessage.timetype&&0>this._expiryTimeMS(this._lastMessage,!0)&&(r=!0)}catch(e){r=!0}return void 0!==n&&n(r?void 0:this._lastMessage),void(void 0!==this._messagingCallback&&this._messagingCallback(this._lastMessage))}try{var s=`${this._messagingUrl}getlastmessage/v1`,o={method:"POST",body:JSON.stringify({message_topic:e,application:this._application}),cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._clientAuth}`}};fetch(s,o).then((function(e){e.json().then((function(e){var t;if(0<e.length){var a=e[0];t=i._parseMessageDoc(a)}if(i._lastMessage=t,void 0!==t&&void 0!==t.application&&t.application.toLowerCase()!==i._application&&n(void 0),r=!1,void 0===t)r=!0;else if("lockdown"!==t.application.toLowerCase())try{"timed"===i._lastMessage.timetype&&0>i._expiryTimeMS(i._lastMessage,!0)&&(r=!0)}catch(e){r=!0}void 0!==n&&n(r?void 0:t),void 0!==i._messagingCallback&&(r?i._messagingCallback(void 0):i._messagingCallback(t)),r||void 0===i._onMessageCallback||i._onMessageCallback(t)}))})).catch((function(){void 0!==n&&n(void 0),void 0!==i._messagingCallback&&i._messagingCallback(void 0)}))}catch(e){}}},{key:"onMessage",value:function(e){this._onMessageCallback=e}},{key:"manualMessage",value:function(e){try{var t=JSON.parse(e.data.message);this._parseMessage(t)}catch(e){console.log(e.message)}}},{key:"_parseMessageDoc",value:function(e){var t;try{var n={};if(n="string"==typeof e.message?JSON.parse(e.message):e.message,Object.prototype.hasOwnProperty.call(n,"application")||(n.application="rw4gc"),"lockdown"===n.application.toLowerCase())t={application:n.application,examSettings:n.examSettings};else{t={application:n.application};try{t.features=n["disabled-features"].reduce((function(e,t){return e[t]=0,e}),{})}catch(e){t.features={}}t.time=n.time,t.timetype=n.timetype}t.timestamp=e.post_date}catch(e){t=void 0}return t}},{key:"_expiryTimeMS",value:function(e,t){if(Number.isNaN(e.time))return 0;try{var n=new Date,i=new Date(e.timestamp),r=new Date(i.getTime()),a=60*parseFloat(e.time);r.setMinutes(r.getMinutes()+a);var s=r-n;return t&&0<s&&chrome.alarms.create("MessageExpired",{when:r.getTime()}),s}catch(e){return 0}}},{key:"_GCMKeepAlive",value:function(e){chrome.alarms.get("GCMKeepAlive",(function(t){void 0===t&&chrome.alarms.create("GCMKeepAlive",{periodInMinutes:e})}))}},{key:"_registerTest",value:function(){console.log(this._senderId),chrome.gcm.register([this._senderId],(function(e){void 0!==chrome.runtime.lastError&&console.log(chrome.runtime.lastError),console.log(`Old method id: ${e}`)})),chrome.instanceID.getToken({authorizedEntity:this._senderId,scope:"GCM"},(function(e){void 0!==chrome.runtime.lastError&&console.log(chrome.runtime.lastError),console.log(`New method id: ${e}`)}))}},{key:"_registerTopic",value:function(e,t,n,i){var r=this;chrome.storage.local.get("GCMRegistrationId",(function(t){var a=!1;chrome.instanceID.getToken({authorizedEntity:r._senderId,scope:"GCM"},(function(s){return void 0===chrome.runtime.lastError?n?(void 0!==t.id&&void 0!==t.topics&&t.id===s&&-1<t.topics.indexOf(token)&&(a=!0),void(a?i(t):void 0===t.id?r._registerIdWithService(s,e,(function(t){if(t){var n={id:s,topics:[e],lastModified:(new Date).toISOString()};chrome.storage.local.set({GCMRegistrationId:n}),i(n)}})):(void 0===t.topics?t.topics=[e]:t.topics.push(e),r._registerIdWithService(s,e,(function(e){e&&(e.lastModified=(new Date).toISOString(),chrome.storage.local.set({GCMRegistrationId:e}),i(e))}))))):void i({success:!0}):(console.log(chrome.runtime.lastError),void i(null))}))}))}},{key:"_GCMListen",value:function(){var e=this;chrome.gcm.onMessage.addListener((function(t){var n=JSON.parse(t.data.message);e._parseMessage(n)}))}},{key:"_parseMessage",value:function(e){if((void 0===e.message.application||e.message.application.toLowerCase()===this._application.toLowerCase())&&void 0!==e.message){var t=this._parseMessageDoc(e);this._lastMessage=t;var n=!1;if(void 0===t)n=!0;else if(void 0!==t.application&&"lockdown"!==t.application.toLowerCase())try{"timed"===this._lastMessage.timetype&&0>this._expiryTimeMS(this._lastMessage,!0)&&(n=!0)}catch(e){n=!0}n||void 0===this._messagingCallback||this._messagingCallback(t),n||void 0===this._onMessageCallback||this._onMessageCallback(t)}}},{key:"_registerIdWithService",value:function(e,t,n,i){var r=`${this._messagingUrl}registertoken/v1`,a={message_topic:t,google_token:e};void 0!==n&&(a.previous_topic=n);var s={method:"POST",body:JSON.stringify(a),cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._clientAuth}`}};fetch(r,s).then((function(e){e.json().then((function(e){void 0!==i&&i(e.success)})).catch((function(){void 0!==i&&i(!1)}))}))}},{key:"waiting",get:function(){return this._waiting}}])&&au(t.prototype,n),i&&au(t,i),e;var t,n,i}();class ou{constructor(e,t=!0){var n,i,r;r=void 0,(i="messagingInstance")in(n=this)?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.storageEvents=new _i,this.messagingInstance=new su("224182583415","rw4gc",!0,(e=>{e&&this.storageEvents.dispatchStorageEvent("th-datadesk-message",mi,{type:"th-datadesk-message",message:e.features})})),t&&this.messagingInstance.getLastMessage(e,!0,(e=>{e&&this.storageEvents.dispatchStorageEvent("th-datadesk-message",mi,{type:"th-datadesk-message",message:e.features})})),chrome.alarms.onAlarm.addListener((e=>{if("MessageExpired"===e.name)this.storageEvents.dispatchStorageEvent("th-datadesk-reset",mi,{type:"th-datadesk-reset"})}))}processMessage(e){this.messagingInstance.manualMessage(e)}}const cu={dataDesk:null},uu=(e,t,n)=>{try{if(cu.dataDesk)return cu.dataDesk;switch(e){case Lc.GROUP:case Lc.PREMIUM:case Lc.SINGLE:case Lc.UNLIMITED:cu.dataDesk=new ou(t,n)}}catch(e){console.info("Edge doesn't support chrome messaging.")}return cu.dataDesk};let lu=-1;const du=()=>{chrome.runtime.onMessage.addListener((async(e,t)=>{if(t.id===chrome.runtime.id&&e.command)switch(e.command.toLowerCase()){case"thswmslogoutactive":lu=parseInt(e.active);break;case"thswclosemslogout":hu({url:["https://thzbf.texthelp.com/*"]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),-1===lu||isNaN(lu)||chrome.tabs.update(lu,{active:!0})}}))},hu=e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}));!async function(){new Bo;const e=new Xo,n=new _i;chrome.runtime.onMessage.addListener((async(e,t,n)=>{if(t.id===chrome.runtime.id)return e.thtype&&"mathjax"===e.thtype?new Promise(((n,i)=>{let r=e.url,a={target:{tabId:t.tab.id,frameIds:[t.frameId]},files:[r.replace(`chrome-extension://${chrome.runtime.id}/`,"")]};chrome.scripting.executeScript(a,(e=>{n()}))})):void 0})),n.initialise();let i=null;const r=new iu;await Promise.all([Ni.initialise(),Co.initialise(),Io.initialise(),Do.initialise(),ko.initialise(),Lo.initialise()]);const a=e=>new Promise((t=>{chrome.storage.sync.get(e,(e=>{t(e)}))})),s=e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}));chrome.action.onClicked.addListener((async e=>{const t=void 0===Ni.state.license.user;Yc(e,t,n);let i=await s({active:!0,currentWindow:!0});chrome.tabs.sendMessage(i[0].id,{command:"settoolbarVisible",visible:!0})})),chrome.runtime.onMessageExternal.addListener(((e,t,n)=>{if("enfolipbjmnmleonhhebhalojdpcpdoo"===t.id&&void 0!==e.command&&"GETSPEECHSETTINGS"===e.command){return n({voice:ko.stateJSON.speech.voice,speed:ko.stateJSON.speech.speed}),!0}((e,t,n)=>{if(e&&"ft4g"==e.app){if("get_access_token"===e.type)return Zc(n),!0;if("get_classroom_token"===e.type)return tu(n),!0;if("get_profile_token"===e.type)return eu(n),!0;if("revoke_access_token"===e.type)nu(e.custom,n)}})(e,0,n)})),n.addEventListener("addVoiceNote",(async e=>{null===i&&(i=new ru),await i.createVoiceNote(e.detail.audioblob,e.detail.fileId,e.detail.title,e.detail.folderName,(async t=>{let i=`https://drive.google.com/uc?id=${t}`;n.dispatchStorageEvent("onVoiceNoteAdded",vi,{type:"th-onVoiceNoteAdded",linkToVoiceNote:i},e.detail.source.sessionId,e.detail.source.frameId)}))})),chrome.gcm.onMessage.addListener((e=>{try{if(void 0!==Ni.stateJSON){((e,t,n)=>{let i=uu(e,t,!1);i&&i.processMessage(n)})(Ni.stateJSON.license.licence_type,Ni.stateJSON.user,e)}}catch(e){console.log(e)}})),chrome.alarms.onAlarm.addListener((e=>{if("MessageExpired"===e.name)n.dispatchStorageEvent("th-datadesk-reset",mi,{type:"th-datadesk-reset"})})),chrome.tabs.onActivated.addListener((e=>{chrome.tabs.sendMessage(e.tabId,{command:"setFrameActive"})}));n.addEventListener("getLicense",(async i=>{if(!kc.licenseCheck||!kc.licenseCheck._license){let r=await Mc();Io.setLicenseType(r);const a=await Uc(r,i.detail.productCode);let s=a.license;Ni.license=s,ko.state.driveInstall||"microsoft"!==a.authType&&(e.swAuthorizeForDriveInstall(t.GOOGLE),ko.setDriveInstall(!0)),uu(s.licence_type,s.user,!0),i&&i.detail&&i.detail.returnevent&&n.dispatchStorageEvent(i.detail.returnevent,vi,{type:i.detail.returnevent},i.detail.source.sessionId,i.detail.source.frameId)}})),n.addEventListener("th-generateaudio",(async e=>{const t=ko.state.speech.voice,n=ko.state.speech.speed;new Xc(t,n).convert("AudioMaker",e.detail.text,e.detail.source)})),n.addEventListener("th-datadesk-message",(async e=>{Co.features=e.detail.message})),n.addEventListener("th-datadesk-reset",(async e=>{Co.resetFeatures()})),n.addEventListener("th-screenshotreader-worker",(async e=>{((e,t)=>{let n={};const i="enfolipbjmnmleonhhebhalojdpcpdoo";chrome.management.get(i,(r=>{chrome.runtime.lastError?chrome.tabs.create({url:"https://chrome.google.com/webstore/detail/screenshot-reader/enfolipbjmnmleonhhebhalojdpcpdoo",active:!0}):(n.command="stopScreenShotReader",chrome.runtime.sendMessage(i,n),n.command="startScreenShotReader",n.voice=`${e}?`,n.speed=t,n.speechServerURL="https://rwforg.speechstream.net/SpeechServices/index.html",n.user="rwforgdocs6",chrome.runtime.sendMessage(i,n))}))})(e.detail.voice,e.detail.speed)})),n.addEventListener("th-practicereadingaloudtab",(async e=>{((e,t)=>{let n="Google";t.account.microsoft&&(n="Microsoft");let i=e.text.replace(/(?:\f\n|\f|\n)/g,"<br>"),r="https://fluency.texthelp.com/readwrite",a={html:i,documentTitle:e.title,readingVoice:t.voice,dictionaryLocale:t.features,pictureDictionaryLocale:t.features,translateVoice:t.features,translateSourceLanguage:e.lang.language,accountType:n,email:t.account.email};chrome.tabs.create({url:chrome.runtime.getURL("pra.html")},(function(e){chrome.tabs.onUpdated.addListener((function t(n,i){n===e.id&&"complete"===i.status&&(chrome.tabs.onUpdated.removeListener(t),chrome.tabs.sendMessage(n,{url:r,data:a}))})),chrome.tabs.sendMessage(e.id,{url:r,data:a})}))})(e.detail.text,e.detail.options)})),n.addEventListener("analyticsViewEvent",(async e=>{r.onAnalyticsViewEvent(e)})),n.addEventListener("analyticsEvent",(async e=>{r.onAnalyticsEvent(e)})),n.addEventListener("changeAccount",(async e=>{if(e.detail.logout){try{t[e.detail.loginType]===t.GOOGLE?await xc(t.MICROSOFT):await xc(t.GOOGLE)}catch(e){console.log(e)}try{Ni.resetLicense(),await new Promise((e=>{setTimeout(e,300)}))}catch(e){console.log(e)}}let i=(await Uc(t[e.detail.loginType],null,e.detail.logout,e.detail.logout)).license;i?(Ni.license=i,Io.setLicenseType(t[e.detail.loginType]),n.dispatchStorageEvent("settoolbarVisible",gi,{visible:!0}),n.dispatchStorageEvent("account-changed",gi,{login:t[e.detail.loginType],user:i.meta.user}),cu.dataDesk=null,uu(i.licence_type,i.user,!0)):(n.dispatchStorageEvent("hideSettings",gi,{visible:!0}),console.log("no licence info after changing account"))})),n.addEventListener("microsoftLogout",(async()=>{n.dispatchStorageEvent("settoolbarVisible",gi,{visible:!1});try{await xc(t.MICROSOFT),Ni.resetLicense(),n.dispatchStorageEvent("settoolbarVisible",gi,{visible:!1}),n.dispatchStorageEvent("account-changed",gi,{login:"",user:""})}catch(e){Ni.resetLicense(),Io.setLicenseType(t.DEFAULT)}})),n.addEventListener("th-opensimplifttab",(async e=>{const t=ko.state.language.language,n=ko.state.language.features;await Qc.CallSimplifyService(!1,e.detail.title,e.detail.text,e.detail.url,t,e.detail.license,n)})),n.addEventListener("th-websearch",(async e=>{if(chrome.search)return void chrome.search.query({disposition:"NEW_TAB",text:e.detail.text});let t=e.detail.text.split(" ");t.length<1||(t.length>100&&(t.length=100),chrome.tabs.create({url:"http://google.com/search?q="+encodeURIComponent(t.join(" "))}))})),du(),chrome.runtime.onMessage.addListener((async(e,t,n)=>{if(t.id===chrome.runtime.id&&e.command)if("th-inject"!==e.command)if("th-inject-frame"!==e.command)if("RW4GC_ACTION_CLICK"!==e.command)"th-getWindowId"!==e.command?"th-isEdge"!==e.command?"th-updateTabsFocus"!==e.command||chrome.tabs.sendMessage(t.tab.id,{command:"setFrameActive"}):n(Dc):n(t.tab.id);else{const e=await Gc();Yc(e)}else{if(t.tab.url.startsWith("chrome://")||""===t.tab.url)return;await(async(e,t,n)=>{await jc(e,"mathjax/getIfMathjaxNeeded.js"),await Vc(e,t),Fc(e),Kc(e,0,n)})(t.tab.id,t.tab.url,t.frameId)}else(async(e=null)=>{(e||(e=await Gc()))&&Hc(e.id,e.url)})(t.tab)})),chrome.commands.onCommand.addListener((async e=>{let t=await s({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{command:"shortcutHandler",action:e})})),chrome.runtime.onInstalled.addListener((async e=>{if(chrome.identity.getProfileUserInfo((async e=>{if(e.email.length>0){let n=await Mc();n||(n=t.GOOGLE),await(async(e,t,n)=>{let i=Pc(t,!1);return await i.getLicenseForAccount(e,t,n)})(e.email,n,!0)}})),"update"===e.reason){let e={},t=[],n={},i=await a("thRWFGSettings");i.thRWFGSettings&&(e=JSON.parse(i.thRWFGSettings)),i=await a("texthelpdictionaryItems"),i.texthelpdictionaryItems&&(t=i.texthelpdictionaryItems),i=await a("texthelpbar"),i.texthelpbar&&(n=i.texthelpbar.left.buttons),ko.importV1Settings(e,t,n)}}))}()}));
